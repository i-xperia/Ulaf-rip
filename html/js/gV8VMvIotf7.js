self.CavalryLogger&&CavalryLogger.start_js(["W7JZ8"]),__d("PagePluginActions",[],function(t,e,i,n,r,o){r.exports={PAGE_AVATAR:"page_avatar",PAGE_CTA:"page_cta",PAGE_LIKE:"page_like",PAGE_PERMALINK:"page_permalink",PAGE_SHARE:"page_share",PAGE_UNLIKE:"page_unlike"}},null),__d("PagePluginActionTypes",[],function(t,e,i,n,r,o){r.exports={CLICK:"click"}},null),__d("PluginConnectButtonType",[],function(t,e,i,n,r,o){r.exports={BLUE_BASE:1,WHITE_BASE:2}},null),__d("PluginShareLogTypes",[],function(t,e,i,n,r,o){r.exports={IMPRESSION:"impression",CLICK:"click"}},null),__d("PlatformDialog",["cx","DOMEventListener","DOMEvent","CSS"],function(t,e,i,n,r,o,s){function u(t,i,n){"use strict";a=this,this.$PlatformDialog1=t,this.$PlatformDialog2=i,this.$PlatformDialog3=!1,e("DOMEventListener").add(this.$PlatformDialog1,"submit",function(i){return this.$PlatformDialog3?void new(e("DOMEvent"))(i).kill():(this.$PlatformDialog3=!0,void(n&&e("CSS").addClass(t,"_32qa")))}.bind(this))}var a;u.getInstance=function(){"use strict";return a},u.prototype.getForm=function(){"use strict";return this.$PlatformDialog1},u.prototype.getDisplay=function(){"use strict";return this.$PlatformDialog2},u.prototype.hasBeenSubmitted=function(){"use strict";return this.$PlatformDialog3},u.RESPONSE="platform/dialog/response",r.exports=u},null),__d("PluginLoggedOutUserTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(t,e,i,n,r,o){"use strict";function s(){this.clear()}s.prototype.log=function(){e("GeneratedLoggerUtils").log("logger:PluginLoggedOutUserLoggerConfig",this.$PluginLoggedOutUserTypedLogger1,e("Banzai").BASIC)},s.prototype.logVital=function(){e("GeneratedLoggerUtils").log("logger:PluginLoggedOutUserLoggerConfig",this.$PluginLoggedOutUserTypedLogger1,e("Banzai").VITAL)},s.prototype.clear=function(){return this.$PluginLoggedOutUserTypedLogger1={},this},s.prototype.updateData=function(t){return this.$PluginLoggedOutUserTypedLogger1=babelHelpers["extends"]({},this.$PluginLoggedOutUserTypedLogger1,t),this},s.prototype.setHref=function(t){return this.$PluginLoggedOutUserTypedLogger1.href=t,this},s.prototype.setIsSDK=function(t){return this.$PluginLoggedOutUserTypedLogger1.is_sdk=t,this},s.prototype.setPluginAppID=function(t){return this.$PluginLoggedOutUserTypedLogger1.plugin_app_id=t,this},s.prototype.setPluginName=function(t){return this.$PluginLoggedOutUserTypedLogger1.plugin_name=t,this},s.prototype.setRefererURL=function(t){return this.$PluginLoggedOutUserTypedLogger1.referer_url=t,this},s.prototype.setVC=function(t){return this.$PluginLoggedOutUserTypedLogger1.vc=t,this},s.prototype.updateExtraData=function(t){return t=e("nullthrows")(e("GeneratedLoggerUtils").serializeMap(t)),e("GeneratedLoggerUtils").checkExtraDataFieldNames(t,u),this.$PluginLoggedOutUserTypedLogger1=babelHelpers["extends"]({},this.$PluginLoggedOutUserTypedLogger1,t),this},s.prototype.addToExtraData=function(t,e){var i={};return i[t]=e,this.updateExtraData(i)};var u={href:!0,is_sdk:!0,plugin_app_id:!0,plugin_name:!0,referer_url:!0,vc:!0};r.exports=s},null),__d("ArbiterFrame",[],function(t,e,i,n,r,o){var s={inform:function(t,e,i){var n,r=parent.frames,o=r.length;e.crossFrame=!0;for(var s=0;s<o;s++){n=r[s];try{if(!n||n==window)continue;n.require?n.require("Arbiter").inform(t,e,i):n.ServerJSAsyncLoader&&n.ServerJSAsyncLoader.wakeUp(t,e,i)}catch(u){}}}};r.exports=s},null),__d("FormSubmit",["AsyncRequest","AsyncResponse","CSS","DOMQuery","Event","Form","Parent","trackReferrer"],function(t,e,i,n,r,o){var s={send:function(t,i){var n=(e("Form").getAttribute(t,"method")||"GET").toUpperCase();i=e("Parent").byTag(i,"button")||i;var r=e("Parent").byClass(i,"stat_elem")||t;if(e("CSS").hasClass(r,"async_saving"))return null;if(i&&(i.form!==t||"INPUT"!=i.nodeName&&"BUTTON"!=i.nodeName||"submit"!=i.type)){var o=e("DOMQuery").scry(t,".enter_submit_target")[0];o&&(i=o)}var s=e("Form").serialize(t,i);e("Form").setDisabled(t,!0);var u=e("Form").getAttribute(t,"ajaxify")||e("Form").getAttribute(t,"action"),a=!!e("Form").getAttribute(t,"data-cors");e("trackReferrer")(t,u);var l=(new(e("AsyncRequest"))).setAllowCrossOrigin(a).setURI(u).setData(s).setNectarModuleDataSafe(t).setReadOnly("GET"==n).setMethod(n).setRelativeTo(t).setStatusElement(r).setInitialHandler(e("Form").setDisabled.bind(null,t,!1)).setHandler(function(i){e("Event").fire(t,"success",{response:i})}).setErrorHandler(function(i){e("Event").fire(t,"error",{response:i})!==!1&&e("AsyncResponse").defaultErrorHandler(i)}).setFinallyHandler(e("Form").setDisabled.bind(null,t,!1));return l.send(),l}};r.exports=s},null),__d("Popup",[],function(t,e,i,n,r,o){var s={open:function(t,e,i,n){var r=document.body,o="screenX"in window?window.screenX:window.screenLeft,s="screenY"in window?window.screenY:window.screenTop,u="outerWidth"in window?window.outerWidth:r.clientWidth,a="outerHeight"in window?window.outerHeight:r.clientHeight-22,l=Math.floor(o+(u-e)/2),c=Math.floor(s+(a-i)/2.5),h=["width="+e,"height="+i,"left="+l,"top="+c,"scrollbars"];return window.open(t,n||"_blank",h.join(","))}};r.exports=s},null),__d("PopupLink",["DOMEvent","DOMEventListener","Popup"],function(t,e,i,n,r,o){var s={listen:function(t,i,n){e("DOMEventListener").add(t,"click",function(r){new(e("DOMEvent"))(r).kill(),e("Popup").open(t.href,i,n)})}};r.exports=s},null),__d("PopupWindow",["DOMDimensions","DOMQuery","Layer","Popup","getViewportDimensions"],function(t,e,i,n,r,o){var s={_opts:{allowShrink:!0,strategy:"vector",timeout:100,widthElement:null},init:function(t){Object.assign(s._opts,t),setInterval(s._resizeCheck,s._opts.timeout)},_resizeCheck:function(){var t=e("getViewportDimensions")(),i=s._getDocumentSize(),n=e("Layer").getTopmostLayer();if(n){var r=n.getRoot().firstChild,o=e("DOMDimensions").getElementDimensions(r);o.height+=e("DOMDimensions").measureElementBox(r,"height",!0,!0,!0),o.width+=e("DOMDimensions").measureElementBox(r,"width",!0,!0,!0),i.height=Math.max(i.height,o.height),i.width=Math.max(i.width,o.width)}var u=i.height-t.height,a=i.width-t.width;if(a<0&&!s._opts.widthElement&&(a=0),a=a>1?a:0,!s._opts.allowShrink&&u<0&&(u=0),u||a)try{window.console&&window.console.firebug,window.resizeBy(a,u),a&&window.moveBy(a/-2,0)}catch(l){}},_getDocumentSize:function(){var i=e("DOMDimensions").getDocumentDimensions();if("offsetHeight"===s._opts.strategy&&(i.height=document.body.offsetHeight),s._opts.widthElement){var n=e("DOMQuery").scry(document.body,s._opts.widthElement)[0];n&&(i.width=e("DOMDimensions").getElementDimensions(n).width)}var r=t.Dialog;return r&&r.max_bottom&&r.max_bottom>i.height&&(i.height=r.max_bottom),i},open:function(t,i,n,r){return e("Popup").open(t,n,i,r)}};r.exports=s},null),__d("Queue",[],function(t,e,i,n,r,o){function s(t){"use strict";this._opts=babelHelpers["extends"]({interval:0,processor:null},t),this._queue=[],this._stopped=!0}var u={};s.prototype._dispatch=function(t){"use strict";if(!this._stopped&&0!==this._queue.length){if(!this._opts.processor)throw this._stopped=!0,new Error("No processor available");if(this._opts.interval)this._opts.processor.call(this,this._queue.shift()),this._timeout=setTimeout(this._dispatch.bind(this),this._opts.interval);else for(;this._queue.length;)this._opts.processor.call(this,this._queue.shift())}},s.prototype.enqueue=function(t){"use strict";return this._opts.processor&&!this._stopped?this._opts.processor.call(this,t):this._queue.push(t),this},s.prototype.start=function(t){"use strict";return t&&(this._opts.processor=t),this._stopped=!1,this._dispatch(),this},s.prototype.isStarted=function(){"use strict";return!this._stopped},s.prototype.dispatch=function(){"use strict";this._dispatch(!0)},s.prototype.stop=function(t){"use strict";return this._stopped=!0,t&&clearTimeout(this._timeout),this},s.prototype.merge=function(t,e){"use strict";return this._queue[e?"unshift":"push"].apply(this._queue,t._queue),t._queue=[],this._dispatch(),this},s.prototype.getLength=function(){"use strict";return this._queue.length},s.get=function(t,e){"use strict";var i;return i=t in u?u[t]:u[t]=new s(e)},s.exists=function(t){"use strict";return t in u},s.remove=function(t){"use strict";return delete u[t]},r.exports=s},null),__d("TextInputControl",["DOMControl","Event","Input","debounce"],function(t,e,i,n,r,o){function s(t){"use strict";a.constructor.call(this,t);var i=this.getRoot(),n=e("debounce")(this.update.bind(this),0);e("Event").listen(i,{input:n,keydown:n,paste:n})}var u,a;u=babelHelpers.inherits(s,e("DOMControl")),a=u&&u.prototype,s.prototype.setMaxLength=function(t){"use strict";return e("Input").setMaxLength(this.getRoot(),t),this},s.prototype.getValue=function(){"use strict";return e("Input").getValue(this.getRoot())},s.prototype.isEmpty=function(){"use strict";return e("Input").isEmpty(this.getRoot())},s.prototype.setValue=function(t){"use strict";return e("Input").setValue(this.getRoot(),t),this.update(),this},s.prototype.clear=function(){"use strict";return this.setValue("")},s.prototype.setPlaceholderText=function(t){"use strict";return e("Input").setPlaceholder(this.getRoot(),t),this},r.exports=s},null),__d("transferTextStyles",["Style"],function(t,e,i,n,r,o){function s(t,i){for(var n in u)u.hasOwnProperty(n)&&(u[n]=e("Style").get(t,n));e("Style").apply(i,u)}var u={fontFamily:null,fontSize:null,fontStyle:null,fontWeight:null,lineHeight:null,wordWrap:null};r.exports=s},null),__d("TextMetrics",["DOM","Style","UserAgent","transferTextStyles"],function(t,e,i,n,r,o){function s(t){var i=t.clientWidth,n="border-box"==e("Style").get(t,"-moz-box-sizing");if(n&&e("UserAgent").isBrowser("Firefox < 29"))return i;var r=e("Style").getFloat(t,"paddingLeft")+e("Style").getFloat(t,"paddingRight");return i-r}function u(t,i){"use strict";this.$TextMetrics1=t,this.$TextMetrics2=!!i;var n="textarea",r="textMetrics";this.$TextMetrics2&&(n="div",r+=" textMetricsInline"),this.$TextMetrics3=e("DOM").create(n,{className:r}),e("transferTextStyles")(t,this.$TextMetrics3),document.body.appendChild(this.$TextMetrics3)}u.prototype.measure=function(t){"use strict";var i=this.$TextMetrics1,n=this.$TextMetrics3;if(t=(t||i.value)+"...",!this.$TextMetrics2){var r=s(i);e("Style").set(n,"width",Math.max(r,0)+"px")}return"TEXTAREA"===i.nodeName?n.value=t:e("DOM").setContent(n,t),{width:n.scrollWidth,height:n.scrollHeight}},u.prototype.destroy=function(){"use strict";e("DOM").remove(this.$TextMetrics3)},r.exports=u},null),__d("TextAreaControl",["Arbiter","ArbiterMixin","CSS","DOMControl","Event","Style","TextInputControl","TextMetrics","classWithMixins","mixin"],function(t,e,i,n,r,o){function s(t,i){return e("Style").getFloat(t,i)||0}function u(t){"use strict";l.constructor.call(this,t),this.autogrow=e("CSS").hasClass(t,"uiTextareaAutogrow"),this.autogrowWithPlaceholder=e("CSS").hasClass(t,"uiTextareaAutogrowWithPlaceholder"),this.width=null,e("Event").listen(t,"focus",this._handleFocus.bind(this))}var a,l;a=babelHelpers.inherits(u,e("classWithMixins")(e("TextInputControl"),e("mixin")(e("ArbiterMixin")))),l=a&&a.prototype,u.prototype.setAutogrow=function(t){"use strict";return this.autogrow=t,this},u.prototype.onupdate=function(){"use strict";l.onupdate.call(this),this.updateHeight()},u.prototype.updateHeight=function(){"use strict";if(this.autogrow){var t=this.getRoot();this.metrics||(this.metrics=new(e("TextMetrics"))(t)),"undefined"==typeof this.initialHeight&&(this.isBorderBox="border-box"===e("Style").get(t,"box-sizing")||"border-box"===e("Style").get(t,"-moz-box-sizing")||"border-box"===e("Style").get(t,"-webkit-box-sizing"),this.borderBoxOffset=s(t,"padding-top")+s(t,"padding-bottom")+s(t,"border-top-width")+s(t,"border-bottom-width"),this.initialHeight=t.offsetHeight-this.borderBoxOffset);var i=null;i=t.value&&0!==t.value.length||!this.autogrowWithPlaceholder?this.metrics.measure():this.metrics.measure(t.placeholder);var n=Math.max(this.initialHeight,i.height);this.isBorderBox&&(n+=this.borderBoxOffset),this.maxHeight&&n>this.maxHeight&&(n=this.maxHeight,e("Arbiter").inform("maxHeightExceeded",{textArea:t})),n!==this.height&&(this.height=n,e("Style").set(t,"height",n+"px"),e("Arbiter").inform("reflow"),this.inform("resize"))}else this.metrics&&(this.metrics.destroy(),this.metrics=null)},u.prototype.resetHeight=function(){"use strict";this.height=-1,this.update()},u.prototype.setMaxHeight=function(t){"use strict";this.maxHeight=t},u.prototype.setAutogrowWithPlaceholder=function(t){"use strict";this.autogrowWithPlacedholder=t},u.prototype._handleFocus=function(){"use strict";this.width=null},u.getInstance=function(t){"use strict";return e("DOMControl").getInstance(t)||new u(t)},r.exports=u},null),__d("resolveWindow",[],function(t,e,i,n,r,o){function s(t){var e=window,i=t.split(".");try{for(var n=0;n<i.length;n++){var r=i[n],o=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(r);if(o)e=e.frames[o[1]];else{if("opener"!==r&&"parent"!==r&&"top"!==r)return null;e=e[r]}}}catch(s){return null}return e}r.exports=s},null),__d("XD",["Arbiter","DOM","DOMDimensions","Log","PHPQuerySerializer","URI","Queue","isFacebookURI","isInIframe","resolveWindow"],function(t,e,i,n,r,o){var s="fb_xdm_frame_"+location.protocol.replace(":",""),u={_callbacks:[],_opts:{autoResize:!1,allowShrink:!0,channelUrl:null,hideOverflow:!1,resizeTimeout:1e3,resizeWidth:!1,expectResizeAck:!1,resizeAckTimeout:6e3},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,_shrinker:null,init:function(t){this._opts=babelHelpers["extends"]({},this._opts,t),this._opts.autoResize&&this._startResizeMonitor(),e("Arbiter").subscribe("Connect.Unsafe.resize.ack",function(t,e){e.id||(e.id=this._resizeCount),e.id>this._lastResizeAckId&&(this._lastResizeAckId=e.id)}.bind(this))},getQueue:function(){return this._queue||(this._queue=new(e("Queue"))),this._queue},setChannelUrl:function(t){this.getQueue().start(function(e){return this.send(e,t)}.bind(this))},send:function(t,i){if(i=i||this._opts.channelUrl,!i)return void this.getQueue().enqueue(t);var n={},r=new(e("URI"))(i);Object.assign(n,t,e("PHPQuerySerializer").deserialize(r.getFragment()));var o=new(e("URI"))(n.origin).getOrigin(),u=e("resolveWindow")(n.relation.replace(/^parent\./,"")),a=50,l=function c(){var t=u.frames[s];try{t.proxyMessage(e("PHPQuerySerializer").serialize(n),o)}catch(i){--a?setTimeout(c,100):e("Log").warn('No such frame "'+s+'" to proxyMessage to')}};l()},_computeSize:function(){var t=e("DOMDimensions").getDocumentDimensions(),i=0;if(this._opts.resizeWidth){var n=document.body;if(n.clientWidth<n.scrollWidth)i=t.width;else for(var r=n.childNodes,o=0;o<r.length;o++){var s=r[o],a=s.offsetLeft+s.offsetWidth;a>i&&(i=a)}i=Math.max(i,u.forced_min_width)}return t.width=i,this._opts.allowShrink&&(this._shrinker||(this._shrinker=e("DOM").create("div")),e("DOM").appendContent(document.body,this._shrinker),t.height=Math.max(this._shrinker.offsetTop,0)),t},_startResizeMonitor:function(){var t,i=document.documentElement;this._opts.hideOverflow&&(i.style.overflow="hidden",document.body.style.overflow="hidden");var n=function(){var i=this._computeSize(),n=Date.now(),r=this._lastResizeAckId<this._resizeCount&&n-this._resizeTimestamp>this._opts.resizeAckTimeout;if(!t||this._opts.expectResizeAck&&r||this._opts.allowShrink&&t.width!=i.width||!this._opts.allowShrink&&t.width<i.width||this._opts.allowShrink&&t.height!=i.height||!this._opts.allowShrink&&t.height<i.height){t=i,this._resizeCount++,this._resizeTimestamp=n;var o={type:"resize",height:i.height,ackData:{id:this._resizeCount}};i.width&&0!=i.width&&(o.width=i.width);try{if(e("isFacebookURI")(new(e("URI"))(document.referrer))&&e("isInIframe")()&&window.name&&window.parent.location&&window.parent.location.toString&&e("isFacebookURI")(new(e("URI"))(window.parent.location)))for(var s=window.parent.document.getElementsByTagName("iframe"),u=0;u<s.length;u+=1)s[u].name==window.name&&(this._opts.resizeWidth&&(s[u].style.width=o.width+"px"),s[u].style.height=o.height+"px");this.send(o)}catch(a){this.send(o)}}}.bind(this);n(),setInterval(n,this._opts.resizeTimeout)}},a=babelHelpers["extends"]({},u);r.exports.UnverifiedXD=a,r.exports.XD=u,t.UnverifiedXD=a,t.XD=u},null),__d("Plugin",["Arbiter","ArbiterFrame"],function(t,e,i,n,r,o){var s={CONNECT:"platform/plugins/connect",DISCONNECT:"platform/plugins/disconnect",ERROR:"platform/plugins/error",RELOAD:"platform/plugins/reload",DIALOG:"platform/plugins/dialog",connect:function(t,i){var n={identifier:t,href:t,story_fbid:i};e("Arbiter").inform(s.CONNECT,n),e("ArbiterFrame").inform(s.CONNECT,n)},disconnect:function(t,i){var n={identifier:t,href:t,story_fbid:i};e("Arbiter").inform(s.DISCONNECT,n),e("ArbiterFrame").inform(s.DISCONNECT,n)},error:function(t,i){e("Arbiter").inform(s.ERROR,{action:t,content:i})},reload:function(t){e("Arbiter").inform(s.RELOAD,{reloadUrl:t||""}),e("ArbiterFrame").inform(s.RELOAD,{reloadUrl:t||""})},reloadOtherPlugins:function(t,i){e("ArbiterFrame").inform(s.RELOAD,{reloadUrl:"",reload:t||"",identifier:i||""})}};r.exports=s},null),__d("PluginCSSReflowHack",["Style"],function(t,e,i,n,r,o){var s={trigger:function(t){setTimeout(function(){var i="border-bottom-width",n=e("Style").get(t,i);e("Style").set(t,i,parseInt(n,10)+1+"px");var r=t.offsetHeight;return e("Style").set(t,i,n),r},1e3)}};r.exports=s},null),__d("StrSet",[],function(t,e,i,n,r,o){function s(t){"use strict";this.$StrSet2={},this.$StrSet1=0,t&&this.addAll(t)}s.prototype.add=function(t){"use strict";return this.$StrSet2.hasOwnProperty(t)||(this.$StrSet2[t]=!0,this.$StrSet1++),this},s.prototype.addAll=function(t){"use strict";return t.forEach(this.add,this),this},s.prototype.remove=function(t){"use strict";return this.$StrSet2.hasOwnProperty(t)&&(delete this.$StrSet2[t],this.$StrSet1--),this},s.prototype.removeAll=function(t){"use strict";return t.forEach(this.remove,this),this},s.prototype.toArray=function(){"use strict";return Object.keys(this.$StrSet2)},s.prototype.toMap=function(t){"use strict";var e={};return Object.keys(this.$StrSet2).forEach(function(i){e[i]="function"==typeof t?t(i):t||!0}),e},s.prototype.contains=function(t){"use strict";return this.$StrSet2.hasOwnProperty(t)},s.prototype.count=function(){"use strict";return this.$StrSet1},s.prototype.clear=function(){"use strict";return this.$StrSet2={},this.$StrSet1=0,this},s.prototype.clone=function(){"use strict";return new s(this)},s.prototype.forEach=function(t,e){"use strict";Object.keys(this.$StrSet2).forEach(t,e)},s.prototype.map=function(t,e){"use strict";return Object.keys(this.$StrSet2).map(t,e)},s.prototype.some=function(t,e){"use strict";return Object.keys(this.$StrSet2).some(t,e)},s.prototype.every=function(t,e){"use strict";return Object.keys(this.$StrSet2).every(t,e)},s.prototype.filter=function(t,e){"use strict";return new s(Object.keys(this.$StrSet2).filter(t,e))},s.prototype.union=function(t){"use strict";return this.clone().addAll(t)},s.prototype.intersect=function(t){"use strict";return this.filter(function(e){return t.contains(e)})},s.prototype.difference=function(t){"use strict";return t.filter(function(t){return!this.contains(t)}.bind(this))},s.prototype.equals=function(t){"use strict";var e=function(t,e){return t===e?0:t<e?-1:1},i=this.toArray(),n=t.toArray();if(i.length!==n.length)return!1;var r=i.length;for(i=i.sort(e),n=n.sort(e);r--;)if(i[r]!==n[r])return!1;return!0},r.exports=s},null),__d("PlatformBaseVersioning",["invariant","PlatformVersions","getObjectValues","StrSet"],function(t,e,i,n,r,o,s){function u(t,i){return i==e("PlatformVersions").versions.UNVERSIONED?t:(l.contains(i)||s(0),0!==t.indexOf("/")&&(t="/"+t),"/"+i+t)}function a(t){return l.contains(t.substring(1,t.indexOf("/",1)))?t.substring(t.indexOf("/",1)):t}var l=new(e("StrSet"))(e("getObjectValues")(e("PlatformVersions").versions)),c=location.pathname,h=c.substring(1,c.indexOf("/",1)),d=l.contains(h)?h:e("PlatformVersions").versions.UNVERSIONED,g={addVersionToPath:u,getLatestVersion:function(){return e("PlatformVersions").LATEST},versionAwareURI:function(t){return t.setPath(u(t.getPath(),d))},versionAwarePath:function(t){return u(t,d)},getUnversionedPath:a};r.exports=g},null),__d("PlatformWidgetEndpoint",["PlatformBaseVersioning"],function(t,e,i,n,r,o){function s(t,i){return e("PlatformBaseVersioning").versionAwarePath("/dialog/"+t+(i?"/"+i:""))}function u(t,i){return e("PlatformBaseVersioning").versionAwarePath("/plugins/"+t+(i?"/"+i:""))}function a(t){return/^\/plugins\//.test(e("PlatformBaseVersioning").getUnversionedPath(t))}function l(t){return/^\/dialog\//.test(e("PlatformBaseVersioning").getUnversionedPath(t))}var c={dialog:s,plugins:u,isPluginEndpoint:a,isDialogEndpoint:l};r.exports=c},null),__d("PluginFlyout",["csx","Arbiter","Button","CSS","DOM","DOMEvent","DOMEventListener","Focus","FormSubmit","Plugin","TextAreaControl"],function(t,e,i,n,r,o,s){function u(t,i,n){var r=this,o=l(e("Plugin").CONNECT,function(s,u){e("Arbiter").unsubscribe(o),r.init(t,i,n),r.connect(s,u)},a);l(e("Plugin").DIALOG,function(){r.init(t,i,n),r.toggle()},a)}var a=e("Arbiter").SUBSCRIBE_NEW,l=e("Arbiter").subscribe,c=e("Arbiter").inform,h=function(t,i){return e("DOMEventListener").add(t,"click",i)};Object.assign(u.prototype,{init:function(t,i,n){if(!this.initialized){this.initialized=!0,e("DOM").appendContent(t,JSON.parse(n));var r=e("DOM").find(t,"form"),o=e("DOM").find(r,"._56zw"),s=e("DOM").find(r,"._56zx"),c=e("DOM").find(r,"._42x4"),d=e("TextAreaControl").getInstance(c);e("DOMEventListener").add(c,"keyup",function(t){e("Button").setEnabled(o,!!d.getValue())}),e("DOMEventListener").add(window,"keydown",function(t){27===t.keyCode&&p()}),e("DOMEventListener").add(r,"submit",function(t){new(e("DOMEvent"))(t).kill(),e("FormSubmit").send(r)});var g="tiny"===i?e("DOM").find(document.body,".pluginPostFlyoutPrompt"):null;this.flyout=t,this.form=r,this.post_button=o,this.prompt=g;var p=this.hide.bind(this),f=this.show.bind(this);h(s,function(t){new(e("DOMEvent"))(t).kill(),p()}),g&&h(g,function(t){new(e("DOMEvent"))(t).kill(),f()}),l(e("Plugin").CONNECT,this.connect.bind(this),a),l(e("Plugin").DISCONNECT,function(){p()},a),l(u.SUCCESS,function(){p(),g&&e("CSS").hide(g)},a),l(e("Plugin").ERROR,function(t,i){"comment"===i.action&&(e("DOM").setContent(e("DOM").find(r,"._56zy"),i.content),e("CSS").hide(o))},a)}},connect:function(t,i){i.crossFrame||(this.prompt&&e("CSS").show(this.prompt),i.story_fbid||this.show())},show:function(){this.shown=!0,e("CSS").show(this.flyout),e("CSS").show(this.post_button);var t=e("DOM").scry(this.form,"._5jjo");t?e("Focus").set(t[0]):e("Focus").set(this.form.comment),c(u.SHOW)},hide:function(){this.shown=!1,e("CSS").hide(this.flyout),c(u.HIDE)},toggle:function(){this.shown?this.hide():this.show()}}),Object.assign(u,{SUCCESS:"platform/plugins/flyout/success",SHOW:"platform/plugins/flyout/show",HIDE:"platform/plugins/flyout/hide",success:function(){c(u.SUCCESS)}}),r.exports=u},null),__d("PluginMessage",["DOMEventListener"],function(t,e,i,n,r,o){var s={listen:function(){e("DOMEventListener").add(window,"message",function(t){if(/\.facebook\.com$/.test(t.origin)&&/^FB_POPUP:/.test(t.data)){var e=JSON.parse(t.data.substring(9));"reload"in e&&/^https?:/.test(e.reload)&&document.location.replace(e.reload)}})}};r.exports=s},null),__d("PluginOptin",["DOMEvent","DOMEventListener","PluginMessage","PopupWindow","URI","UserAgent_DEPRECATED","PlatformWidgetEndpoint","PluginLoggedOutUserTypedLogger"],function(t,e,i,n,r,o){function s(t,i){Object.assign(this,{return_params:e("URI").getRequestURI().getQueryData(),login_params:{},optin_params:{},plugin:t,api_key:i}),this.addReturnParams({ret:"optin"}),this.login_params.nux=!1,delete this.return_params.hash}Object.assign(s.prototype,{addReturnParams:function(t){return Object.assign(this.return_params,t),this},addLoginParams:function(t){return Object.assign(this.login_params,t),this},addOptinParams:function(t){return Object.assign(this.optin_params,t),this},start:function(){var t=this.api_key||0x7432769dc3ea,i=new(e("URI"))(e("PlatformWidgetEndpoint").dialog("plugin.optin")).addQueryData(this.optin_params).addQueryData({app_id:t,secure:e("URI").getRequestURI().isSecure(),social_plugin:this.plugin,return_params:JSON.stringify(this.return_params),login_params:JSON.stringify(this.login_params)});return e("UserAgent_DEPRECATED").mobile()?i.setSubdomain("m"):i.addQueryData({display:"popup"}),null!==this.return_params.act&&"send"===this.return_params.act&&(new(e("PluginLoggedOutUserTypedLogger"))).setPluginAppID(t).setPluginName(this.return_params.act).setHref(this.return_params.href).logVital(),this.popup=e("PopupWindow").open(i.toString(),420,450),e("PluginMessage").listen(),this}}),s.starter=function(t,e,i,n){var r=new s(t);return r.addReturnParams(e||{}),r.addLoginParams(i||{}),r.addOptinParams(n||{}),r.start.bind(r)},s.listen=function(t,i,n,r,o){e("DOMEventListener").add(t,"click",function(t){new(e("DOMEvent"))(t).kill(),s.starter(i,n,r,o)()})},r.exports=s},null),__d("PluginConnectButton",["csx","cx","Arbiter","CSS","DOM","DOMDimensions","DOMEvent","DOMEventListener","Focus","FormSubmit","PlatformWidgetEndpoint","Plugin","PluginConnectButtonType","PluginFlyout","PluginOptin","Style","URI","getElementPosition"],function(t,e,i,n,r,o,s,u){function a(t){this.config=t,this.busy=!1;var i=e("DOM").find(t.form,".pluginConnectButton");this.buttons=i,this.node_connected=e("DOM").find(i,".pluginConnectButtonConnected"),this.node_disconnected=e("DOM").find(i,".pluginConnectButtonDisconnected");var n=function(t){new(e("DOMEvent"))(t).kill(),this.busy||(this.submit(),this.busy=this.canpersonalize)}.bind(this);h(this.node_disconnected,n),t.buttontype===e("PluginConnectButtonType").BLUE_BASE?h(e("DOM").find(i,".pluginButtonX button"),n):t.buttontype===e("PluginConnectButtonType").WHITE_BASE&&h(this.node_connected,n),h(this.node_connected,function(t){return e("Arbiter").inform(e("Plugin").DIALOG,t)});var r=this.update.bind(this);c(e("Plugin").CONNECT,r,l),c(e("Plugin").DISCONNECT,r,l),c(e("Plugin").ERROR,this.error.bind(this),l),c("Connect.Unsafe.xd/reposition",this.flip.bind(this)),c(e("PluginFlyout").HIDE,this.hideFlyout.bind(this)),t.autosubmit&&setTimeout(this.submit.bind(this),0)}var l=e("Arbiter").SUBSCRIBE_NEW,c=e("Arbiter").subscribe,h=function(t,i){return e("DOMEventListener").add(t,"click",i)};Object.assign(a.prototype,{update:function(t,i){this.busy=!1;var n=this.config;if(i.identifier===n.identifier){var r=t===e("Plugin").CONNECT,o=e("PlatformWidgetEndpoint").plugins(n.plugin);o+="/"+(r?"disconnect":"connect"),e("CSS")[r?"show":"hide"](this.node_connected),e("CSS")[r?"hide":"show"](this.node_disconnected);try{if("button"===document.activeElement.nodeName.toLowerCase()){var s=r?this.node_connected:this.node_disconnected,u=e("DOM").find(s,"button");u.disabled=!1,e("Focus").set(u)}}catch(a){}n.connected=r,n.form.setAttribute("action",o),n.form.setAttribute("ajaxify",o)}},error:function(t,i){if(this.busy=!1,i.action in{connect:1,disconnect:1}){e("DOM").setContent(this.buttons,i.content);var n=e("DOM").scry(this.buttons,".confirmButton");1===n.length&&e("Focus").set(n[0])}},submit:function(){return this.config.canpersonalize?(e("FormSubmit").send(this.config.form),void this.fireStateToggle()):this.login()},fireStateToggle:function(){var t=this.config;t.connected?e("Plugin").disconnect(t.identifier):e("Plugin").connect(t.identifier)},login:function(){var t=this.config.plugin;new(e("PluginOptin"))(t,e("URI").getRequestURI().getQueryData().api_key).addReturnParams({act:"connect"}).addLoginParams({social_plugin_action:this.config.pluginaction}).start()},flip:function(t,i){var n=e("DOM").scry(document.body,"._4xn8");if(0!==n.length){n=n[0];var r,o=e("DOM").scry(this.config.form,".pluginConnectButtonConnected .pluginButtonIcon"),s="none"!==e("Style").get(o[0],"display")?o[0]:o[1],u=e("DOM").find(document.body,".pluginConnectButtonLayoutRoot");"reposition"===i.type?(e("CSS").addClass(u,"_1f8a"),e("Style").set(u,"padding-left",450-u.offsetWidth+"px"),e("CSS").removeClass(u,"_1f8b"),r=e("getElementPosition")(s).x+e("DOMDimensions").getElementDimensions(s).width/2-6):(e("CSS").addClass(u,"_1f8b"),e("Style").set(u,"padding-left","0px"),e("CSS").removeClass(u,"_1f8a"),r=6),e("Style").set(n,"left",r+"px")}},hideFlyout:function(){e("Focus").set(this.connected?this.node_disconnected:this.node_connected)}}),r.exports=a},null),__d("UnverifiedXD",["XD"],function(t,e,i,n,r,o){var s=e("XD").UnverifiedXD;r.exports=s},null),__d("PluginResize",["Locale","Log","UnverifiedXD","getOffsetParent","getStyleProperty"],function(t,e,i,n,r,o){function s(t){t=t||document.body;var i=0,n=e("getOffsetParent")(t);return e("Locale").isRTL()&&n?i=n.offsetWidth-t.offsetLeft-t.offsetWidth:e("Locale").isRTL()||(i=t.offsetLeft),u(t)+i}function u(t){return Math.ceil(parseFloat(e("getStyleProperty")(t,"width")))||t.offsetWidth}function a(t){return t=t||document.body,t.offsetHeight+t.offsetTop}function l(t,e,i,n){this.calcWidth=t||s,this.calcHeight=e||a,this.width=void 0,this.height=void 0,this.reposition=!!n,this.event=i||"resize"}Object.assign(l.prototype,{resize:function(){var t=this.calcWidth(),i=this.calcHeight();return t===this.width&&i===this.height||(e("Log").debug("Resizing Plugin: (%s, %s, %s, %s)",t,i,this.event,this.reposition),this.width=t,this.height=i,e("UnverifiedXD").send({type:this.event,width:t,height:i,reposition:this.reposition})),this},auto:function(t){return setInterval(this.resize.bind(this),t||250),this}}),l.auto=function(t,e,i){return new l(s.bind(null,t),a.bind(null,t),e).resize().auto(i)},l.autoHeight=function(t,e,i,n){return new l(function(){return t},a.bind(null,e),i).resize().auto(n)},l.getElementWidth=u,r.exports=l},null),__d("PluginConnectButtonResize",["DOMDimensions","DOMQuery","PluginResize","Style","getElementPosition"],function(t,e,i,n,r,o){function s(t,i,n){function r(){var t=e("DOMQuery").scry(document.body,".uiTypeaheadView")[0];if(!t)return{x:0,y:0};var i=e("getElementPosition")(t),n=e("DOMDimensions").getElementDimensions(t);return{x:i.x+n.width,y:i.y+n.height}}n&&e("Style").set(t,"width",n+"px"),e("PluginResize").auto(t,"resize.flow"),new(e("PluginResize"))(function(){return Math.max(e("PluginResize").getElementWidth(t),i&&i.offsetWidth,r().x)},function(){return Math.max(t.offsetHeight,i?i.offsetHeight+i.offsetTop:0,r().y)},"resize.iframe",(!0)).resize().auto()}r.exports=s},null),__d("PluginConnection",["Arbiter","CSS","Plugin"],function(t,e,i,n,r,o){var s=function(){};Object.assign(s.prototype,{init:function(t,i,n,r){return r=r||e("Plugin").CONNECT,this.identifier=t,this.element=i,this.css=n,e("Arbiter").subscribe([e("Plugin").CONNECT,e("Plugin").DISCONNECT],function(o,s){return t===s.href&&e("CSS")[o===r?"addClass":"removeClass"](i,n),!0}),this},connected:function(){return e("CSS").hasClass(this.element,this.css)},connect:function(){return e("Arbiter").inform(e("Plugin").CONNECT,{href:this.identifier},e("Arbiter").BEHAVIOR_STATE)},disconnect:function(){return e("Arbiter").inform(e("Plugin").DISCONNECT,{href:this.identifier},e("Arbiter").BEHAVIOR_STATE)},toggle:function(){return this.connected()?this.disconnect():this.connect()}}),s.init=function(t){for(var e,i=0;i<t.length;i++)e=new s,e.init.apply(e,t[i])},r.exports=s},null),__d("PluginPageActionLogger",["BanzaiLogger","BanzaiODS","DOM","Event","PagePluginActions","PagePluginActionTypes"],function(t,e,i,n,r,o){var s={initializeClickLoggers:function(t,i,n,r,o,s,u,a,l,c){var h=function(o,s){try{var u=e("DOM").find(r,"."+o);e("Event").listen(u,"click",function(r){e("BanzaiODS").bumpEntityKey("platform_www","platform.plugin.page.action"),e("BanzaiLogger").log("PagePluginActionsLoggerConfig",{page_id:i,page_plugin_action:s,page_plugin_action_type:e("PagePluginActionTypes").CLICK,referer_url:n,is_sdk:t})})}catch(a){}};h(o,e("PagePluginActions").PAGE_LIKE),h(s,e("PagePluginActions").PAGE_UNLIKE),h(u,e("PagePluginActions").PAGE_AVATAR),h(a,e("PagePluginActions").PAGE_PERMALINK),h(l,e("PagePluginActions").PAGE_SHARE),h(c,e("PagePluginActions").PAGE_CTA)}};r.exports=s},null),__d("PluginReturn",["invariant","Arbiter","Log","PlatformDialog","Plugin","URI","PlatformWidgetEndpoint"],function(t,e,i,n,r,o,s){
e("Arbiter").subscribe(e("PlatformDialog").RESPONSE,function(t,i){return i.error_code?void e("Log").debug("Plugin Return Error (%s): %s",i.error_code,i.error_message||i.error_description):void e("Plugin").reload(i.plugin_reload)});var u={auto:function(){e("Arbiter").subscribe(e("Plugin").RELOAD,function(t,e){var i="object"==typeof e?e.reloadUrl:e;u.reload(i)})},syncPlugins:function(){e("Arbiter").subscribe(e("Plugin").RELOAD,function(t,e){e.crossFrame&&u.reload(e.reloadUrl,e.reload,e.identifier)})},reload:function a(t,a,i){var n=e("URI").getRequestURI().removeQueryData("ret").removeQueryData("act").removeQueryData("hash").addQueryData("reload",a).addQueryData("id",i);if(t){var a=new(e("URI"))(t);e("PlatformWidgetEndpoint").isPluginEndpoint(a.getPath())||s(0),n.setPath(a.getPath()).addQueryData(a.getQueryData())}window.location.replace(n.toString())}};r.exports=u},null),__d("XSharePluginLoggingController",["XController"],function(t,e,i,n,r,o){r.exports=e("XController").create("/platform/plugin/share/logging/",{})},null),__d("PluginShareActions",["AsyncRequest","Event","UnverifiedXD","PluginShareLogTypes","XSharePluginLoggingController"],function(t,e,i,n,r,o){"use strict";var s={init:function(t,i,n,r,o,s,u){e("Event").listen(o,"click",function(o){(new(e("AsyncRequest"))).setURI(e("XSharePluginLoggingController").getURIBuilder().getURI()).setData({app_id:s,href:t,layout:i,event:e("PluginShareLogTypes").CLICK,has_iframe:n,referer_url:r,new_ui:u}).send()})},triggerMobileIframe:function(t,i){e("Event").listen(i,"click",function(i){e("UnverifiedXD").send({type:"shareTriggerMobileIframe",data:JSON.stringify({href:t})})})}};r.exports=s},null),__d("PluginXDReady",["Arbiter","UnverifiedXD"],function(t,e,i,n,r,o){var s={handleMessage:function(t){if(t.method)try{e("Arbiter").inform("Connect.Unsafe."+t.method,JSON.parse(t.params),e("Arbiter").BEHAVIOR_PERSISTENT)}catch(i){}}};t.XdArbiter=s,e("UnverifiedXD").send({xd_action:"plugin_ready",name:window.name}),r.exports=null},null);
//# sourceMappingURL=maps/gV8VMvIotf7.js.map
