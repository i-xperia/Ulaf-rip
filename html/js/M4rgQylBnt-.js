self.CavalryLogger&&CavalryLogger.start_js(["PzB8H"]),__d("VideoPlayerStreamSwitchReasons",[],function(e,t,i,r,a,n){a.exports={BANDWIDTH:"bandwidth",FORCED:"forced",LOW_BUFFER_AVAILABILITY:"low_buffer_availability",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"}},null),__d("VideoQualityClassInternal",[],function(e,t,i,r,a,n){a.exports={orderedValues:["sd","hd","uhd"]}},null),__d("VideoPlayerShakaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(e,t,i,r,a,n){"use strict";function s(){this.clear()}s.prototype.log=function(){t("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,t("Banzai").BASIC)},s.prototype.logVital=function(){t("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,t("Banzai").VITAL)},s.prototype.clear=function(){return this.$VideoPlayerShakaPerformanceTypedLogger1={},this},s.prototype.updateData=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerShakaPerformanceTypedLogger1,e),this},s.prototype.setAccessToken=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=e,this},s.prototype.setAdditionalBufferedRanges=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.additional_buffered_ranges=e,this},s.prototype.setClientTimeBegin=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=e,this},s.prototype.setClientTimeEnd=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=e,this},s.prototype.setCode=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.code=e,this},s.prototype.setError=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.error=e,this},s.prototype.setEvent=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.event=e,this},s.prototype.setIsLive=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=e,this},s.prototype.setLastBufferedEnd=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_end=e,this},s.prototype.setLastBufferedStart=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_start=e,this},s.prototype.setLastPlayingEventTime=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.last_playing_event_time=e,this},s.prototype.setLength=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.length=e,this},s.prototype.setParentID=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.parent_id=e,this},s.prototype.setPlayhead=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.playhead=e,this},s.prototype.setPushed=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=e,this},s.prototype.setRepresentationID=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.representation_id=e,this},s.prototype.setResource=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.resource=e,this},s.prototype.setResult=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.result=e,this},s.prototype.setSequentialID=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.sequential_id=e,this},s.prototype.setSession=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.session=e,this},s.prototype.setState=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.state=e,this},s.prototype.setStreamSwitchReason=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.stream_switch_reason=e,this},s.prototype.setTimeToFirstByte=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_first_byte=e,this},s.prototype.setTimeToLastByte=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_last_byte=e,this},s.prototype.setTimeToRequestStart=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_start=e,this},s.prototype.setVC=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.vc=e,this},s.prototype.setVideoID=function(e){return this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=e,this};a.exports=s},null),__d("TaggedTimeRanges",["sprintf"],function(e,t,i,r,a,n){function s(e){"use strict";this.$TaggedTimeRanges1=[],this.$TaggedTimeRanges2=0,this.$TaggedTimeRanges3=0,this.$TaggedTimeRanges4=e?e:function(e,t){return e===t}}s.prototype.add=function(e,t,i){"use strict";if(!(t<e)&&t!==e){if(0===this.$TaggedTimeRanges1.length)return void this.$TaggedTimeRanges1.push({start:e,end:t,tag:i});for(var r=0,a=0,n=0;n<this.$TaggedTimeRanges1.length&&(e>=this.$TaggedTimeRanges1[n].start&&(r=n+1),t<=this.$TaggedTimeRanges1[n].end&&(a=n),!(t<this.$TaggedTimeRanges1[n].start));n++);this.$TaggedTimeRanges1.splice(r,a-r,{start:e,end:t,tag:i}),this.$TaggedTimeRanges5(r)}},s.prototype.$TaggedTimeRanges5=function(e){"use strict";var t=this.$TaggedTimeRanges1[e],i=null;0!==e&&(i=this.$TaggedTimeRanges1[e-1]),null!==i&&(this.$TaggedTimeRanges4(i.tag,t.tag)?i.end>=t.start&&(this.$TaggedTimeRanges1.splice(e-1,2,{start:i.start,end:Math.max(t.end,i.end),tag:t.tag}),e--):(i.end>=t.start&&this.$TaggedTimeRanges1.splice(e-1,1,{start:i.start,end:t.start,tag:i.tag}),i.end>t.end&&this.$TaggedTimeRanges1.splice(e+1,0,{start:t.end,end:i.end,tag:i.tag})));var r=null;e!==this.$TaggedTimeRanges1.length-1&&(r=this.$TaggedTimeRanges1[e+1]),r&&(this.$TaggedTimeRanges4(r.tag,t.tag)?r.start<=t.end&&this.$TaggedTimeRanges1.splice(e,2,{start:t.start,end:Math.max(r.end,t.end),tag:t.tag}):r.start<=t.end&&(r.end<t.end?(this.$TaggedTimeRanges1.splice(e,1,{start:t.start,end:r.start,tag:t.tag}),this.$TaggedTimeRanges1.push({start:r.end,end:t.end,tag:t.tag})):this.$TaggedTimeRanges1.splice(e+1,1,{start:t.end,end:r.end,tag:r.tag})))},s.prototype.get=function(e){"use strict";for(var t=e>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,i=null,r=t;r<this.$TaggedTimeRanges1.length;r++)if(this.$TaggedTimeRanges1[r].start<=e&&e<this.$TaggedTimeRanges1[r].end){i=r;break}return this.$TaggedTimeRanges2=null===i?0:i,this.$TaggedTimeRanges3=e,null===i?null:this.$TaggedTimeRanges1[i].tag},s.prototype.getLength=function(){"use strict";return this.$TaggedTimeRanges1.length},a.exports=s},null),__d("dispatchCustomEvent",[],function(e,t,i,r,a,n){function s(t,i,r){var a=void 0;"function"==typeof e.CustomEvent?a=new e.CustomEvent(i,{detail:r}):(a=e.document.createEvent("CustomEvent"),a.initCustomEvent(i,!0,!0,r)),t.dispatchEvent(a)}a.exports=s},null),__d("dispatchEvent",[],function(e,t,i,r,a,n){function s(t,i){var r;"function"==typeof e.Event?r=new e.Event(i):(r=e.document.createEvent("Event"),r.initEvent(i,!0,!0)),t.dispatchEvent(r)}a.exports=s},null),__d("VideoPlayerResourceTimer",[],function(e,t,i,r,a,n){"use strict";var s={getResourceTimingEntry:function(e,t,i){var r;if(performance.getEntriesByType){var r=function(){var r=performance.getEntriesByName(e,"resource"),a=[];if(r.forEach(function(e){"number"==typeof e.responseEnd&&"number"==typeof e.responseStart&&"number"==typeof e.requestStart&&"number"==typeof e.connectEnd&&"number"==typeof e.connectStart&&"number"==typeof e.domainLookupEnd&&"number"==typeof e.domainLookupStart&&e.responseEnd<=i&&e.startTime>=t&&a.push({entry:{timeToFirstByte:e.responseStart-e.startTime,timeToLastByte:e.responseEnd-e.startTime,timeToRequestStart:e.requestStart-e.startTime,timeToConectionEnd:e.connectEnd-e.startTime,timeToConnectionStart:e.connectStart-e.startTime,timeToDomainLookupEnd:e.domainLookupEnd-e.startTime,timeToDomainLookupStart:e.domainLookupStart-e.startTime},sort:e.responseEnd})}),a.sort(function(e,t){return t.sort-e.sort}),a.length)return{v:a[0].entry}}();if("object"==typeof r)return r.v}return null}};a.exports=s},null),__d("VideoPlayerArtilleryOperationMarker",[],function(e,t,i,r,a,n){"use strict";function s(e,t,i,r){this.$VideoPlayerArtilleryOperationMarker2=e,this.$VideoPlayerArtilleryOperationMarker3=t,this.$VideoPlayerArtilleryOperationMarker4=i,this.$VideoPlayerArtilleryOperationMarker5=r,this.$VideoPlayerArtilleryOperationMarker6=!1}s.prototype.markOperationStart=function(){return this.$VideoPlayerArtilleryOperationMarker7("Starting")},s.prototype.markOperationEnd=function(){return this.$VideoPlayerArtilleryOperationMarker7("Ending")},s.prototype.$VideoPlayerArtilleryOperationMarker7=function(e){var t=this.$VideoPlayerArtilleryOperationMarker4();return t&&t.inform(e+" "+this.$VideoPlayerArtilleryOperationMarker2+" #"+this.$VideoPlayerArtilleryOperationMarker3,{pointGroup:this.$VideoPlayerArtilleryOperationMarker5.getGroupName(this.$VideoPlayerArtilleryOperationMarker2,this.$VideoPlayerArtilleryOperationMarker1),isPointOfInterest:!0,type:null}).addStringAnnotation("resource",this.$VideoPlayerArtilleryOperationMarker1||"").addStringAnnotation("wasPrefetchCacheHit",this.$VideoPlayerArtilleryOperationMarker6.toString()),this},s.prototype.setResource=function(e){return this.$VideoPlayerArtilleryOperationMarker1=e,this},s.prototype.setWasPrefetchCacheHit=function(e){return this.$VideoPlayerArtilleryOperationMarker6=e,this},a.exports=s},null),__d("VideoPlayerArtilleryPointGrouper",["Map"],function(e,t,i,r,a,n){function s(){"use strict";this.$VideoPlayerArtilleryPointGrouper1=new(t("Map")),this.$VideoPlayerArtilleryPointGrouper2=new(t("Map"))}s.prototype.getGroupName=function(e,t){"use strict";if(!t){switch(e){case"start_streams":e="source_attach"}return e}var i=this.$VideoPlayerArtilleryPointGrouper1.get(t);if(i)return i;var r=void 0;if(t.indexOf("-init.m4v")!==-1)r="-init.m4v";else if(t.indexOf("-init.m4a")!==-1)r="-init.m4a";else{if(t.indexOf(".mpd")!==-1)return"source_load";r=t.indexOf(".m4v")!==-1?".m4v":t.indexOf(".m4a")!==-1?".m4a":"unknown"}var a=this.$VideoPlayerArtilleryPointGrouper2.get(r)+1||1;return this.$VideoPlayerArtilleryPointGrouper2.set(r,a),i=r+" #"+a,this.$VideoPlayerArtilleryPointGrouper1.set(t,i),i},a.exports=s},null),__d("VideoPlayerArtilleryTrace",["TimeSliceInteraction","UserAgentData","VideoPlayerArtilleryOperationMarker","VideoPlayerArtilleryPointGrouper"],function(e,t,i,r,a,n){"use strict";function s(e,i){this.$VideoPlayerArtilleryTrace13=function(){var e=this.$VideoPlayerArtilleryTrace2;if(e){var t=e.stallTrace,i=e.hasStalls,r=e.stallTraceTimeout;i?t.finish():t.disable(),clearTimeout(r)}this.$VideoPlayerArtilleryTrace2=null}.bind(this),this.$VideoPlayerArtilleryTrace17=function(){return this.$VideoPlayerArtilleryTrace1}.bind(this),this.$VideoPlayerArtilleryTrace18=function(){var e=this.$VideoPlayerArtilleryTrace2;return e?e.stallTrace:null}.bind(this),this.$VideoPlayerArtilleryTrace4=i.videoID,this.$VideoPlayerArtilleryTrace5=i.video,this.$VideoPlayerArtilleryTrace6=e,this.$VideoPlayerArtilleryTrace7=i.isLive,this.$VideoPlayerArtilleryTrace9=i.playerOrigin,this.$VideoPlayerArtilleryTrace10=i.playerSuborigin,this.$VideoPlayerArtilleryTrace8=0,this.$VideoPlayerArtilleryTrace11=new(t("VideoPlayerArtilleryPointGrouper"))}var o=3e4,h=3e3;s.prototype.updateBufferAhead=function(e){var i=this.$VideoPlayerArtilleryTrace2;!i&&e<=h?this.$VideoPlayerArtilleryTrace2={stallTrace:this.$VideoPlayerArtilleryTrace12(t("TimeSliceInteraction").create("video_stall")),hasStalls:!1,stallTraceTimeout:setTimeout(this.$VideoPlayerArtilleryTrace13,o)}:e>h&&this.$VideoPlayerArtilleryTrace13()},s.prototype.enterState=function(e){switch(e){case"loading":this.$VideoPlayerArtilleryTrace14();break;case"playing":this.$VideoPlayerArtilleryTrace15();break;default:this.$VideoPlayerArtilleryTrace16(e)}return this},s.prototype.$VideoPlayerArtilleryTrace16=function(e){var t=this.$VideoPlayerArtilleryTrace1;t&&t.inform("State: "+e)},s.prototype.getMarkers=function(e){var i=[],r=(++this.$VideoPlayerArtilleryTrace8).toString();this.$VideoPlayerArtilleryTrace1&&i.push(new(t("VideoPlayerArtilleryOperationMarker"))(e,r,this.$VideoPlayerArtilleryTrace17,this.$VideoPlayerArtilleryTrace11));var a=this.$VideoPlayerArtilleryTrace2;return a&&("buffering"===e&&(a.hasStalls=!0),i.push(new(t("VideoPlayerArtilleryOperationMarker"))(e,r,this.$VideoPlayerArtilleryTrace18,this.$VideoPlayerArtilleryTrace11))),i},s.prototype.$VideoPlayerArtilleryTrace14=function(){var e=this.$VideoPlayerArtilleryTrace12(t("TimeSliceInteraction").create("video_psr"));this.$VideoPlayerArtilleryTrace1=e,this.$VideoPlayerArtilleryTrace16("loading")},s.prototype.$VideoPlayerArtilleryTrace15=function(){this.$VideoPlayerArtilleryTrace16("playing");var e=this.$VideoPlayerArtilleryTrace1;e&&(e.finish(),this.$VideoPlayerArtilleryTrace1=null)},s.prototype.$VideoPlayerArtilleryTrace12=function(e){return e.trace().addStringAnnotation("videoID",this.$VideoPlayerArtilleryTrace4).addStringAnnotation("sessionID",this.$VideoPlayerArtilleryTrace6).addStringAnnotation("browserName",t("UserAgentData").browserName).addStringAnnotation("browserVersion",t("UserAgentData").browserVersion).addStringAnnotation("isLive",this.$VideoPlayerArtilleryTrace7.toString()).addStringAnnotation("playerOrigin",this.$VideoPlayerArtilleryTrace9||"").addStringAnnotation("playerSuborigin",this.$VideoPlayerArtilleryTrace10||""),e},a.exports=s},null),__d("VideoPlayerShakaPerformanceLogger",["VideoPlayerArtilleryOperationMarker","VideoPlayerArtilleryTrace","VideoPlayerShakaPerformanceLoggerConfig","VideoPlayerShakaPerformanceTypedLogger","guid"],function(e,t,i,r,a,n){"use strict";function s(){h.apply(this,arguments)}function o(e){this.$VideoPlayerShakaPerformanceLogger2=e.videoID,this.$VideoPlayerShakaPerformanceLogger4=e.video,this.$VideoPlayerShakaPerformanceLogger1=t("guid")(),this.$VideoPlayerShakaPerformanceLogger3=0,this.$VideoPlayerShakaPerformanceLogger5=e.representationId,this.$VideoPlayerShakaPerformanceLogger8=e.isLive,this.$VideoPlayerShakaPerformanceLogger9=e.accessToken,this.$VideoPlayerShakaPerformanceLogger11=e.playerOrigin,this.$VideoPlayerShakaPerformanceLogger12=e.playerSuborigin,this.$VideoPlayerShakaPerformanceLogger10=new(t("VideoPlayerArtilleryTrace"))(this.$VideoPlayerShakaPerformanceLogger1,e)}var h,l;h=babelHelpers.inherits(s,t("VideoPlayerShakaPerformanceTypedLogger")),l=h&&h.prototype,s.prototype.setState=function(e){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=e,l.setState.call(this,e)},s.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1},s.prototype.setSequentialID=function(e){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=e,l.setSequentialID.call(this,e),this},s.prototype.setParentLogger=function(e){return this.setParentID(e.$ExtendableVideoPlayerShakaPerformanceTypedLogger2),this},o.isEnabled=function(){return t("VideoPlayerShakaPerformanceLoggerConfig").isSampled},o.prototype.$VideoPlayerShakaPerformanceLogger13=function(e){var t=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(t.length>0){var i=t.length-1;e=e.setLastBufferedStart(Math.round(1e3*t.start(i))).setLastBufferedEnd(Math.round(1e3*t.end(i))),this.$VideoPlayerShakaPerformanceLogger10.updateBufferAhead(1e3*(t.end(i)-this.$VideoPlayerShakaPerformanceLogger4.currentTime))}for(var r=[],a=0;a<t.length-1;a++){var n=Math.round(1e3*this.$VideoPlayerShakaPerformanceLogger4.buffered.start(a)),s=Math.round(1e3*this.$VideoPlayerShakaPerformanceLogger4.buffered.end(a));r.push([n,s])}return r&&r.length&&(e=e.setAdditionalBufferedRanges(JSON.stringify(r))),e},o.prototype.getEventLogger=function(e){var t=Date.now(),i=new s,r=this.$VideoPlayerShakaPerformanceLogger4.currentTime;this.$VideoPlayerShakaPerformanceLogger13(i).setEvent(e).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setRepresentationID(this.$VideoPlayerShakaPerformanceLogger5).setPlayhead(Math.round(1e3*r)).setIsLive(this.$VideoPlayerShakaPerformanceLogger8).setSession(this.$VideoPlayerShakaPerformanceLogger1).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger6).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger7).setPushed(0).setResult("success").setAccessToken(this.$VideoPlayerShakaPerformanceLogger9).setClientTimeBegin(t).setClientTimeEnd(t);var a=i.setState;i.setState=function(e){return e!==this.$VideoPlayerShakaPerformanceLogger6&&"playing"===e?this.$VideoPlayerShakaPerformanceLogger7=Date.now():"playing"!==e&&(this.$VideoPlayerShakaPerformanceLogger7=null),this.$VideoPlayerShakaPerformanceLogger6=e,this.$VideoPlayerShakaPerformanceLogger10.enterState(e),a.call(i,e)}.bind(this),i.updateState=function(e){return i.getState()==this.$VideoPlayerShakaPerformanceLogger6?(this.$VideoPlayerShakaPerformanceLogger10.enterState(e),i.setState(e)):i}.bind(this);var n=i.setError;return i.setError=function(e){return"object"==typeof e?("aborted"===e.type||"delay"===e.type?this.setResult("aborted"):(this.setResult("failed"),n.call(this,e.type)),this.setCode(e.status)):n.call(this,e),this},i},o.prototype.getArtilleryMarkers=function(e){return this.$VideoPlayerShakaPerformanceLogger10.getMarkers(e)},o.prototype.getOperationLogger=function(e){var t=this.getEventLogger(e),i=this.getArtilleryMarkers(e),r=t.setResource;t.setResource=function(e){return i.forEach(function(t){return t.setResource(e)}),r.call(t,e)};var a=t.log;return t.log=function(){return this.setClientTimeEnd(Date.now()),i.forEach(function(e){return e.markOperationEnd()}),a.call(this)},t.start=function(){return i.forEach(function(e){return e.markOperationStart()}),t},t.setWasPrefetchCacheHit=function(e){return i.forEach(function(t){return t.setWasPrefetchCacheHit(e)}),t},t},o.prototype.setRepresentationID=function(e){this.$VideoPlayerShakaPerformanceLogger5=e},a.exports=o},null),__d("VideoPushParametersHelper",["URI","VideoPlayerShakaExperiments"],function(e,t,i,r,a,n){function s(e){"use strict";return this.$VideoPushParametersHelper1=new(t("URI"))(e),this}var o=/(.*)\.(xx|fna)\.fbcdn\.net/;s.prototype.setStreamEndOffset=function(e){"use strict";return this.$VideoPushParametersHelper2=Math.min(Math.floor(e)+1,t("VideoPlayerShakaExperiments").liveMaxSegmentsToPush),this.$VideoPushParametersHelper4=Math.floor(e)+1,this},s.prototype.setSegmentStartTime=function(e){"use strict";return this.$VideoPushParametersHelper3=e,this},s.prototype.setPushVideoRepresentationID=function(e){"use strict";return this.$VideoPushParametersHelper5=e,this},s.prototype.setPushAudioRepresentationID=function(e){"use strict";return this.$VideoPushParametersHelper6=e,this},s.prototype.setUseLongCacheForManifest=function(e){"use strict";return this.$VideoPushParametersHelper7=e,this},s.prototype.getURL=function(){"use strict";var e=o.test(this.$VideoPushParametersHelper1.toString());return e&&(null!=this.$VideoPushParametersHelper2&&this.$VideoPushParametersHelper1.addQueryData("_nc_p_n",this.$VideoPushParametersHelper2),null!=this.$VideoPushParametersHelper3?this.$VideoPushParametersHelper1.addQueryData("_nc_p_ts",this.$VideoPushParametersHelper3):null!=this.$VideoPushParametersHelper4&&this.$VideoPushParametersHelper1.addQueryData("_nc_p_o",this.$VideoPushParametersHelper4),null!=this.$VideoPushParametersHelper5&&null!=this.$VideoPushParametersHelper6&&(this.$VideoPushParametersHelper1.addQueryData("_nc_p_rid",this.$VideoPushParametersHelper5),this.$VideoPushParametersHelper1.addQueryData("_nc_p_arid",this.$VideoPushParametersHelper6)),this.$VideoPushParametersHelper7&&this.$VideoPushParametersHelper1.addQueryData("_nc_nc","1")),this.$VideoPushParametersHelper1.toString()},s.prototype.getSegmentsToPush=function(){"use strict";return this.$VideoPushParametersHelper2},s.prototype.getSegmentStartTime=function(){"use strict";return this.$VideoPushParametersHelper3},s.prototype.getSegmentOffset=function(){"use strict";return this.$VideoPushParametersHelper4},s.prototype.getPushVideoRepresentationID=function(){"use strict";return this.$VideoPushParametersHelper5},s.prototype.getPushAudioRepresentationID=function(){"use strict";return this.$VideoPushParametersHelper6},s.prototype.getUseLongCacheForManifest=function(){"use strict";return this.$VideoPushParametersHelper7},s.getDefaultLiveStreamEndOffset=function(){"use strict";return t("VideoPlayerShakaExperiments").liveDefaultStreamEndOffset},a.exports=s},null),__d("Shaka",["Promise","VideoPlayerShakaPerformanceLogger","VideoPushParametersHelper","setTimeout","clearTimeout","clearImmediate","setImmediate","TimeSlice","Map","VideoPlayerShakaExperiments","VideoPlayerResourceTimer"],function(e,t,i,r,a,n){function s(e,t,i){e[t]=d.guard(i,"shaka "+t)}var o=t("Promise"),h=(t("VideoPlayerShakaPerformanceLogger"),t("VideoPushParametersHelper")),l=t("setTimeout"),u=t("clearTimeout"),d=(t("clearImmediate"),t("setImmediate"),t("TimeSlice")),p=t("Map"),c=t("VideoPlayerShakaExperiments"),f=t("VideoPlayerResourceTimer");c.shakaNativePromise&&c.useNativePromise&&(o=window.Promise);var y={};(function(e){function t(e,t){var i=e.split("."),r=Gr;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(var a;i.length&&(a=i.shift());)i.length||void 0===t?r=r[a]?r[a]:r[a]={}:r[a]=t}function i(e,t){function i(){}i.prototype=t.prototype,e.ec=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.cc=function(e,i,r){return t.prototype[i].apply(e,Array.prototype.slice.call(arguments,2))}}function r(){}function a(e){var t=console[e];t?t.bind||(console[e]=function(){t.apply(console,arguments)}):console[e]=function(){}}function n(e){Wr[e]={ra:zr(),end:NaN}}function d(e){(e=Wr[e])&&(e.end=zr())}function y(e,t,i,r){this.id=e,this.bandwidth=t||0,this.lang=i||"unknown",this.streamInfoID=r,this.active=!1}function g(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}function m(){this.fontSize="100%",this.fontColor=qr,this.fontOpacity=Kr,this.backgroundColor=Yr,this.backgroundOpacity=Kr,this.fontEdge=Xr}function T(e){var t=[];t.push("font-size: "+e.fontSize),t.push("color: "+P(e.fontColor,e.fontOpacity)),t.push("background-color: "+P(e.backgroundColor,e.backgroundOpacity));for(var i=[],r=0;r<e.fontEdge.length;++r){var a=e.fontEdge[r].slice(3,6);i.push(P(e.fontEdge[r].slice(0,3),e.fontOpacity)+" "+a.join("px ")+"px")}return t.push("text-shadow: "+i.join(",")),t.join("; ")}function P(e,t){return"rgba("+e.concat(t).join(",")+")"}function b(e,t){this.id=e,this.lang=t||"unknown",this.enabled=this.active=!1}function V(e,t,i,r,a,n,s){this.id=e,this.bandwidth=t||0,this.width=i||0,this.height=r||0,this.streamInfoID=a,this.fbQualityLabel=n,this.fbQualityClass=s,this.active=!1}function M(e,t){var i=e.width*e.height,r=t.width*t.height;return i<r?-1:i>r?1:e.bandwidth<t.bandwidth?-1:e.bandwidth>t.bandwidth?1:0}function L(e){for(var t=je,i=[],r=0;r<e.length;++r){for(var a=!1,n=0;n<i.length&&!(a=t?t(e[r],i[n]):e[r]===i[n]);++n);a||i.push(e[r])}return i}function v(){return Date.now()+Zr}function $(e){this.b=e,this.c=0==ea,this.a=0}function A(e){return e.a<e.b.byteLength}function S(e){var t=e.b.getUint8(e.a);return e.a+=1,t}function H(e){var t=e.b.getUint32(e.a,e.c);return e.a+=4,t}function k(e){var t,i;if(e.c?(t=e.b.getUint32(e.a,!0),i=e.b.getUint32(e.a+4,!0)):(i=e.b.getUint32(e.a,!1),t=e.b.getUint32(e.a+4,!1)),2097151<i)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");return e.a+=8,i*Math.pow(2,32)+t}function E(e){if(e.a+16>e.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var t=new Uint8Array(e.b.buffer,e.a,16);return e.a+=16,t}function w(e,t){if(e.a+t>e.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");e.a+=t}function D(e){this.b=e,this.a=new $(e),Jr||(Jr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function R(e){var t;if(t=_(e),7<t.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var i=0,r=0;r<t.length;r++)i=256*i+t[r];t=i,i=_(e);e:{for(r=0;r<Jr.length;r++)if(Ne(i,Jr[r])){r=!0;break e}r=!1}if(r)i=e.b.byteLength-e.a.a;else{if(8==i.length&&224&i[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var r=i[0]&(1<<8-i.length)-1,a=1;a<i.length;a++)r=256*r+i[a];i=r}return i=e.a.a+i<=e.b.byteLength?i:e.b.byteLength-e.a.a,r=new DataView(e.b.buffer,e.b.byteOffset+e.a.a,i),w(e.a,i),new I(t,r)}function _(e){var t,i=S(e.a);for(t=1;8>=t&&!(i&1<<8-t);t++);if(8<t)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var r=new Uint8Array(t);for(r[0]=i,i=1;i<t;i++)r[i]=S(e.a);return r}function I(e,t){this.id=e,this.a=t}function C(e){if(8<e.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var t=0,i=0;i<e.a.byteLength;i++)var r=e.a.getUint8(i),t=256*t+r;return t}function x(e){this.c=Math.exp(Math.log(.5)/e),this.a=this.b=0}function B(e){return e.b/(1-Math.pow(e.c,e.a))}function O(e){var t,i=new ta(e.type,{detail:e.detail,bubbles:!!e.bubbles});for(t in e)t in i||(i[t]=e[t]);return i}function N(e){return new ta("error",{detail:e,bubbles:!0})}function U(e,t,i){return F(t),F(i),i==t||e>=ia&&i==t.split("-")[0]||e>=ra&&i.split("-")[0]==t.split("-")[0]}function F(e){e=e.toLowerCase().split("-");var t=aa[e[0]];return t&&(e[0]=t),e.join("-")}function j(e){return Object.keys(e).map(function(t){return e[t]})}function Q(e,t){return W(e,t,"boolean")}function G(e,t,i){if(e=W(e,t,"number"),null==e)return null;if(isNaN(e)||e==Number.NEGATIVE_INFINITY||e==Number.POSITIVE_INFINITY)throw new RangeError("'"+t+"' must be finite.");if(null!=i&&e<i)throw new RangeError("'"+t+"' must be >= "+i);return e}function z(e,t){return W(e,t,"string")}function W(e,t,i){if(e=e[t],null==e)return null;if(typeof e!=i)throw new TypeError("'"+t+"' must be a "+i+".");return e}function q(e,t,i){if(e=e[t],null==e)return null;if(!(e instanceof i))throw new TypeError("'"+t+"' must be an instance of "+i.name+".");return e}function Y(){this.a={}}function K(e){var t,i=[];for(t in e.a)i.push.apply(i,e.a[t]);return i}function X(e,t,i){if(e=e.a[t])for(t=0;t<e.length;++t)e[t]==i&&(e.splice(t,1),--t)}function J(e){var t,i=[];for(t in e.a)i.push(t);return i}function Z(){this.a=new Y}function ee(e,t,i,r){t=new ie(t,i,r),e.a.push(i,t)}function te(e){for(var t=K(e.a),i=0;i<t.length;++i)t[i].ta();e.a.a={}}function ie(e,t,i){this.target=e,this.type=t,this.a=i,this.target.addEventListener(t,i,!1)}function re(e){this.Ca=new Y,this.ba=e}function ae(e,t){t.currentTarget=e;for(var i=e.Ca.get(t.type)||[],r=0;r<i.length;++r){var a=i[r];try{a.handleEvent?a.handleEvent(t):a.call(e,t)}catch(n){}}return e.ba&&t.bubbles&&ae(e.ba,t),t.defaultPrevented}function ne(e,t){re.call(this,null),this.b=e,this.c=null,this.f=new Z,this.g=null,this.B=0,this.v=null,this.h=!1,this.F=this.G=!0,this.j=!1,this.a={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new g},this.l=t,this.i=null,this.m=1,this.C=null,this.u=!1}function se(t){return"text/vtt"==t?!!e.VTTCue:MediaSource.isTypeSupported(t)}function oe(e){var t;if(e.l&&(t=e.l.getOperationLogger("unload").start()),!e.c)return t&&t.log(),o.resolve();e.h&&ce(e),e.b.pause(),te(e.f),pe(e),ue(e),e.c&&(e.c.destroy(),e.c=null),e.b.src="";var i=o.resolve().then(function(){t&&t.log()});return e.h=!1,i}function he(e,t){var i;e.l&&(i=e.l.getOperationLogger("load").setState("loading").start(),t.l=t.g.performanceLogger=e.l),yr(t,e.b);var r=null;return e.j=!1,e.c&&(r=oe(e).then(Me(e,function(){return t.ya()}))),e.b.autoplay&&(n("load"),ee(e.f,e.b,"timeupdate",e.Kb.bind(e))),t.yb(e.a),t.N=e.C,e.C=null,r||(r=t.ya()),r["catch"](Me(e,function(e){return t.destroy(),o.reject(e)})),r.then(Me(e,function(){if(!this.b||this.j)return le();this.c=t,ee(this.f,this.c,"seekrangechanged",this.Pb.bind(this));var e,i=new Y;if(e=this.c,e.D){e=e.a.a[0];for(var r=[],a=0;a<e.a.length;++a)r.push.apply(r,Hi(e.a[a]));e=r}else e=[];for(r=0;r<e.length;r++)i.push(e[r].contentType,e[r]);if(e=this.c,e.D){for(var r={},n=e.a.a[0],a=0;a<n.a.length;++a){var s=n.a[a];r[s.I]=s}for(e.f.a={},n=J(i),a=0;a<n.length;++a){var s=n[a],o=i.get(s);if("video"==s){var h=o[0].id;e.f.push(s,r[h])}else if("audio"==s)for(var h=o[0].a.split(";")[0],l=0;l<o.length;++l){var u=o[l];u.a.split(";")[0]==h&&e.f.push(s,r[u.id])}else for(l=0;l<o.length;++l)h=o[l].id,e.f.push(s,r[h])}e.ca=!0,(i=e.f.get("audio"))&&($r(e,i),e.f.set("audio",i),i=i[0].lang||e.C,U(2,e.C,i)&&(e.ca=!1)),(i=e.f.get("text"))&&($r(e,i),e.f.set("text",i),i=i[0].lang||e.C,U(2,e.C,i)||(e.ca=!1))}return ee(this.f,this.b,"error",this.Xb.bind(this)),ee(this.f,this.b,"playing",this.Ob.bind(this)),ee(this.f,this.b,"pause",this.Nb.bind(this)),gr(this.c,this,this.b)})).then(Me(e,function(){return!this.b||this.j?le():(de(this),void(i&&i.updateState("ready").log()))}))["catch"](Me(e,function(e){if(i&&i.setError(JSON.stringify(e)).log(),!this.b||this.j)return le();if("destroy"!=e.type){var t=N(e);this.dispatchEvent(t)}return this.D().then(function(){return o.reject(e)})}))}function le(){var e=Error("Player destroyed");return e.type="destroy",o.reject(e)}function ue(e){e.g&&(u(e.g),e.g=null)}function de(e){pe(e),e.v=l(e.L.bind(e),100)}function pe(e){e.v&&(u(e.v),e.v=null)}function ce(e){d("buffering"),e.i&&(e.i.log(),e.i=null),e.u&&(e.b.playbackRate=e.m),e.h=!1,e.dispatchEvent(O({type:"bufferingEnd"}))}function fe(e){re.call(this,null),this.a=new x(3),this.h=new x(10),this.f=e||5e5,this.g=0}function ye(e,t,i){fe.call(this,i),this.c=e||0,this.b=void 0===t?1/0:t}function ge(){fe.call(this)}function me(){var e,t,i=new o(function(i,r){e=i,t=r});return i.resolve=e,i.reject=t,i.destroy=me.prototype.destroy,i}function Te(){this.za=new me,this.c=!1,this.da=null,this.a=[],this.b=null}function Pe(e,t){if(e.c)throw Error("Cannot append to a running task!");e.a.push(t)}function be(e,t){var i,r=e.a[0](t);r?(i=r[0],e.b=r[1]):(i=o.resolve(),e.b=null),i.then(Me(e,function(e){this.da?(this.a=[],this.b=null,Ve(this)):(this.a.shift(),this.a.length?be(this,e):(this.za.resolve(e),this.b=null))}))["catch"](Me(e,function(e){this.a=[],this.b=null,this.da?Ve(this):this.za.reject(e)}))}function Ve(e){function t(){var e=Error("Task aborted.");e.type="aborted",this.za.reject(e),l(function(){this.da.resolve(),this.da=null}.bind(this),5)}e.f?e.f.then(function(){this.f=null,t.call(this)}.bind(e)):t.call(e)}function Me(e,t){return t.bind(e)}function Le(e,t,i,r,a){MediaSource.isTypeSupported(t),re.call(this,r),r=e.addSourceBuffer(t),this.v=e,this.a=r,this.K=i,this.C=new Z,this.l=this.P=null,this.H=!1,this.G=this.D=this.F=0,this.B=null,this.N=this.A=!1,this.U=a,this.c=[],this.M=0,this.i=this.f=this.b=null,this.j=this.u=this.L=0,this.g=t&&t.charAt(0),ee(this.C,this.a,"updateend",this.T.bind(this)),this.m=null}function ve(e,t,i){e.Ra&&e.ja(t,{type:e.g.charAt(0),segment:i,sourceBuffer:e.a})}function $e(e,t){for(var i=e.a.buffered,r=0;r<i.length;++r){var a=i.start(r)-sa,n=i.end(r)+sa;if(t>=a&&t<=n)return i.end(r)-t}return 0}function Ae(e,t,i){t=t.endTime?t.endTime-t.startTime:1;var r=new Ut;return r.b=3,r.j=1e3*t,r.f=1e3*e.L,r.u=e.P,r.m=i,r.R=e.U,r.g=e.g,r}function Se(e,t,i,r,a){var n;if(e.l&&(n=e.l.getOperationLogger("fetch").setResource(t.url.toString()).setLength(Math.round(1e3*(t.endTime-t.startTime))).start()),e.m=n,e.b)return i=Error("Cannot fetch ("+e.g+"): previous operation not complete."),e.u>=e.F?(i.type="stream",n&&n.setError(i).log(),e.u=0):(e.u++,i.type="aborted"),o.reject(i);e.b=new Te,i!=e.a.timestampOffset&&(e.a.timestampOffset=i),i=Ae(e,t,a);var s=Xt(t.url,i,e.K,e.l,e.m);ve(e,"SegmentFetching",t);var h=Yt.prototype.g.bind(t.url);e.B&&e.A&&(r=e.B);var l=0;r&&(e.B=r,e.A=!1,Pe(e.b,function(){return[r.then(function(e){return e.ma>l&&(l=e.ma),_e(this,e,null)}.bind(this)),this.h.bind(this)]}.bind(e))),Pe(e.b,Me(e,function(){return[s.then(function(e){return ve(this,"SegmentFetched",t),e.ma>l&&(l=e.ma),this.K.getBandwidth(),
_e(this,e,t)}.bind(this)),function(){return ve(this,"SegmentFailed",t),h(),this.h()}.bind(this)]}));var u=0==e.a.buffered.length&&0==e.c.length,d=null;return Pe(e.b,function(){if(0==this.a.buffered.length&&!this.N){var e=Error("Failed to buffer segment ("+this.g+").");return e.type="stream",[o.reject(e)]}this.a.buffered.length&&u&&(e=t.startTime,d=this.a.buffered.start(0)-e),e=li(this.c,t.startTime),0<=e?this.c.splice(e+1,0,t):this.c.push(t)}.bind(e)),e.u=0,Re(e).then(function(){return n&&n.log(),o.resolve({aa:d,Gb:l})}.bind(e),function(e){return n&&n.setError(e).log(),o.reject(e)})}function He(e){if(e.b){var t=Error("Cannot clear ("+e.g+"): previous operation not complete.");return e.j>=e.D?(t.type="stream",e.j=0):(e.j++,t.type="aborted"),o.reject(t)}return e.b=new Te,Pe(e.b,function(){var e;e:if(0==this.a.buffered.length)e=o.resolve();else{try{this.a.remove(0,this.v.duration)}catch(t){e=o.reject(t);break e}this.c=[],e=this.f=new me}return[e,this.h.bind(this)]}.bind(e)),e.j=0,Re(e)}function ke(e,t){if(e.b){var i=Error("Cannot clearAfter ("+e.g+"): previous operation not complete.");return i.type="stream",o.reject(i)}return e.b=new Te,Pe(e.b,function(){return[Ie(this,t),this.h.bind(this)]}.bind(e)),Re(e)}function Ee(e){return e.b?(e=e.b,e.da?e=e.da:e.c?(e.b&&(e.f=e.b()),e.da=new me,e=e.da):(e.c=!0,e=o.resolve())):e=o.resolve(),e}function we(e){for(var t=e.currentTime,i=t,r=0;r<e.buffered.length;r++)if(t<=e.buffered.start(r)){i=e.buffered.start(r);break}return i}function De(e,t){for(var i=t.currentTime,r=0;r<t.buffered.length;r++)if(i>=t.buffered.start(r)&&i<=t.buffered.end(r)-e.G)return!1;return!0}function Re(e){return e.b.start(),e.b.za.then(Me(e,function(){this.b=null}))["catch"](Me(e,function(e){return this.b=null,o.reject(e)}))}function _e(e,t,i){var r;if(e.l){var a=i?i.url.toString():"init";r=e.l.getOperationLogger("append").setResource(a).setLength(t.byteLength).start(),e.m&&(r=r.setParentLogger(e.m))}try{e.a.appendBuffer(t)}catch(n){return r&&r.setError(n).log(),o.reject(n)}return e.f=new me,e.i=i,e.f.then(function(){r&&r.log()},function(e){return r&&r.setError(e).log(),o.reject(e)})}function Ie(e,t){if(0==e.a.buffered.length)return o.resolve();var i=li(e.c,t);if(-1==i||i==e.c.length-1)return o.resolve();try{e.a.remove(e.c[i+1].startTime,e.v.duration)}catch(r){return o.reject(r)}return e.c=e.c.slice(0,i+1),e.f=new me,e.f}function Ce(e){return String.fromCharCode.apply(null,e)}function xe(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t}function Be(t){return xe(e.atob(t.replace(/-/g,"+").replace(/_/g,"/")))}function Oe(e){for(var t="",i=0;i<e.length;++i){var r=e[i].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function Ne(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!=t[i])return!1;return!0}function Ue(){this.g=this.b="",this.m=!1,this.v=this.u=null,this.h=this.f=!1,this.j=this.c="",this.i=null,this.a=[]}function Fe(e,t){var i=e.a.concat(t.map(function(e){return{initData:new Uint8Array(e.initData.buffer),initDataType:e.initDataType}}));e.a=L(i)}function je(e,t){return e.initDataType==t.initDataType&&Ne(e.initData,t.initData)}function Qe(e,t,i,r){this.a=[],r&&this.a.push(r)}function Ge(e){this.systemIds=[],this.cencKeyIds=[],this.a=[],e=new $(new DataView(e.buffer));try{for(;A(e);){var t=e.a,i=H(e),r=H(e);if(1==i?i=k(e):0==i&&(i=e.b.byteLength-t),1886614376!=r)w(e,i-(e.a-t));else{var a=S(e);if(1<a)w(e,i-(e.a-t));else{w(e,3);var n=Oe(E(e)),s=[];if(0<a)for(var o=H(e),h=0;h<o;++h){var l=Oe(E(e));s.push(l)}var u=H(e);w(e,u),this.cencKeyIds.push.apply(this.cencKeyIds,s),this.systemIds.push(n),this.a.push({start:t,end:e.a-1}),e.a!=t+i&&w(e,i-(e.a-t))}}}}catch(d){}}function ze(e){var t;e instanceof ze?(We(this,e.$),this.ia=e.ia,this.V=e.V,qe(this,e.la),this.W=e.W,Ye(this,e.a.clone()),this.ga=e.ga):e&&(t=String(e).match(oa))?(We(this,t[1]||"",!0),this.ia=Ke(t[2]||""),this.V=Ke(t[3]||"",!0),qe(this,t[4]),this.W=Ke(t[5]||"",!0),Ye(this,t[6]||"",!0),this.ga=Ke(t[7]||"")):this.a=new Ze(null)}function We(e,t,i){e.$=i?Ke(t,!0):t,e.$&&(e.$=e.$.replace(/:$/,""))}function qe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.la=t}else e.la=null}function Ye(e,t,i){t instanceof Ze?e.a=t:(i||(t=Xe(t,da)),e.a=new Ze(t))}function Ke(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Xe(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,Je),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Je(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function Ze(e){this.b=e||null}function et(e,t,i){if(!e.a&&(e.a={},e.c=0,e.b))for(var r=e.b.split("&"),a=0;a<r.length;a++){var n=r[a].indexOf("="),s=null,o=null;0<=n?(s=r[a].substring(0,n),o=r[a].substring(n+1)):s=r[a],s=decodeURIComponent(s.replace(/\+/g," ")),o=o||"",et(e,s,decodeURIComponent(o.replace(/\+/g," ")))}e.b=null,(r=e.a.hasOwnProperty(t)&&e.a[t])||(e.a[t]=r=[]),r.push(i),e.c++}function tt(e,t,i){var r=e.indexOf("<?xml");return 0<=r&&(e=e.substr(r)),(e=(new DOMParser).parseFromString(e,"text/xml"))?("string"==typeof t&&(t=[new ze(t)]),t=t||[new ze("")],i=i||[new ze("")],At({mb:t,s:i},e,it)):null}function it(){this.id=this.url=null,this.type="static",this.b=this.j=this.s=this.mb=null,this.h=5,this.f=this.c=this.g=null,this.i=1,this.a=[]}function rt(){this.g=this.f=this.c=this.s=this.a=this.start=this.id=null,this.b=[]}function at(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null,this.c=!1,this.h=this.g=this.f=this.s=null,this.j=[],this.a=[]}function nt(){this.value=null}function st(){this.contentType=this.lang=this.id=null}function ot(){this.a=this.b=this.g=this.s=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null,this.c=[]}function ht(){this.b=this.a=this.c=this.f=null}function lt(){this.parsedPssh=this.psshBox=null}function ut(){this.url=null}function dt(){this.url=null}function pt(){this.s=null,this.h=1,this.c=this.b=this.f=this.a=this.g=null}function ct(){this.a=this.url=null}function ft(){this.a=this.url=null}function yt(){this.s=null,this.a=1,this.c=this.g=null,this.i=0,this.h=null,this.b=[],this.f=null}function gt(){this.a=this.b=null}function mt(){this.a=1,this.b=this.i=null,this.j=0,this.c=this.g=this.f=this.h=null}function Tt(){this.a=[]}function Pt(){this.b=this.a=this.startTime=null}function bt(e,t){this.ra=e,this.end=t}function Vt(e,t,i,r){if(0!==e.a.length){var a=new at;a.contentType="text",a.lang=i||"en",a.c=!0,i=new ot,i.bandwidth=0,i.f=r||"text/vtt",i.s=[new ze(t)],a.a.push(i),e.a[0].b.push(a),Mt(e.a[0])}}function Mt(e){for(var t=[],i=0;i<e.b.length;++i){var r=e.b[i];null!=r.group&&(t[r.group]=!0)}for(i=0;i<e.b.length;++i)if(r=e.b[i],null==r.group){for(var a=1;1==t[a];)++a;t[a]=!0,r.group=a}}function Lt(e,t){if(!t||0===t.length)return e;for(var i=[],r=0;r<t.length;r++){var a=t[r].url;null==e||0===e.length?i.push(new ze(a)):(a=vt(e.slice(0,1),a),i.push(a[0]))}return i}function vt(e,t){if(!t)return e;var i=new ze(t);return e?e.map(function(e){return e.resolve(i)}):[i]}function $t(e,t,i){var r=wt(i);return(t=St(t,i.constructor.TAG_NAME))&&r.parse(e,t),r}function At(e,t,i){var r=null;return(t=St(t,i.TAG_NAME))&&(r=new i,r.parse(e,t)),r}function St(e,t){for(var i=null,r=0;r<e.childNodes.length;r++)if(e.childNodes[r].tagName==t){if(i)return null;i=e.childNodes[r]}return i}function Ht(e,t,i){for(var r=[],a=0;a<t.childNodes.length;a++)if(t.childNodes[a].tagName==i.TAG_NAME){var n=new i;n.parse.call(n,e,t.childNodes[a]),r.push(n)}return r}function kt(e){return e=e.firstChild,e.nodeType!=Node.TEXT_NODE?null:e.nodeValue}function Et(e){return e?e.map(function(e){return e.clone()}):null}function wt(e){return e?e.clone():null}function Dt(e,t,i,r){return e=i(e.getAttribute(t)),null!=e?e:void 0!==r?r:null}function Rt(e){return e?(e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function _t(t){if(!t)return null;var i=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t);if(!i)return null;t=0;var r=Bt(i[1]);return r&&(t+=31536e3*r),(r=Bt(i[2]))&&(t+=2592e3*r),(r=Bt(i[3]))&&(t+=86400*r),(r=Bt(i[4]))&&(t+=3600*r),(r=Bt(i[5]))&&(t+=60*r),i=e.parseFloat(i[6]),(i=isNaN(i)?null:i)&&(t+=i),t}function It(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Bt(t[1]),null==e?null:(t=Bt(t[2]),null==t?null:new bt(e,t))):null}function Ct(t){return t=e.parseInt(t,10),isNaN(t)?null:t}function xt(t){return t=e.parseInt(t,10),0<t?t:null}function Bt(t){return t=e.parseInt(t,10),0<=t?t:null}function Ot(e){return e}function Nt(e,t){this.url=e,this.b=t||new Ut,this.g=this.h=this.i=0,this.a=null,this.c=new me,this.f=null}function Ut(){this.body=null,this.b=1,this.j=1e3,this.f=0,this.method="GET",this.h="arraybuffer",this.c={},this.i=!1,this.R=this.a=this.u=null,this.m=!1,this.g=null}function Ft(e){jt(e),e.b.body=null,e.c.destroy(),e.c=null,e.f=null}function jt(e){e.a&&(e.a.onload=null,e.a.onreadystatechange=null,e.a.onerror=null,e.a.ontimeout=null),e.a=null}function Qt(e,t,i){return t=Error(t),t.type=i,t.status=e.a.status,t.url=e.url,t.method=e.b.method,t.body=e.b.body,t.ac=e.a,t}function Gt(e){jt(e),l(e.j.bind(e),e.g*(1+.5*(2*Math.random()-1))),e.g*=2}function zt(){this.a=new p,this.b=!1}function Wt(e,t){var i=t.getResponseHeader("X-FB-Debug-Num-Pushed"),r=t.getResponseHeader("X-FB-Debug-List-Pushed");null!=r&&null!=i&&(i=parseInt(i,10),r=r.split(","),i!=r.length&&console.warn("Inconsistent push debug headers.",i,r),i&&(-1<r[0].indexOf("/")&&(e.b=!0),r.forEach(function(e){this.a.set(e,(this.a.get(e)||0)+1)}.bind(e))))}function qt(e,t){var i;return i=new ze(t).W,(i=(e.b?Ta:ma).exec(i))?(i=i[1],e.a.get(i)||0):0}function Yt(e,t,i,r){this.a=t,this.h=i||0,this.f=null!=r?r:null,this.c=this.b=null,this.j=e,this.i=null,this.m=!1}function Kt(e,t){return e&&0!==e.length?e.map(function(e){return e.resolve(t)}):[t]}function Xt(e,t,i,r,a){return e.b?e.b:(e.b=Jt(e,0,t||new Ut,i,r,a),e.b)}function Jt(t,i,r,a,n,s){var h,l=t.a[i].toString();if(n){r.a&&(r.a.i=!0);var u=0;r.R&&(u=qt(r.R,l)),h=n.getOperationLogger("request").setResource(l).setPushed(u).start(),s&&(h=h.setParentLogger(s))}var d=e.performance.now();return(t.h||t.f)&&(n=t.a[i].V,!n.endsWith("fbcdn.net")||n.startsWith("interncache")||n.endsWith("ak.fbcdn.net")?r.c.Range="bytes="+(t.h+"-"+(null!=t.f?t.f:"")):(l+="&bytestart="+t.h,l+=null!==t.f?"&byteend="+t.f:"")),t.j&&(l=t.j(l,r.c)||l),n=null,t.m=!1,ga&&(n=ga(l,Me(t,function(){this.m=!0}))),n||(t.c=new Nt(l,r),a&&(t.c.f=a),n=t.c.j()),n=n.then(Me(t,function(t){this.i=this.c=this.b=null,this.i=t.a?new ze(t.a):this.a[i],t.response.ma=t.ma;var r=f.getResourceTimingEntry(l,d,e.performance.now());return h&&(h=h.setLength(t.response.byteLength||t.response.length).setWasPrefetchCacheHit(this.m),null!=r&&(h=h.setTimeToLastByte(Math.round(r.timeToLastByte)).setTimeToFirstByte(Math.round(r.timeToFirstByte)).setTimeToRequestStart(Math.round(r.timeToRequestStart))),h.log()),o.resolve(t.response)})),n=n["catch"](Me(t,function(e){return this.b&&i+1<this.a.length?this.b=Jt(this,i+1,r,a):(this.b=this.c=null,h&&h.setError(e).log(),o.reject(e))}))}function Zt(e,t,i,r){this.a=new Ut,this.a.h="text",this.a.b=3,this.a.f=1e3*(null!=t?t:0),i&&(this.a.a=i),r&&(this.a.R=r),this.a.i=!0,this.b=e}function ei(e,t){var i=e.b;return Xt(i,e.a,null,t).then(function(e){return e instanceof ArrayBuffer&&(e=String.fromCharCode.apply(null,new Uint8Array(e))),(e=tt(e,i.a,[i.i]))?o.resolve(e):(e=Error("MPD parse failure."),e.type="dash",o.reject(e))})}function ti(e){this.a=null,this.h=e,this.c=this.g=this.f=null,this.i=!1,this.j=this.b=null}function ii(e,t,i,r){for(var a=t.a,n=[],s=0;s<r;++s){var o=s+i,h=(o-1)*a.b,l=h/a.a,u=(h+a.b)/a.a,o=ri(e,t,a.j+o-1,h);if(!o)return null;n.push(new oi(l,u,o,h))}return n}function ri(e,t,i,r){if(!t.a)return null;var a=t.a.h;return a?(i=ai(a,t.id,i,t.bandwidth,r))?(t=Kt(t.s,i),new Yt(e,t,0,null)):null:t.s?new Yt(e,t.s,0,null):null}function ai(t,i,r,a,n){var s={RepresentationID:i,Number:r,Bandwidth:a,Time:n};t=t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,i,r){if("$$"==t)return"$";var a=s[i];return null==a?t:("RepresentationID"==i&&r&&(r=void 0),t=a.toString(),r=e.parseInt(r,10)||1,r=Math.max(0,r-t.length),Array(r+1).join("0")+t)});try{return new ze(t)}catch(o){if(o instanceof URIError)return null;throw o}}function ni(e,t,i){var r=0;i*=t,e=e.a;for(var a=[],n=0;n<e.length&&e[n].a;++n){var s=e[n].startTime,s=null!=s?s:r,o=e[n].b||0;if(0>o)if(o=e[n].a,n+1===e.length)var h=e[0].startTime+i-s,o=Math.ceil(h/o)-1;else o=Math.ceil((e[n+1].startTime-s)/o)-1;if(0<a.length&&s!=r){var h=s-r,l=a[a.length-1];l.debugInfo={endTime:r/t,delta:h/t},l.end=s}for(h=0;h<=o;++h)r=s+e[n].a,a.push({start:s,end:r}),s=r}return a}function si(e,t){this.a=e,this.b=t||null}function oi(e,t,i,r,a){this.startTime=e,this.endTime=t,this.url=i,this.a=null!=r?r:null,this.debugInfo=a||null}function hi(e,t,i){return new oi(t,i,e.url,null!=e.a?e.a:void 0)}function li(e,t){for(var i=e.length-1;0<=i;--i){var r=e[i];if(t>=r.startTime&&(null==r.endTime||t<r.endTime))return i}return-1}function ui(e,t){return e.map(function(e){return hi(e,e.startTime+t,null!=e.endTime?e.endTime+t:null)})}function di(){}function pi(e){this.a=e,this.aa=0,this.g=[],this.Qa=!1}function ci(e){if(0==e.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return e.a[0]}function fi(e,t){if(e.aa!=t.aa&&(t=new pi(ui(t.a,e.aa-t.aa))),0==e.length())e.a=t.a.slice(0);else if(0!=t.length()&&null!=e.w().endTime)if(null!=t.w().endTime&&t.w().endTime<e.w().endTime)e.Qa=!0;else{if(e.Qa=!1,e.w().endTime<=ci(t).startTime)var i=hi(e.w(),e.w().startTime,ci(t).startTime),i=e.a.slice(0,-1).concat([i]);else{var r;for(r=0;r<e.a.length&&!(e.a[r].endTime>=ci(t).startTime);++r);e.a[r].startTime<ci(t).startTime?(i=hi(e.a[r],e.a[r].startTime,ci(t).startTime),i=e.a.slice(0,r).concat([i])):(ci(e).startTime>ci(t).startTime||ci(t),i=e.a.slice(0,r))}e.a=i.concat(t.a)}}function yi(e,t,i,r){pi.call(this,e),this.i=t,this.C=i,this.h=r,this.j=this.i.b||this.i.a.reduce(function(e,t){return null==t.a?NaN:e+t.a},0)||0,this.b=this.v=this.f=null,gi(this)}function gi(e){if(Pi(e),0!=e.length()){e.length();var t=null!=e.w().endTime?e.w().endTime:e.w().startTime;if(e.i.c>e.h)e.f=t;else{var i=e.h-(e.i.c+e.C.start);0>i?e.f=t:i<Math.max(e.w().startTime,e.w().endTime||0)?(e.w(),e.f=t):e.f=i}e.v=e.w().startTime,e.b=ci(e).startTime}}function mi(e,t){if(Ti(e,t),null==e.f||null==e.v||null==e.b)return{start:0,end:0};var i=Number.POSITIVE_INFINITY;e.j&&(i=e.j);var r=t-e.h,a=e.f+r;return null!=e.i.f&&(a=a-e.b-e.i.f,0<a&&(e.b+=a)),e.b=Math.min(e.b,i),r=e.v+r,r<e.b?{start:e.b,end:e.b}:(r=0<e.length()?null!=e.w().endTime?Math.min(r,e.w().endTime):r:e.b,r=Math.max(r,e.b),r=Math.min(r,i),{start:e.b,end:r})}function Ti(e,t){if(Pi(e),null!=e.i.f)if(null==e.f)e.length();else{for(var i=e.f+(t-e.h),r=0,a=0;a<e.a.length;++a){var n=null;if(a<e.a.length-1?n=e.a[a+1].endTime:(n=e.a[a],n=null!=n.endTime?n.endTime+(n.endTime-n.startTime):null),!(null!=n&&n<i-e.i.f))break;++r}0<r&&e.a.splice(0,r)}}function Pi(e){if(e.j){for(var t=0,i=e.a.length-1;0<=i&&e.a[i].startTime>e.j;--i)++t;0<t&&e.a.splice(-t)}}function bi(e,t,i,r,a){var n,s=1,o=0;if(e.c>r)n=null;else{var h=e.i||0,l=e.f||0;n=i.a,n=n.b/n.a;var u=r-(e.c+t.start);0>u?n=null:(l=u-2*n-l,0>l&&(l=0),l=Math.ceil(l/n)*n,u-=n,0>u?n=null:(h=Math.floor(u/n)*n-h,0>h&&(h=0),h=Math.floor(h/n)*n,n={Wa:l/n+1,current:(h>=l?h:l)/n+1}))}if(n&&(s=n.Wa,o=n.current-n.Wa+1),s=ii(a,i,s,o),null==s)throw e=Error("Failed to generate SegmentReferences."),e.type="stream",e;yi.call(this,s,e,t,r),this.A=i,this.u=this.c=0<this.length()?e.c+t.start+this.w().endTime:null,this.m=n?n.current+1:null,this.D=a}function Vi(e,t){if(null!=e.c&&null!=e.u&&null!=e.m){var i=e.A.a,i=i.b/i.a,r=Math.floor((e.u+(t-e.h)-e.c)/i);if(0!=r){var a=ii(e.D,e.A,e.m,r);Array.prototype.push.apply(e.a,ui(a,e.aa)),e.c+=r*i,e.m+=r}}}function Mi(e,t,i,r,a){this.f=e,this.b=t,this.c=i,this.h=r,this.a=null,this.g=a}function Li(e,t,i,r,a){this.c=e,this.b=t,this.g=i,this.a=null,this.h=r,this.f=a}function vi(e,t,i,r,a){this.b=e,this.c=t,this.f=i,this.h=r,this.a=null,this.g=a}function $i(){this.I=Pa++,this.id=this.S=this.J=null,this.b=0,this.height=this.width=this.bandwidth=null,this.c=this.a="",this.switchReason=this.fbQualityClass=this.fbQualityLabel=null,this.f=[],this.fa=!1,this.O=!0}function Ai(e){var t=e.a||"";return e.c&&(t+='; codecs="'+e.c+'"'),t}function Si(){this.I=ba++,this.id=null,this.contentType=this.lang="",this.b=!1,this.o=[],this.a=[]}function Hi(e){for(var t=[],i=0;i<e.a.length;++i){var r=new wi;r.id=e.I,r.b=e.a[i],r.contentType=e.contentType,r.a=e.o.length?Ai(e.o[0]):"",t.push(r)}return t}function ki(){this.id=null,this.start=0,this.b=null,this.a=[]}function Ei(){this.b=!1,this.h=this.g=this.f=null,this.c=0,this.a=[],this.i=!1}function wi(){this.id=0,this.b=null,this.a=this.contentType=""}function Di(e,t,i,r,a,n,s){re.call(this,e),this.b=t,this.a=new Le(i,r,a,this,s),this.ca=s,this.g={},this.U=0,this.H=this.B=this.c=null,this.M=!1,this.i=this.C=null,this.v=!1,this.F=0,this.G=!1,this.m=null,this.h=!1,this.j=new me,this.u=this.f=!1,this.A=0,this.D=15,this.Y=this.N=this.P=!1,this.X=n,this.T=!1,this.l=null,this.K=this.Z=!1}function Ri(e,t,i){e.c&&!e.v&&(e.v=!0,Ni(e),Ee(e.a).then(Me(e,function(){var e=this.b.currentTime;return!t&&0<$e(this.a,e)&&0<=li(this.a.c,e)?o.resolve():i?ke(this.a,this.b.currentTime+i):(this.K=!0,He(this.a))})).then(Me(e,function(){this.v=!1,Oi(this,0)}))["catch"](Me(e,function(e){this.v=!1,"aborted"!=e.type&&(this.f?(e=N(e),this.dispatchEvent(e)):this.j.reject(e))})))}function _i(e){var t=e.Y&&e.b.paused?e.A:e.D;return e.F&&!e.b.paused&&(t=Math.max(Math.min(e.B.w().endTime-e.b.currentTime,e.F),e.D)),(e.P?e.h&&!e.b.paused:e.h)?Math.max(e.A,t):e.A}function Ii(e,t,i){e=e.a;var r=e.c.length;return e=0<r?e.c[r-1]:null,null!=e?null!=e.endTime?i.oa(e.endTime):null:i.oa(t)||(i.length()?i.w():null)}function Ci(e){if(!e.h&&null!=e.m){e.h=!0;var t=e.a,i=e.m,r=i-t.M;0!=r&&(t.c=ui(t.c,r),t.M=i),e.j.resolve(e.m)}}function xi(e,t,i){var r=t.a.split("/")[0];t=O({type:"adaptation",id:t.id,bubbles:!0,contentType:r,size:"video"!=r?null:{width:t.width,height:t.height},bandwidth:t.bandwidth,reason:i}),e.dispatchEvent(t)}function Bi(e){var t=O({type:"ended"});e.dispatchEvent(t)}function Oi(e,t){Ni(e),!t&&e.Z?o.resolve().then(e.lb.bind(e)):e.i=l(e.lb.bind(e),t)}function Ni(e){null!=e.i&&(u(e.i),e.i=null)}function Ui(e){for(var t=0;t<e.length;++t)for(var i=e[t],r=0;r<i.a.length;++r){for(var a=i.a[r],n=a,s=0;s<n.o.length;++s)se(Ai(n.o[s]))||(n.o.splice(s,1),--s);0==a.o.length&&(i.a.splice(r,1),--r)}for(t=0;t<e.length;++t)for(i=e[t],r=0;r<i.a.length;++r)i.a[r].o.sort(Fi)}function Fi(e,t){var i=e.bandwidth||Number.MAX_VALUE,r=t.bandwidth||Number.MAX_VALUE;return i<r?-1:i>r?1:0}function ji(e){this.a=e}function Qi(e){function t(e,t){return e.concat(t)}var i=e.a.map(function(e){return e.a}).reduce(t,[]).map(function(e){return e.o}).reduce(t,[]);return e=i.map(function(e){return e.J.create()}),o.all(e).then(function(e){for(var t={},r=0;r<i.length;++r)t[i[r].I]=e[r];return o.resolve(t)})}function Gi(e,t,i,r,a){var n=new Y;e.a.forEach(function(e,t){n.push(e.id||""+t,e)});var s=new Y;for(t.a.forEach(function(e,t){s.push(e.id||""+t,e)}),e=J(n),t=0;t<e.length;++t){var o=e[t],h=n.get(o);1<h.length||(o=s.get(o))&&0!=o.length&&1==o.length&&(zi(h[0],o[0],i,r,a),h[0].b=o[0].b)}}function zi(e,t,i,r,a){var n=new Y;e.a.forEach(function(e,t){n.push(e.id||""+t,e)});var s=new Y;for(t.a.forEach(function(e,t){s.push(e.id||""+t,e)}),e=J(n),t=0;t<e.length;++t){var o=e[t],h=n.get(o);1<h.length||(o=s.get(o))&&0!=o.length&&1==o.length&&Wi(h[0],o[0],i,r,a)}}function Wi(e,t,i,r,a){var n=new Y;e.o.forEach(function(e,t){n.push(e.id||""+t,e)});var s=new Y;t.o.forEach(function(e,t){s.push(e.id||""+t,e)}),t={};for(var o=J(n),h=0;h<o.length;++h){var l=o[h];t[l]=l;var u=n.get(l);1<u.length||((l=s.get(l))&&0!=l.length?1==l.length&&(qi(u[0],l[0],i,r),u[0].S=l[0].S,l[0].S=null,u[0].b=l[0].b):(a.push(u[0]),e.o.splice(e.o.indexOf(u[0]),1)))}for(o=J(s),h=0;h<o.length;++h)l=o[h],t[l]||(t[l]=l,l=s.get(l),e.o.push(l[0]))}function qi(e,t,i,r){e=i[e.I],r=r[t.I],t=e.length(),e.Pa(r)&&(r=e.length(),e.g.push(t!==r),50<e.g.length&&e.g.shift())}function Yi(e){this.b=e,this.a=null}function Ki(e,t){re.call(this,e),this.b=t,this.g=!0,this.h=this.f=null,this.c=new me,this.a=null}function Xi(){}function Ji(e,t,i,r,a,n,s,o,h){this.g=e,this.i=t,this.f=i,this.a=r,this.c=a,this.b=n,this.j=s,this.ha=null,this.h=o,this.l=h||null}function Zi(e,t){if(e.ha)return e.ha;var i=null;e.l&&(i=e.l.getOperationLogger("create_container_segment_index_source").start());var r=[Xt(e.a,null,null,e.l,i)];return"webm"==e.f&&r.push(Xt(e.c,null,null,e.l,i)),t&&e.b&&Xt(e.b,null,null,e.l),e.ha=o.all(r).then(Me(e,function(e){var t=e[0];e=e[1]||null;var r=null;if("mp4"==this.f?(r=new di,r=r.parse(new DataView(t),this.a.h,this.a.a,this.h,this.b)):"webm"==this.f&&(r=new Xi,r=r.parse(new DataView(t),new DataView(e),this.a.a,this.h)),!r)return t=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),t.type="stream",o.reject(t);var a;return a="dynamic"==this.g.type?new yi(r,this.g,this.i,this.j):new pi(r),i&&i.log(),o.resolve(a)})),e.ha}function er(e,t){this.a=e,this.l=t||null}function tr(e,t,i){for(var r=v()/1e3,a=0;a<t.a.length;++a)for(var n=t.a[a],s=0;s<n.b.length;++s){var o=n.b[s];if("text"!=o.contentType)for(var h=0;h<o.a.length;++h){var l=o.a[h],u=0,u=u+(l.g?1:0),u=u+(l.b?1:0),u=u+(l.a?1:0);0==u?(o.a.splice(h,1),--h):1!=u&&(l.g?(l.b=null,l.a=null):l.b&&(l.a=null))}}for(ir(t),a=0;a<t.a.length;++a)for(n=t.a[a],s=0;s<n.b.length;++s){for(h=o=n.b[s],l=null,u=0;u<h.a.length;++u){var d=h.a[u].f||"";l?d!=l&&(h.a.splice(u,1),--u):l=d}0==o.a.length&&(n.b.splice(s,1),--s)}for("dynamic"==t.type&&null==t.c&&(t.c=r),a=new Ei,"dynamic"==t.type&&(a.b=!0,a.f=t.g,a.g=new Yt(i,t.j||t.url),a.h=t.c),a.c=t.h||5,n=0;n<t.a.length&&(s=t.a[n],null!=s.start);++n)s=rr(e,t,s,r,i),a.a.push(s);return a}function ir(e){if(e.a.length){null==e.a[0].start&&(e.a[0].start=0);var t=function(e){return 0==e||!!e};"dynamic"==e.type&&(e.b=null),t(e.b)&&1==e.a.length&&!t(e.a[0].a)&&(e.a[0].a=e.b);for(var i=0,r=!0,a=0;a<e.a.length;++a){var n=e.a[a-1],s=e.a[a],o=e.a[a+1]||{start:e.b};!t(s.start)&&n&&t(n.start)&&t(n.a)&&(s.start=n.start+n.a),!t(s.a)&&t(o.start)&&(s.a=o.start-s.start),null!=s.start&&null!=s.a?i+=s.a:r=!1}t(e.b)||(a=e.a[e.a.length-1],r?e.b=i:t(a.start)&&t(a.a)?e.b=a.start+a.a:"dynamic"!=e.type&&(e.b=i))}}function rr(e,t,i,r,a){var n=new ki;n.id=i.id,n.start=i.start,n.b=i.a;var s=new Y;i.b.forEach(function(e){s.push(e.contentType||"",e)});for(var o=J(s),h=0;h<o.length;++h){var l=new Y;s.get(o[h]).forEach(function(e){l.push(e.group,e)});for(var u=J(l),d=0;d<u.length;++d){var p=new Y;l.get(u[d]).forEach(function(e){p.push(e.lang,e)});for(var c=J(p),f=0;f<c.length;++f){var y=p.get(c[f]),y=ar(e,t,i,y,r,a);n.a.push(y)}}}return n}function ar(e,t,i,a,n,s){r(a.every(function(e){return e.group==a[0].group&&(e.lang||"")==(a[0].lang||"")&&(e.contentType||"")==(a[0].contentType||"")}));var o=new Si,h=a.filter(function(e){return null!=e.id});h.length==a.length&&(o.id=h.map(function(e){return e.id}).sort().reduce(function(e,t){return e+","+t})),o.lang=a[0].lang||"",o.contentType=a[0].contentType||"",o.b=a.some(function(e){return e.c});for(var h={},l=0;l<a.length;++l)for(var u=a[l],d=0;d<u.a.length;++d){var p=u.a[d],c=or(e,p),f=o.a.slice(0);sr(c,f),0==f.length&&0<o.a.length||!(p=lr(e,t,i,p,n,s))||(o.o.push(p),o.a=f,h[p.I]=u)}if(o.a.some(function(e){return""==e.b}))return o.o.forEach(function(e){e.fa=!0}),o;for(e=nr(a),l=0;l<o.o.length;++l)p=o.o[l],u=h[p.I],u==e&&(p.fa=!0);return o}function nr(e){for(var t=null,i=null,r=0;r<e.length;++r)for(var a=e[r],n=0;n<a.a.length;++n){var s=a.a[n],s=(s.width||1)*(s.height||1)*(s.bandwidth||1);(null==t||s<t)&&(t=s,i=a)}return i}function sr(e,t){if(0==t.length)Array.prototype.push.apply(t,e);else for(var i=0;i<t.length;++i){for(var r=!1,a=0;a<e.length;++a){var n=t[i],s=e[a];if(n.b==s.b&&n.g==s.g&&n.m==s.m&&n.f==s.f&&n.h==s.h&&n.c==s.c&&n.j==s.j&&Ne(n.i,s.i)){r=!0,Fe(t[i],e[a].a);break}}r||(t.splice(i,1),--i)}}function or(e,t){var i=[];if(0==t.c.length)i.push(new Ue);else if(e.a)for(var r=0;r<t.c.length;++r)i.push.apply(i,hr(e,t.c[r]));return i}function hr(e,t){var i=[];if(2!=e.a.length)return[];var r=e.a(t.c||"",t.f);if(!(r&&r instanceof Array))return[];for(var a=0;a<r.length;++a){var n,s=r[a];if(n=new Ue,s){var o=z(s,"keySystem");if(null==o)throw Error("'keySystem' cannot be null.");n.b=o;var h=z(s,"licenseServerUrl");if(null!=h)n.g=h;else if(o)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");if(o=Q(s,"withCredentials"),null!=o&&(n.m=o),o=q(s,"licensePostProcessor",Function),null!=o&&(n.u=o),o=q(s,"licensePreProcessor",Function),null!=o&&(n.v=o),o=Q(s,"distinctiveIdentifierRequired"),null!=o&&(n.f=o),o=Q(s,"persistentStateRequired"),null!=o&&(n.h=o),o=z(s,"audioRobustness"),null!=o&&(n.c=o),o=z(s,"videoRobustness"),null!=o&&(n.j=o),o=q(s,"serverCertificate",Uint8Array),null!=o&&(n.i=o),o=q(s,"initData",Object)){if(s=q(o,"initData",Uint8Array),null==s)throw Error("'initData.initData' cannot be null.");if(o=z(o,"initDataType"),null==o)throw Error("'initData.initDataType' cannot be null.");n.a.push({initData:new Uint8Array(s.buffer),initDataType:o})}}0==n.a.length&&t.a&&t.a.psshBox&&Fe(n,[{initData:t.a.psshBox,initDataType:"cenc"}]),i.push(n)}return i}function lr(e,t,i,r,a,n){if(!r.s||0===r.s.length)return null;var s=null,o=1,h=0;if(r.g){if(s=r.f.split("/")[1],"mp4"!=s&&"webm"!=s)s=null;else{var l=r.g;("webm"!=s||l.c)&&(l.a||l.b&&l.b.a)?(o=l.b,o||(o=new ct,o.url=r.s,o.a=l.a?l.a.clone():null),h=dr(o,n),o=l.c?dr(l.c,n):null,l.f?(l=l.f,l=new Yt(n,r.s,l.ra,l.end)):l=null,t=new Ji(t,i,s,h,o,l,a,n,e.l),i=new si(o),a=new $i,a.J=t,a.S=i,s=a):s=null}o=r.g.h,h=r.g.g}else if(r.b)e=r.b,!e.c&&!e.f&&1<e.b.length?s=null:e.c||i.a||e.f||1!=e.b.length?e.f&&0===e.f.a.length?s=null:(e=e.h?dr(e.h,n):null,t=new Li(t,i,r,a,n),i=new si(e),a=new $i,a.J=t,a.S=i,s=a):s=null,o=r.b.a,h=r.b.g;else if(r.a){e:if(s=r.a,o=0+(s.f?1:0),o+=s.c?1:0,o+=s.b?1:0,0==o?o=!1:(1!=o&&(s.f?(s.c=null,s.b=null):s.c&&(s.b=null)),o=!0),o){if(o=null,s.g&&(o=(s=r.a.g)?ur(r,s,ft):null,!o)){s=null;break e}s=o?dr(o,n):null,o=r.a,o.f?(o=r.f.split("/")[1],"mp4"!=o&&"webm"!=o?t=null:("webm"!=o||s)&&ri(n,r,1,0)&&(h=(h=r.a.f)?ur(r,h,ct):null)?(h=dr(h,n),t=new Ji(t,i,o,h,s,null,a,n,e.l)):t=null):t=o.h?o.c?new vi(t,i,r,a,n):o.b?"dynamic"!=t.type&&null==i.a?null:new Mi(t,i,r,a,n):null:null,t?(i=new si(s),a=new $i,a.J=t,a.S=i,s=a):s=null}else s=null;o=r.a.a,h=r.a.i}else"text"==r.f.split("/")[0]&&(s=new $i,s.J=new Yi(new Yt(n,r.s)));if(!s)return null;for(s.id=r.id,h&&(s.b=-1*h/o),s.bandwidth=r.bandwidth,s.width=r.width,s.height=r.height,s.a=r.f||"",s.c=r.h||"",s.fbQualityLabel=r.fbQualityLabel||null,s.fbQualityClass=r.fbQualityClass||null,t=0;t<r.c.length;++t)i=r.c[t],i.b&&s.f.push(i.b);return s}function ur(e,t,i){return(t=ai(t,e.id,null,e.bandwidth,null))?(i=new i,i.url=Kt(e.s,t),i):null}function dr(e,t){var i=e.url,r=0,a=null;return e.a&&(r=e.a.ra,a=e.a.end),new Yt(t,i,r,a)}function pr(){this.a=this.b=null,this.f=new Z,this.c=Number.POSITIVE_INFINITY,this.i=!0,this.g=!1}function cr(e){var t=e.a.M();if(0==t.length)return null;t.sort(M);var i;e:{i=e.a.Ka();for(var r=0;r<i.length;++r)if(i[r].active){i=i[r];break e}i=null}i=i?i.bandwidth:0,e=e.b.getBandwidth();for(var r=t[0],a=0;a<t.length;++a){var n=t[a],s=a+1<t.length?t[a+1]:{bandwidth:Number.POSITIVE_INFINITY};if(n.bandwidth&&(s=(s.bandwidth+i)/.85,e>=(n.bandwidth+i)/.95&&e<=s&&(r=n,r.active)))break}return r}function fr(e,t,i){re.call(this,null),this.a=e,this.Z=t,this.j=new Z,this.h=new MediaSource,this.F=this.c=null,this.La=0,this.eb=!1,this.Ia=0,this.l=null,this.Aa=3,this.Ga=this.fb=!1,this.Fa=0,this.R=new zt,this.rb=1,this.ob=1/0,this.bb=this.$a=!1,this.T=this.Ea=null,this.qa=this.gb=this.P=!1,this.f=new Y,this.m=i,this.m.initialize(t,this),this.D=!1,this.C="en",this.ca=!1,this.A=new me,this.Ha=new me,this.i=new g,this.B=null,this.xb=1,this.b={},this.U=new me,this.Da=0,this.pb=15,this.v=null,this.nb=!1,this.hb=0,this.Va=!1,this.u={},this.N=this.L=this.H=null,this.g={},this.Y=!1,this.Bb=null}function yr(t,i){if(t.l){var r=t.l.getOperationLogger("media_source_open").start();t.Ha.then(function(){r.log()})}ee(t.j,t.h,"sourceopen",t.Mb.bind(t)),i.src=e.URL.createObjectURL(t.h)}function gr(e,t,i){var r;return e.l&&(r=e.l.getOperationLogger("source_attach").start()),e.D?(e.ba=t,e.c=i,e.F=null,ee(e.j,e.c,"loadedmetadata",e.Lb.bind(e)),ee(e.j,e.Z,"bandwidth",e.Yb.bind(e)),e.a.b&&(ee(e.j,t,"bufferingStart",e.Jb.bind(e)),ee(e.j,t,"bufferingEnd",e.Ib.bind(e))),Ar(e).then(Me(e,function(){this.A&&this.A.resolve(),this.Ya()}))["catch"](Me(e,function(e){this.A&&this.A.reject(e)})),e.A.then(function(){r&&r.log()})):(e=Error("Cannot call attach() right now."),e.type="app",r&&r.setError(e).log(),o.reject(e))}function mr(e){var t=O({type:"manifestwrapped",bubbles:!0});e.dispatchEvent(t)}function Tr(e,t){if(null!=e.a.f){var i=Math.max(e.a.f,e.Aa),i=Math.max(i-t,0),r=e.kb.bind(e,!1);if(!i&&e.g.useMicroTaskTimeouts)return o.resolve().then(r);e.H=l(r,1e3*i)}}function Pr(e,t){var i=t.a.split("/")[0],r=e.b[i];if(r&&r.ka()==t){var a=e.f.get(t.a.split("/")[0]).map(function(e){return e.o}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.fa&&e.O});if(0==a.length)return i=Error("All usable streams have been removed from the manifest."),i.type="app",i=N(i),void e.dispatchEvent(i);e.u[i].vb==t&&delete e.u[i],r.sa(a[0],!0),t.destroy()}t.destroy()}function br(e){e=e.M();for(var t=0;t<e.length;t++)if(e[t].active)return e[t]}function Vr(e){return e.fb?Number(e.g.streamBufferSize):Number(e.g.initialStreamBufferSize)}function Mr(e,t){var i=e.b.text;i&&i.xa(t)}function Lr(e){if(e.i){for(var t=!1,i=0;i<e.a.a.length;++i)for(var r=e.a.a[i],a=0;a<r.a.length;++a){var n=r.a[a];if("video"==n.contentType)for(var s=0;s<n.o.length;++s){var o=n.o[s],h=o.O;o.O=!0,e.i.maxWidth&&o.width>e.i.maxWidth&&(o.O=!1),e.i.maxHeight&&o.height>e.i.maxHeight&&(o.O=!1),e.i.minHeight&&o.height<e.i.minHeight&&(o.O=!1),e.i.maxBandwidth&&o.bandwidth>e.i.maxBandwidth&&(o.O=!1),e.i.minBandwidth&&o.bandwidth<e.i.minBandwidth&&(o.O=!1),h!=o.O&&(t=!0)}}0!=K(e.f).length&&t&&(t=O({type:"trackschanged",bubbles:!0}),e.dispatchEvent(t),0<e.M().length||(t=Error("The application has restricted all video tracks!"),t.type="app",t=N(t),e.dispatchEvent(t)))}}function vr(e,t,i,r,a,n){if(!e.f.a.hasOwnProperty(t)||!e.b[t])return!1;for(var s=e.f.get(t),o=0;o<s.length;++o)for(var h=s[o],l=0;l<h.o.length;++l){var u=h.o[l];if(u.I==i)return!(!u.fa||!u.O)&&("text"==t||e.Va?(e.b[t].sa(u,r,a,n),!0):(i=e.u[t],e.u[t]={vb:u,Sa:null!=i&&i.Sa||r,Ta:null!=i&&i.Ta||a,switchReason:n},!0))}return!1}function $r(e,t){for(var i=0;2>=i;++i)for(var r=0;r<t.length;++r){var a=t[r];if(U(i,e.C,a.lang))return t.splice(r,1),void t.splice(0,0,a)}for(r=0;r<t.length;++r)if(a=t[r],a.b){t.splice(r,1),t.splice(0,0,a);break}}function Ar(e){var t;e.l&&(t=e.l.getOperationLogger("start_streams").start());for(var i=[],r=["audio","video","text"],a=0;a<r.length;++a){var n=r[a];e.f.a.hasOwnProperty(n)&&i.push(e.f.get(n)[0])}for(var s=Sr(e,i),a=0;a<r.length;++a)if(n=r[a],e.f.a.hasOwnProperty(n)&&!s[n])return e=Error("Unable to select an initial "+n+" stream: all "+n+" streams have been restricted (by the application or by the key system)."),e.type="stream",t&&t.setError(e).log(),o.reject(e);return i=j(s).map(function(e){return e.J.create()}),i.push(e.Ha),o.all(i).then(Me(e,function(e){return e.pop(),e.every(function(e){return e.length()})&&(e=Nr(this,e))?Hr(this,s)?(this.m.start(),wr(this,s,e),o.resolve()):(e=Error("Failed to create Stream objects."),e.type="stream",o.reject(e)):(e=Error("Some streams are not available."),e.type="stream",o.reject(e))})).then(function(){
t&&t.log()})["catch"](Me(e,function(e){return"aborted"!=e.type?(Object.keys(this.b),this.a.b?(v()<this.a.h?(e=Math.max(this.a.h-Date.now()/1e3,this.Aa),this.H=l(this.kb.bind(this,!0),1e3*e)):Tr(this,0),t&&t.log(),o.resolve()):(t&&t.setError(e).log(),o.reject(e))):void(t&&t.setError(e).log())}))}function Sr(e,t){for(var i={},r=0;r<t.length;++r){var a=t[r],n=null;if("video"==a.contentType){var s=e.m.getInitialVideoTrackId();if(null==s)continue;if(n=a.o.filter(function(e){return e.I==s}),0==n.length)continue;n=n[0]}else if("audio"==a.contentType)if(s=e.m.getInitialAudioTrackId(),n=a.o.filter(function(e){return e.I==s}),0==n.length){if(n=a.o.filter(function(e){return e.fa&&e.O}),0==n.length)continue;n=a.o[Math.floor(n.length/2)]}else n=n[0];else 0<a.o.length&&(n=a.o[0]);i[a.contentType]=n}return i}function Hr(e,t){var i,r={};for(i in t){var a=t[i],a="text"==i?new Ki(e,e.c):kr(e,a);if(!a)return j(r).forEach(function(e){e.destroy()}),!1;r[i]=a}return e.b=r,!0}function kr(e,t){var i=new Di(e,e.c,e.h,Ai(t),e.Z,e.Bb,e.R);return i.L(e.g),i}function Er(e,t){e.c.currentTime=t,e.B=t}function wr(e,t,i){e.xb=e.c.playbackRate,e.c.playbackRate=0,Rr(e,i);var r;if(e.N&&e.N<=i.end&&e.N>=i.start?r=e.N:e.a.b?(r=i.end,e.nb=!0):r=i.start,ee(e.j,e.c,"seeking",e.Qb.bind(e)),e.c.currentTime!=r)if(e.$a)0!==e.c.readyState?Er(e,r):e.F=r;else try{Er(e,r)}catch(a){e.F=r}_r(e,i.start,i.end);var n,s=[];for(n in e.b){i=e.b[n],Me(e,function(e){s.push(e.ub(this.U).then(Me(this,function(t){var i=e.va();return i>this.La&&(this.La=i),t})))})(i),ee(e.j,i,"ended",e.Rb.bind(e)),r=t[n];var h=e.m.getInitialSwitchReason()||void 0;i.sa(r,!1,void 0,h)}o.all(s).then(e.Hb.bind(e))["catch"](Me(e,function(e){"destroy"!=e.type&&(e=N(e),this.dispatchEvent(e))})),Mr(e,e.ca)}function Dr(e,t,i){if((t=Nr(e,t))&&(Rr(e,t),_r(e,t.start,t.end)),0!=i)i=e.c.currentTime+i,e.c.currentTime=i,e.B=i;else if(e.nb&&t){if(i=t.end,e.gb&&(t=(t=e.b.video)?t.wa():null)){t=t.B();for(var r=0;r<t.length;r++){var a=t[r];if(i>=a.startTime&&i<a.endTime){i=a.startTime;break}}}Math.abs(i-e.c.currentTime)>=e.hb&&(e.c.currentTime=i)}e.c.playbackRate=e.xb,e.a.b&&null!=e.a.f&&Tr(e,0),Ur(e),e.U.resolve()}function Rr(e,t){if(e.a.b)isNaN(e.h.duration)&&(e.h.duration=t.end+2592e3);else if(isNaN(e.h.duration)||t.end>e.h.duration){e.h.duration=t.end;for(var i=0;i<e.h.sourceBuffers.length;++i)e.h.sourceBuffers[i].appendWindowEnd=t.end}}function _r(e,t,i){t=O({type:"seekrangechanged",bubbles:!0,start:t,end:i}),e.dispatchEvent(t)}function Ir(e,t,i,r){return!(t>=i-.01)&&(t=0,e.a.b&&(t=.5,Cr(e,i+t)||(t=e.a.c)),e.c.currentTime=Math.min(i+t,r),!0)}function Cr(e,t){for(var i in e.b)if(!e.b[i].tb(t))return!1;return!0}function xr(e){return!!(e.a.i&&e.c.currentTime+.5>e.Da)}function Br(e){return j(e.b).map(function(e){return e.wa()}).filter(function(e){return null!=e})}function Or(e){return Math.max(e.a?e.a.c:1,e.eb?e.g.streamBufferSize||0:0)}function Nr(e,t){for(var i=0,r=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,n=0;n<t.length;++n){var s=t[n].Na(),i=Math.max(i,s.start);null!=s.end&&(r=Math.min(r,s.end)),t[n].length()&&(a=Math.min(a,t[n].w().endTime))}if(r==Number.POSITIVE_INFINITY){if(r=e.a.a[0],!r.b)return null;r=(r.start||0)+r.b}return e.a.b&&(n=Or(e),r=Math.max(r-n,i)),i>r?null:(r=Math.floor(1e5*r)/1e5,{start:i,end:r,w:a})}function Ur(e){e.a.b&&(e.L=l(e.Sb.bind(e),1e3))}function Fr(e){for(var t in e.b)e.b[t].L(e.g)}function jr(e,t,i,r){i||(i=new fe),r||(r=new pr),fr.call(this,null,i,r),"string"==typeof e?this.wb=e:this.Ja=e,this.K=null,this.X=t,this.pa=[],this.Xa=[],this.Za=[],this.Ba=0,this.G=null}var Qr,Gr=this;a("error"),a("warn"),a("info"),a("log"),a("debug");var zr=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,Wr={};t("shaka.player.AudioTrack.compare",function(e,t){return e.lang<t.lang?-1:e.lang>t.lang?1:e.bandwidth<t.bandwidth?-1:e.bandwidth>t.bandwidth?1:0}),g.prototype.clone=function(){var e=new g;return e.maxHeight=this.maxHeight,e.minHeight=this.minHeight,e.maxWidth=this.maxWidth,e.maxBandwidth=this.maxBandwidth,e.minBandwidth=this.minBandwidth,e},t("shaka.player.TextStyle",m);var qr=[255,255,255],Yr=[0,0,0];m.StandardColors={WHITE:qr,BLACK:Yr,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var Kr=1;m.StandardOpacities={OPAQUE:Kr,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var Xr=[];m.EdgeStyles={NONE:Xr,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]},t("shaka.player.TextTrack.compare",function(e,t){return e.lang<t.lang?-1:e.lang>t.lang?1:0}),t("shaka.player.VideoTrack.compare",M);var Jr,Zr=0,ea=1;x.prototype.sample=function(e,t){var i=Math.pow(this.c,e);this.b=t*(1-i)+i*this.b,this.a+=e};var ta=e.CustomEvent;"function"!=typeof ta&&(ta=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i},ta.prototype=e.Event.prototype);var ia=1,ra=2,aa={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};Y.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},Y.prototype.set=function(e,t){this.a[e]=t},Y.prototype.get=function(e){return(e=this.a[e])?e.slice():null},Z.prototype.destroy=function(){te(this),this.a=null},Z.prototype.ta=function(e,t){for(var i=this.a.get(t)||[],r=0;r<i.length;++r){var a=i[r];a.target==e&&(a.ta(),X(this.a,t,a))}},ie.prototype.ta=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)},t("shaka.util.FakeEventTarget",re),Qr=re.prototype,Qr.addEventListener=function(e,t,i){i||this.Ca.push(e,t)},Qr.removeEventListener=function(e,t,i){i||X(this.Ca,e,t)},Qr.dispatchEvent=function(e){if(e.hasOwnProperty("srcElement")||(delete e.srcElement,Object.defineProperty(e,"srcElement",{get:function(){return null}})),e.hasOwnProperty("target"))e.target=this;else{delete e.target;var t=this;Object.defineProperty(e,"target",{get:function(){return t},set:function(e){t=e}})}if(e.hasOwnProperty("currentTarget"))e.currentTarget=null;else{delete e.currentTarget;var i=null;Object.defineProperty(e,"currentTarget",{get:function(){return i},set:function(e){i=e}})}return ae(this,e)},Qr.Ra=!1,Qr.ja=function(e,t){return this.dispatchEvent(O({type:"debug/shakaEvent",bubbles:!0,detail:{type:e,event:t}}))},i(ne,re),t("shaka.player.Player",ne),ne.version="v1.6.4-fb",ne.isBrowserSupported=function(){return!!e.MediaSource&&!!e.Uint8Array},ne.prototype.ea=function(){var e={},t=this.c;if(t){var i=t.cb();e.BandwidthEstimator=i.BandwidthEstimator;var r=i.VideoSourceStream;r&&(e.VideoSourceStream=r,(r=e.VideoBufferManager=r.ea().SourceBufferManager)&&(e.VideoSourceBuffer=r.ea().SourceBuffer)),(r=e.AudioSourceStream=i.AudioSourceStream)&&(r=e.AudioBufferManager=r.ea().SourceBufferManager)&&(e.AudioSourceBuffer=r.ea().SourceBuffer),e.TextSourceStream=i.TextSourceStream,e.getManifest=t.ab.bind(t)}else e.getManifest=function(){};return e.dc=!0,e},ne.prototype.getDebug=ne.prototype.ea,ne.prototype.N=function(e){this.G=e},ne.prototype.setResumeAfterBuffering=ne.prototype.N,ne.isTypeSupported=se,ne.setTextStyle=function(e){var t=document.getElementById("ShakaPlayerTextStyle");for(t||(t=document.createElement("style"),t.id="ShakaPlayerTextStyle",document.head.appendChild(t)),t=t.sheet;t.cssRules.length;)t.deleteRule(0);t.insertRule("::cue { "+T(e)+" }",0)},ne.prototype.destroy=function(){return this.D().then(Me(this,function(){this.f.destroy(),this.b=this.f=null}))["catch"](function(){})},ne.prototype.destroy=ne.prototype.destroy,ne.prototype.D=function(){return this.j=!0,oe(this)},ne.prototype.unload=ne.prototype.D,ne.prototype.Z=function(e){return he(this,e)},ne.prototype.load=ne.prototype.Z,Qr=ne.prototype,Qr.Kb=function(){d("load"),this.f.ta(this.b,"timeupdate")},Qr.Xb=function(){if(this.b.error){var e=this.b.error.code;e!=MediaError.MEDIA_ERR_ABORTED&&(e=Error(na[e]||"Unknown playback error."),e.type="playback",e=N(e),this.dispatchEvent(e))}},Qr.Ob=function(){n("playing"),this.l&&this.l.getEventLogger("playing").setState("playing").log(),!this.g&&0>this.m&&(this.b.playbackRate=0,this.A(this.b.currentTime,Date.now(),this.m)),this.h&&!this.F&&ce(this)},Qr.Nb=function(){this.l&&this.l.getEventLogger("pause").setState("paused").log(),d("playing"),ue(this)},Qr.Pb=function(e){this.B=e.start},Qr.Wb=function(){return this.c?this.c.M():[]},ne.prototype.getVideoTracks=ne.prototype.Wb,ne.prototype.U=function(){return this.c?this.c.Ka():[]},ne.prototype.getAudioTracks=ne.prototype.U,ne.prototype.Y=function(){return this.c?this.c.zb():[]},ne.prototype.getTextTracks=ne.prototype.Y,ne.prototype.selectVideoTrack=function(e,t){return!!this.c&&this.c.selectVideoTrack(e,void 0==t||t)},ne.prototype.selectVideoTrack=ne.prototype.selectVideoTrack,ne.prototype.ca=function(e,t,i){return!!this.c&&vr(this.c,"audio",e,void 0==t||t,i)},ne.prototype.selectAudioTrack=ne.prototype.ca,ne.prototype.pa=function(e){return!!this.c&&vr(this.c,"text",e,!1)},ne.prototype.selectTextTrack=ne.prototype.pa,ne.prototype.T=function(e){this.c&&Mr(this.c,e)},ne.prototype.enableTextTrack=ne.prototype.T,ne.prototype.M=function(e){ue(this),0<=e?this.b.playbackRate=e:this.b.paused||(this.b.playbackRate=0,this.A(this.b.currentTime,Date.now(),e)),this.m=e},ne.prototype.setPlaybackRate=ne.prototype.M,ne.prototype.K=function(){return this.m},ne.prototype.getPlaybackRate=ne.prototype.K,ne.prototype.qa=function(e){this.C=e},ne.prototype.setPlaybackStartTime=ne.prototype.qa,ne.prototype.H=function(){return!!this.c&&!!this.c.Ab()},ne.prototype.isLive=ne.prototype.H,ne.prototype.P=function(e){if(e){var t=Q(e,"enableAdaptation");null!=t&&(this.a.enableAdaptation=t),t=Q(e,"endBufferingOnPlaying"),null!=t&&(this.F=t),t=Q(e,"usePlaybackRateForBuffering"),null!=t&&(this.u=t),t=G(e,"streamBufferSize",0),null!=t&&(this.a.streamBufferSize=t),t=G(e,"dynamicStreamBufferSize",0),null!=t&&(this.a.dynamicStreamBufferSize=t),t=Q(e,"addCdnDebugQueryParameters"),null!=t&&(this.a.addCdnDebugQueryParameters=t),t=G(e,"initialStreamBufferSize",0),null!=t&&(this.a.initialStreamBufferSize=t),t=Q(e,"includeStreamBufferSizeInStartOffset"),null!=t&&(this.a.includeStreamBufferSizeInStartOffset=t),t=G(e,"jumpToLiveThreshold"),null!=t&&(this.a.jumpToLiveThreshold=t),t=G(e,"liveStreamEndTimeout",0),null!=t&&(this.a.liveStreamEndTimeout=t),t=G(e,"licenseRequestTimeout",0),null!=t&&(this.a.licenseRequestTimeout=t),t=G(e,"mpdRequestTimeout",0),null!=t&&(this.a.mpdRequestTimeout=t),t=G(e,"minMpdRefreshInterval",0),null!=t&&(this.a.minMpdRefreshInterval=t),t=Q(e,"enableLiveInterruptionDetection"),null!=t&&(this.a.enableLiveInterruptionDetection=t),t=Q(e,"enableManifestDebug"),null!=t&&(this.a.enableManifestDebug=t,re.prototype.Ra=t,t||(re.prototype.ja=function(){})),t=Q(e,"resolveVideoTimeUpdateOnFragmentedTimeRanges"),null!=t&&(this.a.resolveVideoTimeUpdateOnFragmentedTimeRanges=t),t=G(e,"liveInterruptionConsecutiveUpdatesWithoutChange"),null!=t&&(this.a.liveInterruptionConsecutiveUpdatesWithoutChange=t),t=G(e,"liveInterruptionConsecutiveUpdatesWithChange"),null!=t&&(this.a.liveInterruptionConsecutiveUpdatesWithChange=t),t=Q(e,"reappendInitSegmentAfterAbort"),null!=t&&(this.a.reappendInitSegmentAfterAbort=t),t=Q(e,"liveSendPushHeaders"),null!=t&&(this.a.liveSendPushHeaders=t),t=G(e,"liveMaxManifestFetchesWithPush"),null!=t&&(this.a.liveMaxManifestFetchesWithPush=t),t=G(e,"liveMaxSegmentsToPush"),null!=t&&(this.a.liveMaxSegmentsToPush=t),t=G(e,"segmentRequestTimeout",0),null!=t&&(this.a.segmentRequestTimeout=t),t=z(e,"preferredLanguage"),null!=t&&(this.a.preferredLanguage=t),t=q(e,"restrictions",g),null!=t&&(this.a.restrictions=t.clone()),t=e.liveInitialPushRepresentation,null!=t&&(this.a.liveInitialPushRepresentation=t),t=e.liveAudioPushRepresentation,null!=t&&(this.a.liveAudioPushRepresentation=t),t=e.useInlineInitSegment,null!=t&&(this.a.useInlineInitSegment=t),t=Q(e,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation"),null!=t&&(ca=!t),t=Q(e,"currentTimeDuringReadyStateZeroThrows"),null!=t&&(this.a.currentTimeDuringReadyStateZeroThrows=t),t=G(e,"liveDataFetchMaxRetries"),null!=t&&(this.a.liveDataFetchMaxRetries=t),t=G(e,"liveSourceBufferClearMaxRetries"),null!=t&&(this.a.liveSourceBufferClearMaxRetries=t),t=Q(e,"useLongCacheForManifest"),null!=t&&(this.a.useLongCacheForManifest=t),t=Q(e,"jumpToEarliestPositionInCurrentBlock"),null!=t&&(this.a.jumpToEarliestPositionInCurrentBlock=t),t=Q(e,"ignoreMinBufferTime"),null!=t&&(this.a.ignoreMinBufferTime=t),t=G(e,"playheadFragmentedGapDiffAllowance"),null!=t&&(this.a.playheadFragmentedGapDiffAllowance=t),t=Q(e,"fixBufferingGoalDetermination"),null!=t&&(this.a.fixBufferingGoalDetermination=t),t=Q(e,"skipEmptySegments"),null!=t&&(this.a.skipEmptySegments=t),(e=Q(e,"useMicroTaskTimeouts"))&&(this.a.useMicroTaskTimeouts=e),this.c&&this.c.yb(this.a)}},ne.prototype.configure=ne.prototype.P,ne.prototype.X=function(){return this.a},ne.prototype.getConfiguration=ne.prototype.X,ne.prototype.A=function(e,t,i){this.g=null;var r=(Date.now()-t)/1e3*i;this.b.currentTime<this.B+(this.H()?1:.05)?this.b.pause():(r=Math.max(this.B,e+r),this.b.currentTime=r,this.g=l(this.A.bind(this,e,t,i),250))},ne.prototype.L=function(){if(de(this),!this.b.ended&&!this.b.seeking){var e=this.b.buffered,t=e.length?e.end(e.length-1):0,e=Math.max(t-this.b.currentTime,0),i=this.b.currentTime,r=this.b.duration,r=isNaN(r)?0:Math.max(r-.05,0),t=t>=r||i>=r;this.h?(e>Vr(this.c)||xr(this.c))&&(ce(this),this.G&&!this.u&&this.b.play()):(!this.b.paused&&!t&&.5>e&&(this.h=!0,this.u?this.b.playbackRate=0:this.b.pause(),this.l&&!this.i&&(e=this.b.buffered,e=e.length?e.end(e.length-1):0,e=Math.max(e-this.b.currentTime,0),e=1e3*(Vr(this.c)-e),this.i=this.l.getOperationLogger("buffering").setLength(Math.round(e)).start()),n("buffering"),this.dispatchEvent(O({type:"bufferingStart"}))),xr(this.c)&&ce(this))}};var na={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};i(fe,re),t("shaka.util.EWMABandwidthEstimator",fe),fe.prototype.sample=function(e,t,i,r){if(c.changeAbrAudioExclusionLogic?i:!(65536>t)){if(c.useResourceTimingEntryForBandwidth){if(!r)return;if(e=r.timeToLastByte,0>e)return}e=Math.max(e,50),t=8e3*t/e,e/=1e3,this.a.sample(e,t,r),this.h.sample(e,t,r),this.dispatchEvent(O({type:"bandwidth"})),this.g=Date.now()}},fe.prototype.getBandwidth=function(){return.5>this.a.a?this.f:Math.min(B(this.a),B(this.h))},fe.prototype.getFastMovingBandwidth=function(){return.5>this.a.a?this.f:B(this.a)},fe.prototype.getDataAge=function(){return(Date.now()-this.g)/1e3},fe.prototype.supportsCaching=function(){return!1},i(ye,fe),t("shaka.util.EWMACacheBandwidthEstimator",ye),ye.prototype.sample=function(e,t,i,r){e<=this.c&&8e3*t/e>this.b||fe.prototype.sample.call(this,e,t,i,r)},ye.prototype.supportsCaching=function(){return 1/0!==this.b&&!!this.c},i(ge,fe),t("shaka.util.EWMASignedURLBandwidthEstimator",ge),ge.prototype.supportsCaching=function(){return!0},me.prototype.destroy=function(){this["catch"](function(){});var e=Error("Destroyed!");e.type="destroy",this.reject(e)},Te.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=!0,this.a.unshift(function(){}),be(this,void 0)},Te.prototype.end=function(){this.a.splice(1)},i(Le,re),Le.prototype.ea=function(){return{SourceBuffer:this.a}};var sa=1/60;Le.prototype.destroy=function(){Ee(this)["catch"](function(){}),this.f&&this.f.destroy(),this.c=this.b=this.f=null,this.C.destroy(),this.v=this.a=this.C=null},Le.prototype.h=function(){if(this.f){if("open"==this.v.readyState){var e=Error("Previous operation aborted.");e.type="aborted",this.f.reject(e),this.a.abort(),this.H&&(this.A=!0),this.f=new me}return this.f}return o.resolve()},Le.prototype.T=function(){this.f&&(this.i&&(ve(this,"SegmentAppended",this.i),this.i=null),this.f.resolve(),this.f=null)},t("shaka.util.Uint8ArrayUtils.toString",Ce),t("shaka.util.Uint8ArrayUtils.fromString",xe),t("shaka.util.Uint8ArrayUtils.toBase64",function(t,i){var r=void 0==i||i,a=e.btoa(Ce(t)).replace(/\+/g,"-").replace(/\//g,"_");return r?a:a.replace(/=*$/,"")}),t("shaka.util.Uint8ArrayUtils.fromBase64",Be),t("shaka.util.Uint8ArrayUtils.fromHex",function(t){for(var i=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)i[r/2]=e.parseInt(t.substr(r,2),16);return i}),t("shaka.util.Uint8ArrayUtils.toHex",Oe),t("shaka.player.DrmSchemeInfo",Qe),Qe.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1},Qe.PersistentState={OPTIONAL:0,REQUIRED:1},Qe.createUnencrypted=function(){return new Qe(0,0,0,null)};var oa=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Qr=ze.prototype,Qr.$="",Qr.ia="",Qr.V="",Qr.la=null,Qr.W="",Qr.ga="",Qr.toString=function(){var e=[],t=this.$;if(t&&e.push(Xe(t,ha,!0),":"),t=this.V){e.push("//");var i=this.ia;i&&e.push(Xe(i,ha,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.la,null!=t&&e.push(":",String(t))}return(t=this.W)&&(this.V&&"/"!=t.charAt(0)&&e.push("/"),e.push(Xe(t,"/"==t.charAt(0)?ua:la,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.ga)&&e.push("#",Xe(t,pa)),e.join("")},Qr.resolve=function(e){var t=this.clone();"data"===t.$&&(t=new ze);var i=!!e.$;i?We(t,e.$):i=!!e.ia,i?t.ia=e.ia:i=!!e.V,i?t.V=e.V:i=null!=e.la;var r=e.W;if(i)qe(t,e.la);else if(i=!!e.W){if("/"!=r.charAt(0))if(this.V&&!this.W)r="/"+r;else{var a=t.W.lastIndexOf("/");-1!=a&&(r=t.W.substr(0,a+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){for(var a=0==r.lastIndexOf("/",0),r=r.split("/"),n=[],s=0;s<r.length;){var o=r[s++];"."==o?a&&s==r.length&&n.push(""):".."==o?((1<n.length||1==n.length&&""!=n[0])&&n.pop(),a&&s==r.length&&n.push("")):(n.push(o),a=!0)}r=n.join("/")}}return i?t.W=r:i=""!==e.a.toString(),i?Ye(t,e.a.clone()):i=!!e.ga,i&&(t.ga=e.ga),t},Qr.clone=function(){return new ze(this)};var ha=/[#\/\?@]/g,la=/[\#\?:]/g,ua=/[\#\?]/g,da=/[\#\?@]/g,pa=/#/g;Ze.prototype.a=null,Ze.prototype.c=null,Ze.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var e,t=[];for(e in this.a)for(var i=encodeURIComponent(e),r=this.a[e],a=0;a<r.length;a++){var n=i;""!==r[a]&&(n+="="+encodeURIComponent(r[a])),t.push(n)}return this.b=t.join("&")},Ze.prototype.clone=function(){var e=new Ze;if(e.b=this.b,this.a){var t,i={};for(t in this.a)i[t]=this.a[t].concat();e.a=i,e.c=this.c}return e},t("shaka.dash.mpd.parseMpd",tt),pt.prototype.clone=function(){var e=new pt;return e.s=Et(this.s),e.h=this.h,e.g=this.g,e.a=wt(this.a),e.f=wt(this.f),e.b=wt(this.b),e.c=wt(this.c),e},ct.prototype.clone=function(){var e=new ct;return e.url=Et(this.url),e.a=wt(this.a),e},ft.prototype.clone=function(){var e=new ft;return e.url=Et(this.url),e.a=wt(this.a),e},yt.prototype.clone=function(){var e=new yt;return e.s=Et(this.s),e.a=this.a,e.g=this.g,e.c=this.c,e.i=this.i,e.h=wt(this.h),e.b=Et(this.b)||[],e.f=wt(this.f),e},gt.prototype.clone=function(){var e=new gt;return e.b=Et(this.b),e.a=wt(this.a),e},mt.prototype.clone=function(){var e=new mt;return e.a=this.a,e.i=this.i,e.b=this.b,e.j=this.j,e.h=this.h,e.f=this.f,e.g=this.g,e.c=wt(this.c),e},Tt.prototype.clone=function(){var e=new Tt;return e.a=Et(this.a)||[],e},Pt.prototype.clone=function(){var e=new Pt;return e.startTime=this.startTime,e.a=this.a,e.b=this.b,e},bt.prototype.clone=function(){return new bt(this.ra,this.end)},it.TAG_NAME="MPD",rt.TAG_NAME="Period",at.TAG_NAME="AdaptationSet",nt.TAG_NAME="Role",st.TAG_NAME="ContentComponent",ot.TAG_NAME="Representation",ht.TAG_NAME="ContentProtection",lt.TAG_NAME="cenc:pssh",ut.TAG_NAME="BaseURL",dt.TAG_NAME="Location",pt.TAG_NAME="SegmentBase",ct.TAG_NAME="RepresentationIndex",ft.TAG_NAME="Initialization",yt.TAG_NAME="SegmentList",gt.TAG_NAME="SegmentURL",mt.TAG_NAME="SegmentTemplate",Tt.TAG_NAME="SegmentTimeline",Pt.TAG_NAME="S",it.prototype.parse=function(e,t){this.url=e.mb,this.id=Dt(t,"id",Ot),this.type=Dt(t,"type",Ot)||"static",this.b=Dt(t,"mediaPresentationDuration",_t),this.h=Dt(t,"minBufferTime",_t,this.h),this.g=Dt(t,"minimumUpdatePeriod",_t,this.g),this.c=Dt(t,"availabilityStartTime",Rt,this.c),this.f=Dt(t,"timeShiftBufferDepth",_t,this.f),this.f=null,this.i=Dt(t,"suggestedPresentationDelay",_t,this.i);var i=e.s,r=Ht(this,t,ut);this.s=Lt(i,r),(r=At(this,t,dt))&&(this.j=vt(i,r.url)),this.a=Ht(this,t,rt)},rt.prototype.parse=function(e,t){this.id=Dt(t,"id",Ot),this.start=Dt(t,"start",_t),this.a=Dt(t,"duration",_t);var i=Ht(this,t,ut);this.s=Lt(e.s,i),this.c=At(this,t,pt),this.f=At(this,t,yt),this.g=At(this,t,mt),this.b=Ht(this,t,at),Mt(this)},at.prototype.parse=function(e,t){var i=At(this,t,st)||{},r=At(this,t,nt);this.id=Dt(t,"id",Ot),this.group=Dt(t,"group",Bt),this.lang=Dt(t,"lang",Ot,i.lang),this.contentType=Dt(t,"contentType",Ot,i.contentType),this.width=Dt(t,"width",xt),this.height=Dt(t,"height",xt),this.b=Dt(t,"mimeType",Ot),this.i=Dt(t,"codecs",Ot),this.c=r&&"main"==r.value,this.lang&&(this.lang=F(this.lang)),i=Ht(this,t,ut),this.s=Lt(e.s,i),this.j=Ht(this,t,ht),!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]),this.f=e.c?$t(this,t,e.c):At(this,t,pt),this.g=e.f?$t(this,t,e.f):At(this,t,yt),this.h=e.g?$t(this,t,e.g):At(this,t,mt),this.a=Ht(this,t,ot),!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))},nt.prototype.parse=function(e,t){this.value=Dt(t,"value",Ot)},st.prototype.parse=function(e,t){this.id=Dt(t,"id",Ot),this.lang=Dt(t,"lang",Ot),this.contentType=Dt(t,"contentType",Ot),this.lang&&(this.lang=F(this.lang))},ot.prototype.parse=function(e,t){this.id=Dt(t,"id",Ot),this.bandwidth=Dt(t,"bandwidth",xt),this.width=Dt(t,"width",xt,e.width),this.height=Dt(t,"height",xt,e.height),this.f=Dt(t,"mimeType",Ot,e.b),this.h=Dt(t,"codecs",Ot,e.i),this.fbQualityLabel=Dt(t,"FBQualityLabel",Ot),this.fbQualityClass=Dt(t,"FBQualityClass",Ot),this.lang=e.lang;var i=Ht(this,t,ut);this.s=Lt(e.s,i),this.c=Ht(this,t,ht),this.g=e.f?$t(this,t,e.f):At(this,t,pt),this.b=e.g?$t(this,t,e.g):At(this,t,yt),this.a=e.h?$t(this,t,e.h):At(this,t,mt),this.c=this.c.concat(e.j)},ht.prototype.parse=function(e,t){this.f=t,this.c=Dt(t,"schemeIdUri",Ot);var i=Dt(t,"cenc:default_KID",Ot);i&&(this.b=i.replace(/[-]/g,"")),this.a=At(this,t,lt)},lt.prototype.parse=function(e,t){var i=kt(t);if(i){this.psshBox=Be(i);try{this.parsedPssh=new Ge(this.psshBox)}catch(r){if(!(r instanceof RangeError))throw r}}},ut.prototype.parse=function(e,t){this.url=kt(t)},dt.prototype.parse=function(e,t){this.url=kt(t)},pt.prototype.parse=function(e,t){this.s=e.s||this.s,this.h=Dt(t,"timescale",xt,this.h),this.g=Dt(t,"presentationTimeOffset",Bt,this.g),this.a=Dt(t,"indexRange",It,this.a),this.f=Dt(t,"FBFirstSegmentRange",It,this.f),this.b=At(this,t,ct)||this.b,this.c=At(this,t,ft)||this.c},ct.prototype.parse=function(e,t){var i=Dt(t,"sourceURL",Ot);this.url=vt(e.s,i),this.a=Dt(t,"range",It,wt(e.a))},ft.prototype.parse=function(e,t){var i=Dt(t,"sourceURL",Ot);this.url=vt(e.s,i),this.a=Dt(t,"range",It)},yt.prototype.parse=function(e,t){this.s=e.s||this.s,this.a=Dt(t,"timescale",xt,this.a),this.g=Dt(t,"presentationTimeOffset",Bt,this.g),this.c=Dt(t,"duration",xt,this.c);var i=Dt(t,"startNumber",xt);null!=i&&(this.i=i),this.h=At(this,t,ft)||this.h,this.b=(i=Ht(this,t,gt))&&0<i.length?i:this.b,this.f=At(this,t,Tt)||this.f},gt.prototype.parse=function(e,t){var i=Dt(t,"media",Ot);this.b=vt(e.s,i),this.a=Dt(t,"mediaRange",It)},mt.prototype.parse=function(e,t){this.a=Dt(t,"timescale",xt,this.a),this.i=Dt(t,"presentationTimeOffset",Bt,this.i),this.b=Dt(t,"duration",xt,this.b);var i=Dt(t,"startNumber",Bt);null!=i&&(this.j=i),this.h=Dt(t,"media",Ot,this.h),this.f=Dt(t,"index",Ot,this.f),this.g=Dt(t,"initialization",Ot,this.g),this.c=At(this,t,Tt)||this.c},Tt.prototype.parse=function(e,t){this.a=Ht(this,t,Pt)},Pt.prototype.parse=function(e,t){this.startTime=Dt(t,"t",Bt),this.a=Dt(t,"d",Bt),this.b=Dt(t,"r",Ct)},t("shaka.util.AjaxRequest",Nt);var ca=!0,fa=/(.*)\.(xx|fna)\.fbcdn\.net/,ya=/livestream-lookaside\.facebook\.com$/;Nt.prototype.j=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var t=this.url.split(":")[1].split(";").pop().split(","),i=t.pop(),i="base64"==t.pop()?e.atob(i.replace(/-/g,"+").replace(/_/g,"/")):e.decodeURIComponent(i);return"arraybuffer"==this.b.h&&(i=xe(i).buffer),t=JSON.parse(JSON.stringify(new XMLHttpRequest)),t.response=i,t.responseText=i.toString(),i=this.c,i.resolve(t),Ft(this),i}if(0==this.url.lastIndexOf("idb:",0))return this.B();this.i++,this.h=e.performance.now(),this.g||(this.g=this.b.j),this.a=new XMLHttpRequest;var r=this.url,t=new ze(r);if(ca&&(this.f&&!this.f.supportsCaching()||this.b.i)&&et(t.a,"_",Date.now()),r=fa.test(r),null!=this.b.a&&r){var a=this.b.a,n=t.a;null!=a.a&&(a.h=a.a.getSegmentsToPush(),a.f=a.a.getSegmentStartTime(),a.g=a.a.getSegmentOffset(),a.c=a.a.getPushVideoRepresentationID(),a.b=a.a.getPushAudioRepresentationID(),a.j=a.a.getUseLongCacheForManifest()),null!=a.h&&et(n,"_nc_p_n",a.h),null!=a.f?et(n,"_nc_p_ts",a.f):null!=a.g&&et(n,"_nc_p_o",a.g),null!=a.c&&null!=a.b&&(et(n,"_nc_p_rid",a.c),et(n,"_nc_p_arid",a.b)),a.i&&et(n,"_nc_p_dbg","1"),a.j&&et(n,"_nc_nc","1")}1==this.b.m&&r&&et(t.a,"_nc_playing",1),r=t.toString(),t=ya.test(t.V),this.a.open(this.b.method,r,!0),this.a.responseType=this.b.h,this.a.timeout=this.b.f,this.a.withCredentials=t,s(this.a,"onload",this.m.bind(this)),s(this.a,"onreadystatechange",this.u.bind(this)),s(this.a,"onerror",this.A.bind(this)),s(this.a,"ontimeout",this.v.bind(this));for(i in this.b.c)this.a.setRequestHeader(i,this.b.c[i]);return this.a.send(this.b.body),this.c},Nt.prototype.send=Nt.prototype.j,Nt.prototype.m=function(t){if(this.f){var i=f.getResourceTimingEntry(this.url,this.h,e.performance.now());this.f.sample(e.performance.now()-this.h,t.loaded,!!this.b.g&&"v"===this.b.g.charAt(0),i)}t=[403],200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),Ft(this)):this.i<this.b.b&&-1===t.indexOf(this.a.status)?Gt(this):(t=Qt(this,"HTTP error.","net"),this.c.reject(t),Ft(this))},Nt.prototype.u=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ma=Date.now()-this.h,this.b.a&&this.b.R&&Wt(this.b.R,this.a),this.b.i)){var e=Date.parse(this.a.getResponseHeader("Date"));e&&(Zr=e-Date.now())}},Nt.prototype.A=function(){var e=Qt(this,"Network failure.","net");this.c.reject(e),Ft(this)},Nt.prototype.v=function(){if(this.i<this.b.b)Gt(this);else{var e=Qt(this,"Request timed out.","net");this.c.reject(e),Ft(this)}};var ga,ma=/\/([^\/]+)$/,Ta=/\/([^\/]+\/[^\/]+)$/;t("shaka.util.FailoverUri",Yt),Yt.setPrefetchCacheValueGetter=function(e){ga=e},Yt.prototype.g=function(){if(this.c){this.b=null;var e=this.c;if(e.a&&e.a.readyState!=XMLHttpRequest.DONE){e.a.abort();var t=Qt(e,"Request aborted.","aborted");e.c.reject(t),Ft(e)}this.i=this.c=null}},Yt.prototype.clone=function(){return new Yt(this.j,this.a.map(function(e){return e.clone()}),this.h,this.f)},Yt.prototype.toString=function(){return this.a[0].toString()},si.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null),this.b=null},si.prototype.create=function(e,t){var i=null;return t&&(i=new Ut,i.R=t),this.a?Xt(this.a,i,null,e):o.resolve(this.b)},di.prototype.parse=function(e,t,i,r,a){var n=null;try{e:{var s=[],o=new $(e),h=H(o);if(1936286840!=H(o))n=null;else{1==h&&(h=k(o));var l=S(o);w(o,3),w(o,4);var u=H(o);if(0==u)n=null;else{var d,p;0==l?(d=H(o),p=H(o)):(d=k(o),p=k(o)),w(o,2);var c=o.b.getUint16(o.a,o.c);for(o.a+=2,e=d,t=t+h+p,p=h=0;p<c;p++){var f=H(o);d=(2147483648&f)>>>31;var l=2147483647&f,y=H(o);if(H(o),1==d){n=null;break e}var g;g=0==p&&a?a:new Yt(r,i,t,t+l-1),d=e/u;var m=(e+y)/u;0===p&&(h=d),s.push(new oi(d-h,m-h,g)),e+=y,t+=l}n=s}}}}catch(T){if(!(T instanceof RangeError))throw T}return n},pi.prototype.ba=function(){return!!this.g[this.g.length-1]},pi.prototype.lastPollHadChanges=pi.prototype.ba,pi.prototype.H=function(){var e=this.g,t=e.lastIndexOf(!0);return 1>t?0:(e=e.lastIndexOf(!0,t-1),0>e?0:t-e-1)},pi.prototype.getFetchesBetweenRecentChanges=pi.prototype.H,pi.prototype.G=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(!0))/2)},pi.prototype.getConsecutiveUpdatesWithoutChanges=pi.prototype.G,pi.prototype.F=function(){return this.g.length-1-this.g.lastIndexOf(!1)},pi.prototype.getConsecutiveUpdatesWithChanges=pi.prototype.F,pi.prototype.destroy=function(){this.a=null},pi.prototype.length=function(){return this.a.length},pi.prototype.B=function(){return(this.a||[]).slice()},pi.prototype.getSegments=pi.prototype.B,pi.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1]},pi.prototype.last=pi.prototype.w,Qr=pi.prototype,Qr.get=function(e){if(0>e||e>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[e]},Qr.oa=function(e){return e=li(this.a,e),0<=e?this.a[e]:null},Qr.Pa=function(e){return fi(this,e),!0},Qr.na=function(e){var t=e-this.aa;return 0==t?0:(this.a=ui(this.a,t),this.aa=e,t)},Qr.Na=function(){return 0<this.length()?{start:ci(this).startTime,end:this.w().endTime}:{start:0,end:0}},i(yi,pi),yi.prototype.destroy=function(){this.C=this.i=null,pi.prototype.destroy.call(this)},yi.prototype.oa=function(e){return Ti(this,v()/1e3),pi.prototype.oa.call(this,e)},yi.prototype.Pa=function(e){return e instanceof yi&&(fi(this,e),this.j=Math.max(this.j,e.j),null==this.f?(this.h=e.h,gi(this)):Pi(this),!0)},yi.prototype.na=function(e){return e=pi.prototype.na.call(this,e),Math.min.apply(null,this.a.filter(function(e){return null!=e.endTime}).map(function(e){return e.endTime-e.startTime})),null!=this.f&&(this.v+=e,this.b+=e,this.f+=e),e},yi.prototype.Na=function(){return mi(this,v()/1e3)},i(bi,yi),bi.prototype.destroy=function(){this.D=this.A=null,yi.prototype.destroy.call(this)},bi.prototype.oa=function(e){var t=v()/1e3;return Vi(this,t),Ti(this,t),pi.prototype.oa.call(this,e)},bi.prototype.Pa=function(e){
return null==this.c&&e instanceof bi&&null!=e.c&&(this.c=e.c,this.u=e.u,this.m=e.m,this.h=e.h,this.j=e.j,fi(this,e),Vi(this,v()/1e3),gi(this),!0)},bi.prototype.na=function(e){return e=yi.prototype.na.call(this,e),null!=this.c&&(this.c+=e,this.u+=e),e},bi.prototype.Na=function(){var e=v()/1e3;return Vi(this,e),mi(this,e)},Mi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null,this.a&&(this.a.destroy(),this.a=null)},Mi.prototype.create=function(){if(this.a)return o.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new bi(this.f,this.b,this.c,this.h,this.g)}catch(e){return o.reject(e)}else{var t;if(t=this.c.a,t=ii(this.g,this.c,1,Math.ceil(this.b.a/(t.b/t.a)))){if(0<t.length){var i=t[t.length-1];t[t.length-1]=hi(i,i.startTime,this.b.a)}t=new pi(t)}else t=null;if(this.a=t,!this.a)return t=Error("Failed to generate SegmentReferences"),t.type="stream",o.reject(t)}return o.resolve(this.a)},Li.prototype.destroy=function(){this.f=this.g=this.b=this.c=null,this.a&&(this.a.destroy(),this.a=null)},Li.prototype.create=function(){if(this.a)return o.resolve(this.a);var e=this.g.b,t=[];e.f&&(t=ni(e.f,e.a||1,this.b.a||0));var i=0;e.c&&e.i?i=(e.i-1)*e.c:0<t.length&&(i=t[0].start-(e.g||0));var r=i,a=e.b.length;0<t.length&&t.length!=e.b.length&&(a=Math.min(t.length,e.b.length));for(var n=[],s=0;s<a;++s){var h,l=e.b[s],u=i/e.a,d=null,p=null;e.c?(d=i+e.c,p=d/e.a):0<t.length?(h=t[s].debugInfo,d=t[s].end-(e.g||0),p=d/e.a):(p=u+this.b.a,d=p*e.a);var i=d,d=0,c=null;l.a&&(d=l.a.ra,c=l.a.end),p=Math.min(this.b.a+r/e.a,p),n.push(new oi(u,p,new Yt(this.f,l.b,d,c),null,h||null))}return"dynamic"==this.c.type?this.a=new yi(n,this.c,this.b,this.h):this.a=new pi(n),o.resolve(this.a)},vi.prototype.destroy=function(){this.g=this.f=this.c=this.b=null,this.a&&(this.a.destroy(),this.a=null)},vi.prototype.create=function(){if(this.a)return o.resolve(this.a);for(var e=this.f.a,t=ni(e.c,e.a||1,this.c.a||0),i=[],r=0;r<t.length;++r){var a=t[r].start,n=t[r].debugInfo,s=a/e.a,h=t[r].end/e.a,l=ri(this.g,this.f,r+e.j,a);if(!l)return e=Error("Failed to generate media URL."),e.type="dash",o.reject(e);var u=(e.i||0)/e.a;i.push(new oi(s-u,h-u,l,a,n||null))}return"dynamic"==this.b.type?this.a=new yi(i,this.b,this.c,this.h):this.a=new pi(i),o.resolve(this.a)};var Pa=0;$i.prototype.destroy=function(){this.J&&(this.J.destroy(),this.J=null),this.S&&(this.S.destroy(),this.S=null)};var ba=0;Si.prototype.destroy=function(){for(var e=0;e<this.o.length;++e)this.o[e].destroy();this.a=this.o=null},ki.prototype.destroy=function(){for(var e=0;e<this.a.length;++e)this.a[e].destroy();this.a=null},Ei.prototype.destroy=function(){for(var e=0;e<this.a.length;++e)this.a[e].destroy();this.a=null},i(Di,re),Di.prototype.ea=function(){return{SourceBufferManager:this.a}},Di.prototype.getDebug=Di.prototype.ea,Di.prototype.L=function(e){null!=e.initialStreamBufferSize&&(this.A=Number(e.initialStreamBufferSize)),null!=e.dynamicStreamBufferSize&&(this.F=Number(e.dynamicStreamBufferSize)),null!=e.streamBufferSize&&(this.D=Number(e.streamBufferSize)),null!=e.fixBufferingGoalDetermination&&(this.P=Boolean(e.fixBufferingGoalDetermination)),null!=e.addCdnDebugQueryParameters&&(this.N=Boolean(e.addCdnDebugQueryParameters)),null!=e.useInitialBufferSizeWhenPaused&&(this.Y=Boolean(e.useInitialBufferSizeWhenPaused)),null!=e.segmentRequestTimeout&&(this.a.L=Number(e.segmentRequestTimeout)),null!=e.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.T=Boolean(e.resolveVideoTimeUpdateOnFragmentedTimeRanges)),null!=e.performanceLogger&&(this.l=this.g.performanceLogger=e.performanceLogger),null!=e.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=Boolean(e.reappendInitSegmentAfterAbort)),null!=e.liveDataFetchMaxRetries&&(this.g.liveDataFetchMaxRetries=Number(e.liveDataFetchMaxRetries)),null!=e.liveSourceBufferClearMaxRetries&&(this.g.liveSourceBufferClearMaxRetries=Number(e.liveSourceBufferClearMaxRetries)),null!=e.skipEmptySegments&&(this.g.skipEmptySegments=Boolean(e.skipEmptySegments)),null!=e.playheadFragmentedGapDiffAllowance&&(this.g.playheadFragmentedGapDiffAllowance=Number(e.playheadFragmentedGapDiffAllowance)),null!=e.useMicroTaskTimeouts&&(this.Z=Boolean(e.useMicroTaskTimeouts)),e=this.a;var t=this.g;null!=t.reappendInitSegmentAfterAbort&&(e.H=Boolean(t.reappendInitSegmentAfterAbort)),null!=t.performanceLogger&&(e.l=t.performanceLogger),null!=t.liveDataFetchMaxRetries&&(e.F=t.liveDataFetchMaxRetries),null!=t.liveSourceBufferClearMaxRetries&&(e.D=t.liveSourceBufferClearMaxRetries),null!=t.playheadFragmentedGapDiffAllowance&&(e.G=t.playheadFragmentedGapDiffAllowance),null!=t.skipEmptySegments&&(e.N=t.skipEmptySegments)},Di.prototype.destroy=function(){Ni(this),this.j.destroy(),this.c=this.j=null,this.a.destroy(),this.ba=this.b=this.a=null},Qr=Di.prototype,Qr.ka=function(){return this.c},Qr.wa=function(){return this.B},Qr.ub=function(e){return this.f||e.then(function(){this.f=!0,this.i||Oi(this,0)}.bind(this))["catch"](function(){}),this.j},Qr.Oa=function(){return this.u},Qr.sa=function(e,t,i,r){e!=this.c&&(this.H=e.S.create(this.l,this.ca),e.J.create().then(Me(this,function(a){if(this.b){var n=this.c;this.c=e,this.B=a,this.M=!0,this.C=r?r:null,this.v||(n?t&&Ri(this,!0,i):Oi(this,0))}}))["catch"](Me(this,function(e){"aborted"!=e.type&&(this.f?(e=N(e),this.dispatchEvent(e)):this.j.reject(e))})))},Qr.qb=function(){return Ri(this,!1)},Qr.sb=function(){this.G=!0},Qr.tb=function(e){return 0<$e(this.a,e)&&0<=li(this.a.c,e)},Qr.xa=function(){},Qr.Ma=function(){return!0},Qr.lb=function(){if(this.h&&!this.f)this.i=null;else{var e;if((e=this.f&&!this.u)&&(e=1<this.a.a.buffered.length),e&&(this.G||De(this.a,this.b)))this.T&&(this.b.currentTime=we(this.b)),this.G=!1,Ri(this,!0);else{this.i=null,e=this.c;var t=this.B,i=this.b.currentTime;if($e(this.a,this.h?i:i+(this.m||0))>=_i(this))Ci(this),Oi(this,1e3/(5*(Math.abs(this.b.playbackRate)||1)));else{var r=Ii(this,i,t);r?(t=Se(this.a,r,e.b,this.H,this.N&&!this.b.paused),this.X&&"video"===e.a.split("/")[0]&&this.X(r.startTime,r.endTime,{id:e.id,reason:this.C,performanceLogger:this.l?this.l.getOperationLogger("stream_switch"):null}),this.H=null,this.M&&(this.M=!1,r=this.C,this.C=null,xi(this,e,r)),this.u=!1,t.then(Me(this,function(e){var t=e.aa;e=e.Gb,this.h||(this.U=e),null==this.m&&(this.m=t),this.K&&0<$e(this.a,i)&&(this.K=!1,this.b.currentTime+=.001),Oi(this,0)}))["catch"](Me(this,function(e){if("aborted"!=e.type){var t=[0,404,410,502,503,504];"net"==e.type&&-1!=t.indexOf(e.ac.status)&&this.c&&Oi(this,1e3),e=N(e),this.dispatchEvent(e)}}))):(Ci(this),this.f&&!this.u&&(this.u=!0,Bi(this)),Oi(this,200))}}}},Qr.va=function(){return this.U},ji.prototype.destroy=function(){this.a.destroy(),this.a=null},ji.prototype.update=function(e){var t=Qi(e),i=Qi(this.a);return o.all([t,i]).then(Me(this,function(t){var i=t[0];t=t[1],Ui(this.a.a),e.b&&!this.a.b&&(e.i=!0),e.f=this.a.f,e.g=this.a.g?this.a.g.clone():null,e.c=this.a.c;var r=[];return Gi(e,this.a,i,t,r),Ui(e.a),o.resolve(r)}))},Yi.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)},Yi.prototype.create=function(){if(this.a)return o.resolve(this.a);var e=new oi(0,null,this.b);return this.a=new pi([e]),o.resolve(this.a)},i(Ki,re),Ki.prototype.L=function(){},Ki.prototype.destroy=function(){this.a&&this.b.removeChild(this.a),this.c.destroy(),this.ba=this.b=this.f=this.h=this.a=this.c=null},Qr=Ki.prototype,Qr.ka=function(){return this.f},Qr.wa=function(){return this.h},Qr.ub=function(){return this.c},Qr.Oa=function(){return!0},Qr.sa=function(e){e.J.create().then(Me(this,function(t){if(this.b){if(0==t.length())return o.reject(Error("No subtitles URL available."));var i=this.f;this.f=e,this.h=t,t=ci(t).url.a[0].toString();var r=this.Ma();this.a&&(this.xa(!1),this.b.removeChild(this.a)),this.a=document.createElement("track"),this.b.appendChild(this.a),this.a.src=t,this.xa(r),t=O({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:e.bandwidth}),this.dispatchEvent(t),i||this.c.resolve(0)}}))},Qr.qb=function(){},Qr.sb=function(){},Qr.tb=function(){return!0},Qr.xa=function(e){this.g=e,this.a&&(this.a.track.mode=e?"showing":"disabled")},Qr.Ma=function(){return this.a&&(this.g="showing"==this.a.track.mode),this.g},Qr.va=function(){return 0},Xi.prototype.parse=function(e,t,i,r){var a=null;try{var n,s=new D(t);if(440786851!=R(s).id)n=null;else{var o=R(s);if(408125543!=o.id)n=null;else{var h,l=o.a.byteOffset,u=new D(o.a);for(t=null;A(u.a);){var d=R(u);if(357149030==d.id){t=d;break}}if(t){for(var p=new D(t.a),u=1e6;A(p.a);){var c=R(p);if(2807729==c.id){u=C(c);break}}h=u/1e9}else h=null;n=h?{Ub:l,Zb:h}:null}}if(n){var f=R(new D(e));if(475249515!=f.id)a=null;else{var y=n.Ub,g=n.Zb;e=[];var m=new D(f.a);for(n=f=-1;A(m.a);){var T=R(m);if(187==T.id){var P,b=new D(T.a),V=R(b);if(179!=V.id)P=null;else{var M=C(V),L=R(b);if(183!=L.id)P=null;else{for(var v=new D(L.a),l=0;A(v.a);){var $=R(v);if(241==$.id){l=C($);break}}P={$b:M,Tb:l}}}if(P){var S=g*P.$b,H=y+P.Tb;if(0<=f){var k=new Yt(r,i,n,H-1);e.push(new oi(f,S,k))}f=S,n=H}}}0<=f&&(k=new Yt(r,i,n,null),e.push(new oi(f,null,k))),a=e}}else a=null}catch(E){if(!(E instanceof RangeError))throw E}return a},Ji.prototype.destroy=function(){this.h=this.i=this.g=null,this.a.g(),this.a=null,this.b&&(this.b.g(),this.b=null),this.c&&(this.c.g(),this.c=null),this.ha=null},Ji.prototype.Fb=function(){return this.ha},Ji.prototype.create=function(){return Zi(this,!0)},Ji.prototype.Ua=function(){return Zi(this,!1)},t("shaka.media.SimpleAbrManager",pr),pr.prototype.destroy=function(){this.f.destroy(),this.a=this.b=this.f=null},pr.prototype.initialize=function(e,t){this.b||this.a||(this.b=e,this.a=t)},pr.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4e3,ee(this.f,this.b,"bandwidth",this.m.bind(this)),ee(this.f,this.a,"adaptation",this.j.bind(this)),ee(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)},pr.prototype.enable=function(e){this.i=e},pr.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var e=cr(this);return e?e.id:null},pr.prototype.getInitialSwitchReason=function(){return null},pr.prototype.getInitialAudioTrackId=function(){return null},pr.prototype.selectVideoTrack=function(e,t,i){this.g&&this.a.selectVideoTrack(e.id,t,i)},pr.prototype.m=function(){Date.now()<this.c||this.h()},pr.prototype.h=function(){if(this.i){var e=cr(this);if(e){if(e.active)return void(this.c=Date.now()+3e3);this.selectVideoTrack(e,!1)}this.c=Number.POSITIVE_INFINITY}},pr.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3e4)},i(fr,re),t("shaka.player.StreamVideoSource",fr),fr.prototype.cb=function(){return{VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.Z}},fr.prototype.getStreamDebug=fr.prototype.cb,fr.prototype.yb=function(e){null!=e.streamBufferSize&&(this.g.streamBufferSize=e.streamBufferSize),null!=e.initialStreamBufferSize&&(this.g.initialStreamBufferSize=e.initialStreamBufferSize),null!=e.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=e.dynamicStreamBufferSize),null!=e.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=e.addCdnDebugQueryParameters),null!=e.segmentRequestTimeout&&(this.g.segmentRequestTimeout=e.segmentRequestTimeout),null!=e.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=e.resolveVideoTimeUpdateOnFragmentedTimeRanges),null!=e.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=e.reappendInitSegmentAfterAbort),null!=e.liveDataFetchMaxRetries&&(this.g.liveDataFetchMaxRetries=e.liveDataFetchMaxRetries),null!=e.liveSourceBufferClearMaxRetries&&(this.g.liveSourceBufferClearMaxRetries=e.liveSourceBufferClearMaxRetries),null!=e.playheadFragmentedGapDiffAllowance&&(this.g.playheadFragmentedGapDiffAllowance=e.playheadFragmentedGapDiffAllowance),null!=e.fixBufferingGoalDetermination&&(this.g.fixBufferingGoalDetermination=e.fixBufferingGoalDetermination),null!=e.skipEmptySegments&&(this.g.skipEmptySegments=e.skipEmptySegments),null!=e.useMicroTaskTimeouts&&(this.g.useMicroTaskTimeouts=e.useMicroTaskTimeouts),Fr(this),null!=e.includeStreamBufferSizeInStartOffset&&(this.eb=Boolean(e.includeStreamBufferSizeInStartOffset)),null!=e.liveAudioPushRepresentation&&(this.T=String(e.liveAudioPushRepresentation)),null!=e.liveInitialPushRepresentation&&(this.Ea=String(e.liveInitialPushRepresentation)),null!=e.enableAdaptation&&this.m.enable(Boolean(e.enableAdaptation)),null!=e.mpdRequestTimeout&&(this.Ia=Number(e.mpdRequestTimeout)),null!=e.minMpdRefreshInterval&&(this.Aa=Number(e.minMpdRefreshInterval)/1e3),null!=e.enableManifestDebug&&(this.bb=!!e.enableManifestDebug),null!=e.liveStreamEndTimeout&&(this.pb=Number(e.liveStreamEndTimeout)),null!=e.preferredLanguage&&(this.C=F(String(e.preferredLanguage))),null!=e.liveSendPushHeaders&&(this.Ga=Boolean(e.liveSendPushHeaders)),null!=e.liveMaxManifestFetchesWithPush&&(this.Fa=Number(e.liveMaxManifestFetchesWithPush)),null!=e.currentTimeDuringReadyStateZeroThrows&&(this.$a=Boolean(e.currentTimeDuringReadyStateZeroThrows)),null!=e.liveMaxSegmentsToPush&&(this.ob=Number(e.liveMaxSegmentsToPush)),null!=e.jumpToLiveThreshold&&(this.hb=Number(e.jumpToLiveThreshold)),null!=e.restrictions&&(this.i=e.restrictions,this.D&&Lr(this)),null!=e.useLongCacheForManifest&&(this.P=Boolean(e.useLongCacheForManifest)),null!=e.jumpToEarliestPositionInCurrentBlock&&(this.gb=Boolean(e.jumpToEarliestPositionInCurrentBlock)),null!=e.ignoreMinBufferTime&&(this.qa=Boolean(e.ignoreMinBufferTime))},fr.prototype.destroy=function(){this.A.destroy(),this.U.destroy(),this.U=this.A=null,this.L&&(u(this.L),this.L=null),this.H&&(u(this.H),this.H=null),this.u=null,this.j.destroy(),this.j=null,j(this.b).forEach(function(e){e.destroy()}),this.f=this.b=null,this.a&&(this.a.destroy(),this.a=null),this.m.destroy(),this.ba=this.i=this.c=this.h=this.Z=this.m=null},Qr=fr.prototype,Qr.Ya=function(){},Qr.ya=function(){if(this.D){var e=Error("Cannot call load() right now.");return e.type="app",o.reject(e)}return this.a&&0!=this.a.a.length?(Ui(this.a.a),0!=this.a.a.length&&0!=this.a.a[0].a.length&&this.a.a[0].a.some(function(e){return"video"===e.contentType})?(this.D=!0,this.qa||(this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c)),Fr(this),Lr(this),o.resolve()):(e=Error("The manifest specifies content that cannot be displayed on this browser/platform."),e.type="stream",o.reject(e))):(e=Error("The manifest does not specify any content."),e.type="stream",o.reject(e))},Qr.kb=function(e){var t;this.l&&(t=this.l.getOperationLogger("update_manifest").start());var i,r,a=Date.now(),n=this.H=null;if(this.Ga&&(!this.Fa||this.Fa>this.rb)){i=Math.floor(Or(this))+1,i=Math.min(i,this.ob);var s=this.b.video;(s=s?s.wa():null)&&(s=s.w(),null!=s.a&&(r=s.a)),(this.c.paused||this.Y)&&(i=0)}i&&this.rb++,s=this.a.g,t&&t.setResource(s.toString()),(e?this.ib():this.jb(s,i,r)).then(Me(this,function(e){return n=new ji(e),n.update(this.a)})).then(Me(this,function(e){n.destroy(),n=null;var i=Br(this);if(this.ja("SegmentIndexesUpdated",i),i.some(function(e){return e.Qa})&&mr(this),(i=Nr(this,i))&&this.c.paused&&i.end>this.c.currentTime+10&&(this.c.currentTime=i.end),xr(this))return t&&t.log(),this.ua();for(i=0;i<e.length;++i)Pr(this,e[i]);this.qa||(this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c)),this.g.useInitialBufferSizeWhenPaused=this.a.b,Fr(this),Lr(this),0==Object.keys(this.b).length?Ar(this):Tr(this,(Date.now()-a)/1e3),t&&t.log()}))["catch"](Me(this,function(e){return t&&t.setError(e).log(),n&&(n.destroy(),n=null),"delay"==e.type?Tr(this,0):void("aborted"!=e.type&&(e=N(e),this.dispatchEvent(e),this.a&&Tr(this,0)))}))},Qr.jb=function(){return o.reject("Cannot update manifest with this VideoSource implementation.")},Qr.ib=function(){return o.reject("Cannot update manifest with this VideoSource implementation.")},Qr.Vb=function(e){this.Bb=e},fr.prototype.setTaggedTimeRangesEntryAdder=fr.prototype.Vb,fr.prototype.M=function(){if(!this.f||!this.f.a.hasOwnProperty("video"))return[];for(var e=this.b.video,e=(e=e?e.ka():null)?e.I:0,t=[],i=this.f.get("video"),r=0;r<i.length;++r)for(var a=i[r],n=0;n<a.o.length;++n){var s=a.o[n];if(s.fa&&s.O){var o=s.I,s=new V(o,s.bandwidth,s.width,s.height,s.id,s.fbQualityLabel,s.fbQualityClass);o==e&&(s.active=!0),t.push(s)}}return t},fr.prototype.getVideoTracks=fr.prototype.M,fr.prototype.Ka=function(){if(!this.f||!this.f.a.hasOwnProperty("audio"))return[];for(var e=this.b.audio,e=(e=e?e.ka():null)?e.I:0,t=[],i=this.f.get("audio"),r=0;r<i.length;++r)for(var a=i[r],n=a.lang,s=0;s<a.o.length;++s){var o=a.o[s];if(o.fa&&o.O){var h=o.I,o=new y(h,o.bandwidth,n,o.id);h==e&&(o.active=!0),t.push(o)}}return t},fr.prototype.getAudioTracks=fr.prototype.Ka,fr.prototype.zb=function(){if(!this.f||!this.f.a.hasOwnProperty("text"))return[];for(var e=this.b.text,t=e?e.ka():null,t=t?t.I:0,i=[],r=this.f.get("text"),a=0;a<r.length;++a)for(var n=r[a],s=n.lang,o=0;o<n.o.length;++o){var h=n.o[o].I,l=new b(h,s);h==t&&(l.active=!0,l.enabled=e.Ma()),i.push(l)}return i},fr.prototype.getTextTracks=fr.prototype.zb,fr.prototype.selectVideoTrack=function(e,t,i,r){return vr(this,"video",e,t,i,r)},fr.prototype.Ab=function(){return this.a?this.a.b:null},fr.prototype.isLive=fr.prototype.Ab,fr.prototype.bc=function(e){this.fb=e},fr.prototype.setIsLiveInterrupted=fr.prototype.bc,fr.prototype.Eb=function(){for(var e in this.b)this.b[e].sb()},fr.prototype.forceResyncVideoBuffer=fr.prototype.Eb,Qr=fr.prototype,Qr.Mb=function(){this.j.ta(this.h,"sourceopen"),this.Ha.resolve()},Qr.Hb=function(e){r(e&&e.length==Object.keys(this.b).length);for(var t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=0;a<e.length;++a)var n=e[a],t=Math.min(t,n),i=Math.max(i,n);for(e=Br(this),a=0;a<e.length;++a)e[a].na(i);Dr(this,e,i);var s=j(this.b).map(function(e){return e.ka().id}),a=K(this.f).map(function(e){return e.o}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!~s.indexOf(e.id)}).map(function(e){var t=[c.disableFirstSegmentFetchForInactiveStreams&&e.J.Ua?e.J.Ua():e.J.create()];return e.S&&t.push(e.S.create(this.l,this.R)),o.all(t)});o.all(a).then(Me(this,function(e){for(var t=0;t<e.length;++t)e[t][0].na(i);this.Va=!0;for(var r in this.u)e=this.u[r],this.b[r].sa(e.vb,e.Sa,e.Ta,e.switchReason);this.u={}}))["catch"](Me(this,function(e){"aborted"!=e.type&&(e=N(e),this.dispatchEvent(e))}))},Qr.Sb=function(){this.L=null,Ur(this);var e=Nr(this,Br(this));e&&(this.a.b&&this.Da!=e.w&&(this.Da=e.w,null!=this.v&&(u(this.v),this.v=null)),_r(this,e.start,e.end),this.c.paused||Ir(this,this.c.currentTime,e.start,e.end))},Qr.Qb=function(){var e=this.c.currentTime;if(null!=this.B){if(e>=this.B-.01&&e<=this.B+.01)return void(this.B=null);this.B=null}var t=Nr(this,Br(this));if(t){var i=t.end;if((t=Ir(this,e,t.start,i))||(e<=i+.01||this.a.b&&!Cr(this,i)?t=!1:(this.c.currentTime=i,t=!0)),!t)for(var r in this.b)this.b[r].qb()}},Qr.Rb=function(){if(!this.a.b){for(var e in this.b)if(!this.b[e].Oa())return;this.ua()}},Qr.Jb=function(){return this.Y=!0,xr(this)?this.ua():void(j(this.b).every(function(e){return e.Oa()})&&(this.v=l(this.ua.bind(this),1e3*this.pb)))},Qr.Ib=function(){this.Y=!1,null!=this.v&&(u(this.v),this.v=null)},Qr.Lb=function(){null!==this.F&&(Er(this,this.F),this.F=null)},Qr.Yb=function(){},Qr.ua=function(){this.Y=!1,this.v=null,this.h.endOfStream()},Qr.va=function(){return this.La},fr.prototype.getLongestInitResponseTime=fr.prototype.va,i(jr,fr),t("shaka.player.DashVideoSource",jr),jr.prototype.ab=function(){return this.Ja||this.K},jr.prototype.debugGetManifest=jr.prototype.ab,jr.prototype.Cb=function(e,t,i){this.pa.push(e),this.Xa.push(t||""),this.Za.push(i||"")},jr.prototype.addExternalCaptions=jr.prototype.Cb,jr.prototype.Db=function(e){this.G=e},jr.prototype.setNetworkCallback=jr.prototype.Db,jr.prototype.destroy=function(){this.K=this.G=this.X=null,fr.prototype.destroy.call(this)},jr.prototype.ya=function(){var e;this.l&&(e=this.l.getOperationLogger("source_load").start());var t,i=Me(this,function(i){this.ja("MPDFetchDuration",(Date.now()-t)/1e3),this.K=i;for(var r=0;r<this.pa.length;r++)Vt(i,this.pa[r],this.Xa[r],this.Za[r]);return this.a=tr(new er(this.X,this.l),i,this.G),fr.prototype.ya.call(this).then(function(){e&&e.log()})});if(this.Ja)return t=Date.now(),i(this.Ja);var r,a=[new ze(this.wb)];if(this.Ga){var n=new h(this.wb);n.setStreamEndOffset(Or(this)),this.Ea&&n.setPushVideoRepresentationID(this.Ea),this.T&&n.setPushAudioRepresentationID(this.T),this.P&&n.setUseLongCacheForManifest(this.P),r=new ti(null),r.a=n}return a=new Yt(this.G,a),r=new Zt(a,this.Ia,r,this.R),t=Date.now(),ei(r,this.l).then(i)},jr.prototype.Ya=function(){if(this.bb){var e=this.a;(e=(e=e&&e.a)&&e[0])&&(e=e.a.reduce(function(e,t){return e.concat(t.o)},[]),o.all(e.map(function(e){return e=e.J,e.Fb?e.ha:e.create()})).then(function(e){e=e.filter(function(e){return null!=e}),this.ja("InitialSegmentIndexes",e)}.bind(this)))}},jr.prototype.jb=function(e,t,i){if(this.c.paused&&this.Ba+1e4>Date.now()&&this.a)return o.reject({type:"delay"});var r;if(t&&void 0!=i)r=new ti(t),r.f=i,t=br(this),null!=t&&(r.c=t.streamInfoID,r.b=this.T);else for(t=e.a,i=0;i<t.length;i++){var a=new h(t[i].toString());this.P&&a.setUseLongCacheForManifest(this.P),t[i]=new ze(a.getURL())}e=new Zt(e,this.Ia,r,this.R);var n=Date.now();return ei(e,this.l).then(Me(this,function(e){return this.Ba=Date.now(),this.ja("MPDFetchDuration",(this.Ba-n)/1e3),this.K=e,e=tr(new er(this.X,this.l),e,this.G),o.resolve(e)}))},jr.prototype.ib=function(){var e=tr(new er(this.X),this.K,this.G);return o.resolve(e)}}).bind(y,e)(),a.exports=y.shaka},null),__d("VideoQualityClasses",["VideoQualityClassInternal"],function(e,t,i,r,a,n){a.exports=t("VideoQualityClassInternal").orderedValues},null),__d("HTMLMediaElementReadyStates",[],function(e,t,i,r,a,n){var s={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};a.exports=s},null),__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],function(e,t,i,r,a,n){function s(e){return e.readyState>=t("HTMLMediaElementReadyStates").HAVE_METADATA?e.muted:e.hasAttribute("muted")||e.muted}a.exports=s},null),__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerLoggerEvent","VideoPlayerHTML5Experiments","getHTMLMediaElementMutedState"],function(e,t,i,r,a,n){function s(e,t){e.time_ms=Date.now();var i=t.timeStamp;if(i&&h){var r=Math.floor(i).toString().length,a=Date.now().toString().length,n=window.performance.now();if(r===a+3)i=Math.floor(i/1e3),e.time_ms=i;else if(r===a)e.time_ms=i;else if(i<=n){var s=window.performance.timing.navigationStart;e.time_ms=s+Math.floor(i)}}return e}var o=-1,h=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart),l={initLogger:function(e,i){this._loggedEvents={},this._logFunction=e,this._useEventTime=i;var r=this.getVideoElement();this._lastStartTimePosition=o,this._muted=t("getHTMLMediaElementMutedState")(r),this._pausedPosition=o,this._seeking=!1,this._seekSourceTimePosition=o,this._volume=r.volume,this._logNextPlayingEvent=!0,this._lastPlayedTime=o;var a=!1;if(r.readyState>=r.HAVE_FUTURE_DATA?this._logReadyToPlay():a=!0,!this.skipSubscriptions()){var n=this.getSubscriptions();a&&n.addSubscriptions(t("EventListener").listen(r,"canplay",this._logReadyToPlay.bind(this))),n.addSubscriptions(t("EventListener").listen(r,"ended",this.onEnded.bind(this)),t("EventListener").listen(r,"pause",this.onPause.bind(this)),t("EventListener").listen(r,"playing",this.onPlaying.bind(this)),t("EventListener").listen(r,"seeked",this.onSeeked.bind(this)),t("EventListener").listen(r,"seeking",this.onSeeking.bind(this)),t("EventListener").listen(r,"play",this.onPlay.bind(this)),t("EventListener").listen(r,"loadedmetadata",this.onLoadedMetadata.bind(this)),t("EventListener").listen(r,"timeupdate",this.onTimeUpdate.bind(this)),t("EventListener").listen(r,"volumechange",this.onVolumeChange.bind(this)),t("EventListener").listen(r,"representationended",this.onRepresentationEnded.bind(this)))}},skipSubscriptions:function(){return!1},onCanPlay:function(e){this._logReadyToPlay(e)},onPlay:function(e){this._logNextPlayingEvent=!0,this._ignoreNextPlaying=!1,this._pendingPlayRequest=!0},_logOnce:function(e,t){this._loggedEvents[e]||this._logEvent(e,t)},_logEvent:function(e,t){this._loggedEvents[e]=!0;var i=t?t:{};if(i.video_id=this.getVideoID(),i.hasOwnProperty("video_time_position")||(i.video_time_position=this._getVideoCurrentTime()),i.time_ms||(i.time_ms=Date.now()),i.time=Math.round(i.time_ms/1e3),this.getAdClientToken){var r=this.getAdClientToken();r&&(i.ad_client_token=r)}this.getPlayerFormat&&(i.player_format=this.getPlayerFormat()),this.getPlayerOrigin&&(i.player_origin=this.getPlayerOrigin()),this.getPlayerSuborigin&&(i.player_suborigin=this.getPlayerSuborigin()),this._logFunction(e,i)},_logReadyToPlay:function(){this._logOnce(t("VideoPlayerLoggerEvent").READY_TO_PLAY)},onPause:function(e){this._logNextPlayingEvent=!0;var i=this.getVideoElement();if(this._pendingPlayRequest){var r={debug_reason:this.getLastPlayReason()};return this._pendingPlayRequest=!1,void this._logEvent(t("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING,r)}var a=i.ended?t("VideoPlayerLoggerEvent").FINISHED_PLAYING:t("VideoPlayerLoggerEvent").PAUSED,n=this._getVideoCurrentTime();n&&(this._lastPlayedTime=n);var s=this._lastPlayedTime,h=e.lastPauseReason;if(a===t("VideoPlayerLoggerEvent").FINISHED_PLAYING)s=Math.max(s,i.duration);else{if(this.preventPauseLoggingInMixin===!0)return;this.preventPauseLoggingInMixin===!1&&(h=h||"unloaded")}this._logEvent(a,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===o?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:s,debug_reason:h},e)),this._lastStartTimePosition=o},onEnded:function(){this._logNextPlayingEvent=!0,this._lastStartTimePosition!==o&&t("UserAgent").isBrowser("IE")&&this.onPause({})},onRepresentationEnded:function(e){var i=e.detail;if(i){var r={representation_id:i.representationID,next_representation_id:i.nextRepresentationID,stream_switch_reason:i.streamSwitchReason};if(t("VideoPlayerHTML5Experiments").newStateChangeCalculation){this.getVideoElement();this._lastPlayedTime=this._getVideoCurrentTime();var a=this._lastPlayedTime;r=this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===o?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:a},r),e)}if(this._logEvent(t("VideoPlayerLoggerEvent").REPRESENTATION_ENDED,r),t("VideoPlayerHTML5Experiments").newStateChangeCalculation){var n=this._getVideoCurrentTime();this._lastStartTimePosition=n,this._lastPlayedTime=n}}},addWatchTimeData:function(e){return this._lastStartTimePosition!=o&&this._lastPlayedTime!=o&&(e.video_last_start_time_position=this._lastStartTimePosition,e.video_time_position=this._lastPlayedTime,this._lastStartTimePosition=o),e},getLastPlayReason:function(){return null},getVideoPlayReason:function(){return null},onPlaying:function(e){if(this._logNextPlayingEvent){if(t("VideoPlayerHTML5Experiments").superficialUnpauseEventsFix&&(this._logNextPlayingEvent=!1),this._ignoreNextPlaying)return void(this._ignoreNextPlaying=!1);var i=this.getLastPlayReason();this._pendingPlayRequest=!1;var r=this._loggedEvents[t("VideoPlayerLoggerEvent").STARTED_PLAYING]?t("VideoPlayerLoggerEvent").UNPAUSED:t("VideoPlayerLoggerEvent").STARTED_PLAYING,a=this._amendEventTime({debug_reason:i,video_play_reason:this.getVideoPlayReason()},e),n=this._getVideoCurrentTime();if(t("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment){var s=this.getVideoElement().currentTime,o=s-n;a.time_ms-=Math.round(1e3*o)}this._logEvent(r,a),this._lastStartTimePosition=n,this._lastPlayedTime=n,this._currentTimeAtLoadedMetadataCache=null}},allowNextSeekInMixin:function(){this._allowNextSeek=!0},onSeeked:function(e){this._seeking=!1;var i=this._seekSourceTimePosition;if(this._seekSourceTimePosition=o,this.preventSeekLoggingInMixin&&!this._allowNextSeek)return void(this._pendingPlayRequest||(this._ignoreNextPlaying=!0));this._allowNextSeek=!1,this._ignoreNextPlaying=!1;var r={video_seek_source_time_position:i};this._lastStartTimePosition!==o?r.video_last_start_time_position=this._lastStartTimePosition:r.video_last_start_time_position=i,this._logEvent(t("VideoPlayerLoggerEvent").SCRUBBED,this._amendEventTime(r,e));var a=this.getVideoElement();a.paused?this._lastStartTimePosition=o:this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function(e){this._currentTimeAtLoadedMetadataCache=null,this._seeking||(this._seekSourceTimePosition=this._getVideoCurrentTime(),this._seeking=!0)},onTimeUpdate:function(e){this._currentTimeAtLoadedMetadataCache=null;var t=this.getVideoElement();t.paused||(this._lastPlayedTime=this._getVideoCurrentTime())},onVolumeChange:function(e){var i=this.getVideoElement(),r={},a=null;if(t("VideoPlayerHTML5Experiments").useFixedVolumeLogging){var n=i.muted,s=this._muted,o=i.volume,h=this._volume;r.current_volume=Math.round(100*o),this._volume=o,this._muted=n;var l=n||0==o,u=s||0==h;if(u&&l)return;if(u!=l)a=l?t("VideoPlayerLoggerEvent").MUTED:t("VideoPlayerLoggerEvent").UNMUTED;else{if(h==o)return;a=o<h?t("VideoPlayerLoggerEvent").VOLUME_DECREASE:t("VideoPlayerLoggerEvent").VOLUME_INCREASE}}else i.muted!==this._muted&&i.volume===this._volume&&i.volume>0?a=i.muted?t("VideoPlayerLoggerEvent").MUTED:t("VideoPlayerLoggerEvent").UNMUTED:(a=i.volume>this._volume?t("VideoPlayerLoggerEvent").VOLUME_INCREASE:t("VideoPlayerLoggerEvent").VOLUME_DECREASE,r.current_volume=Math.round(100*i.volume)),this._muted=i.muted,this._volume=i.volume;this._logEvent(a,this._amendEventTime(r,e))},_amendEventTime:function(e,t){return this._useEventTime?s(e,t):(e.time_ms=Date.now(),e)},_getVideoCurrentTime:function(){var e=this.getVideoElement().currentTime.toFixed(2);return t("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment&&null!=this._currentTimeAtLoadedMetadataCache&&(e=this._currentTimeAtLoadedMetadataCache.toFixed(2)),t("VideoPlayerHTML5Experiments").fixCurrentTimeType?+e:e},onLoadedMetadata:function(e){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime}};a.exports=l},null),__d("MediaBufferingDetector",["Event","EventEmitter","SubscriptionsHandler","setInterval","clearInterval","performanceNow"],function(e,t,i,r,a,n){function s(e){"use strict";h.constructor.call(this),this.$MediaBufferingDetector1=e,this.$MediaBufferingDetector2=new(t("SubscriptionsHandler")),this.$MediaBufferingDetector1.paused||this.$MediaBufferingDetector7(),this.$MediaBufferingDetector2.addSubscriptions(t("Event").listen(this.$MediaBufferingDetector1,"playing",function(){return this.$MediaBufferingDetector8()}.bind(this)),t("Event").listen(this.$MediaBufferingDetector1,"pause",function(){return this.$MediaBufferingDetector9()}.bind(this)),t("Event").listen(this.$MediaBufferingDetector1,"ended",function(){return this.$MediaBufferingDetector10()}.bind(this)),t("Event").listen(this.$MediaBufferingDetector1,"timeupdate",function(){return this.$MediaBufferingDetector11()}.bind(this)))}var o,h;o=babelHelpers.inherits(s,t("EventEmitter")),h=o&&o.prototype,s.prototype.$MediaBufferingDetector12=function(){"use strict";var e=t("performanceNow")(),i=this.$MediaBufferingDetector1.currentTime,r=e-this.$MediaBufferingDetector5,a=i-this.$MediaBufferingDetector6,n=1e3*a,s=r-n;.2*r<Math.abs(s)?this.$MediaBufferingDetector13():this.$MediaBufferingDetector14(),this.$MediaBufferingDetector15()},s.prototype.$MediaBufferingDetector15=function(){"use strict";this.$MediaBufferingDetector5=t("performanceNow")(),this.$MediaBufferingDetector6=this.$MediaBufferingDetector1.currentTime},s.prototype.$MediaBufferingDetector7=function(){"use strict";this.$MediaBufferingDetector4||(this.$MediaBufferingDetector15(),this.$MediaBufferingDetector4=t("setInterval")(function(){
return this.$MediaBufferingDetector12()}.bind(this),500))},s.prototype.$MediaBufferingDetector16=function(){"use strict";t("clearInterval")(this.$MediaBufferingDetector4),this.$MediaBufferingDetector4=null},s.prototype.$MediaBufferingDetector13=function(){"use strict";this.$MediaBufferingDetector3||(this.$MediaBufferingDetector3=!0,this.emit("bufferingStart"))},s.prototype.$MediaBufferingDetector14=function(){"use strict";this.$MediaBufferingDetector3&&(this.$MediaBufferingDetector3=!1,this.emit("bufferingEnd"))},s.prototype.$MediaBufferingDetector8=function(){"use strict";this.$MediaBufferingDetector14(),this.$MediaBufferingDetector7()},s.prototype.$MediaBufferingDetector9=function(){"use strict";this.$MediaBufferingDetector14(),this.$MediaBufferingDetector16()},s.prototype.$MediaBufferingDetector10=function(){"use strict";this.$MediaBufferingDetector14(),this.$MediaBufferingDetector16()},s.prototype.$MediaBufferingDetector11=function(){"use strict";this.$MediaBufferingDetector1.paused||(this.$MediaBufferingDetector14(),this.$MediaBufferingDetector16(),this.$MediaBufferingDetector7())},s.prototype.destroy=function(){"use strict";this.$MediaBufferingDetector16(),this.$MediaBufferingDetector2.release()},a.exports=s},null),__d("VideoPlaybackQuality",[],function(e,t,i,r,a,n){function s(e){"use strict";this.video=e}s.prototype.getDroppedFrames=function(){"use strict";var e=this.video;if("function"==typeof e.getVideoPlaybackQuality)return e.getVideoPlaybackQuality().droppedVideoFrames;var t=e.webkitDroppedFrameCount;return"number"==typeof t?t:0},s.prototype.getTotalFrames=function(){"use strict";var e=this.video;if("function"==typeof e.getVideoPlaybackQuality)return e.getVideoPlaybackQuality().totalVideoFrames;var t=e.webkitDecodedFrameCount;return"number"==typeof t?t:0},a.exports=s},null),__d("XLiveBroadcastCaptionsURIFetchAsyncController",["XController"],function(e,t,i,r,a,n){a.exports=t("XController").create("/live/broadcast/captions/uri/",{video_id:{type:"String"}})},null),__d("supportsHTML5Video",["DOM","memoize"],function(e,t,i,r,a,n){a.exports=t("memoize")(function(){return!!t("DOM").create("video").canPlayType})},null),__d("isHTML5VideoImplementationUnavailable",["VideoMimeTypes","canVideoPlayType","supportsHTML5Video"],function(e,t,i,r,a,n){var s=function(e){if(e){var i=t("canVideoPlayType")(t("VideoMimeTypes").h264main30avc);return"probably"!==i}return!t("supportsHTML5Video")()};a.exports=s},null),__d("onCanPlayHTMLMediaElement",["invariant","EventListener","HTMLMediaElementReadyStates","setImmediate"],function(e,t,i,r,a,n,s){function o(e){return e>=t("HTMLMediaElementReadyStates").HAVE_FUTURE_DATA}function h(e,i){return e instanceof window.HTMLMediaElement||s(0),o(e.readyState)&&t("setImmediate")(i),t("EventListener").listen(e,"canplay",i)}h.once=function(e,t){var i=h(e,function(){if(i){i.remove(),i=null;for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(this,r)}}.bind(this))},a.exports=h},null),__d("onLoadedMetadataHTMLMediaElement",["EventListener","HTMLMediaElementReadyStates","setImmediate"],function(e,t,i,r,a,n){function s(e){return e>=t("HTMLMediaElementReadyStates").HAVE_METADATA}function o(e,i){return s(e.readyState)&&t("setImmediate")(i),t("EventListener").listen(e,"loadedmetadata",i)}o.once=function(e,t){var i=o(e,function(){i.remove();for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(this,r)}.bind(this))},a.exports=o},null),__d("seekHTMLMediaElementTo",["EventListener","onLoadedMetadataHTMLMediaElement","setImmediate"],function(e,t,i,r,a,n){function s(e,i,r){if(e.currentTime==i)return r&&t("setImmediate")(r);try{e.currentTime=i}catch(a){}if(e.currentTime)var n=t("EventListener").listen(e,"seeked",function(){n.remove(),r&&r()});else t("onLoadedMetadataHTMLMediaElement")(e,function(){e.currentTime=i;var a=t("EventListener").listen(e,"seeked",function(){a.remove(),r&&r()})})}a.exports=s},null),__d("VideoPlayerHTML5Api",["cx","AsyncRequest","AbstractVideoPlayerApi","Arbiter","Bootloader","CSS","DOM","DOMDimensions","Event","EventListener","HVideoPlayerMixin","MediaBufferingDetector","RTISubscriptionManager","Run","SubscriptionsHandler","VideoData","VideoFrameBuffer","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","VideoPlayerReason","VideoPlayerVersions","VideoPlayerShakaExperiments","VideoQualityClasses","XLiveBroadcastCaptionsURIFetchAsyncController","dispatchCustomEvent","dispatchEvent","classWithMixins","isHTML5VideoImplementationUnavailable","forwardEvent","getHTMLMediaElementMutedState","mixin","onCanPlayHTMLMediaElement","seekHTMLMediaElementTo","setImmediate","VideoPlaybackQuality"],function(e,t,i,r,a,n,s){function o(e){switch(e){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}function h(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"Error code "+e+" is unknown"}}function l(e,i){"use strict";d.constructor.call(this),this.getDebug=function(){return{VideoPlayerHTML5Shaka:this.$VideoPlayerHTML5Api30}}.bind(this),this.$VideoPlayerHTML5Api29=e,this.$VideoPlayerHTML5Api12=this.$VideoPlayerHTML5Api29.id;var r=t("DOMDimensions").getElementDimensions(this.$VideoPlayerHTML5Api29);this.$VideoPlayerHTML5Api51=new(t("VideoPlaybackQuality"))(this.$VideoPlayerHTML5Api29),this.preventSeekLoggingInMixin=t("VideoPlayerShakaExperiments").improveRebufferLogging,this.$VideoPlayerHTML5Api45=r.width,this.$VideoPlayerHTML5Api11=r.height,i?this.$VideoPlayerHTML5Api6=i:this.$VideoPlayerHTML5Api6=JSON.parse(this.$VideoPlayerHTML5Api29.getAttribute("data-config")),this.$VideoPlayerHTML5Api5=new(t("MediaBufferingDetector"))(this.$VideoPlayerHTML5Api29),this.$VideoPlayerHTML5Api5.addListener("bufferingStart",function(){return this.$VideoPlayerHTML5Api52()}.bind(this)),this.$VideoPlayerHTML5Api5.addListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Api53()}.bind(this)),this.$VideoPlayerHTML5Api20=p,this.$VideoPlayerHTML5Api22=t("getHTMLMediaElementMutedState")(this.$VideoPlayerHTML5Api29),this.$VideoPlayerHTML5Api43=this.$VideoPlayerHTML5Api29.volume,this.$VideoPlayerHTML5Api21=!1,this.$VideoPlayerHTML5Api18=null,this.$VideoPlayerHTML5Api26=!1,this.$VideoPlayerHTML5Api3=!1,this.$VideoPlayerHTML5Api28="auto"==this.$VideoPlayerHTML5Api29.getAttribute("preload"),this.$VideoPlayerHTML5Api9=!1,this.$VideoPlayerHTML5Api33=!1,this.$VideoPlayerHTML5Api6.lazyPreload&&(this.$VideoPlayerHTML5Api6.onafterloadRegister?t("Run").onAfterLoad(function(){return this.$VideoPlayerHTML5Api29.setAttribute("preload",this.$VideoPlayerHTML5Api6.lazyPreload)}.bind(this)):this.$VideoPlayerHTML5Api29.setAttribute("preload",this.$VideoPlayerHTML5Api6.lazyPreload)),this.$VideoPlayerHTML5Api8=this.$VideoPlayerHTML5Api6.disableNativeControls,this.$VideoPlayerHTML5Api36=this.$VideoPlayerHTML5Api6.subtitlesActive,this.$VideoPlayerHTML5Api54(),this.preventPauseLoggingInMixin=!1,this.$VideoPlayerHTML5Api34=new(t("SubscriptionsHandler")),this.$VideoPlayerHTML5Api55(),this.$VideoPlayerHTML5Api16=this.$VideoPlayerHTML5Api6.useRateLimited,this.$VideoPlayerHTML5Api56(!1);var a=t("VideoQualityClasses").indexOf("hd");this.$VideoPlayerHTML5Api15=null!==this.$VideoPlayerHTML5Api6.minQuality&&t("VideoQualityClasses").indexOf(this.$VideoPlayerHTML5Api6.minQuality)>=a,this.$VideoPlayerHTML5Api23=this.$VideoPlayerHTML5Api6.minQuality,this.$VideoPlayerHTML5Api24=this.$VideoPlayerHTML5Api6.maxQuality,this.$VideoPlayerHTML5Api2=this.$VideoPlayerHTML5Api6.accessToken,this.$VideoPlayerHTML5Api31=this.$VideoPlayerHTML5Api6.startTimestamp,this.$VideoPlayerHTML5Api4=this.$VideoPlayerHTML5Api6.autoFullscreenHD,this.switchVideo(0),this.initLogger(this.$VideoPlayerHTML5Api57.bind(this),this.$VideoPlayerHTML5Api6.useEventTime),this.$VideoPlayerHTML5Api58(),this.$VideoPlayerHTML5Api27=null,this.$VideoPlayerHTML5Api46=!1,this.$VideoPlayerHTML5Api47=!1,this.$VideoPlayerHTML5Api48=this.$VideoPlayerHTML5Api6.unloadShouldCancelPendingRequest}var u,d,p=-1;u=babelHelpers.inherits(l,t("classWithMixins")(t("AbstractVideoPlayerApi"),t("mixin")(t("HVideoPlayerMixin")))),d=u&&u.prototype,l.prototype.getAdClientToken=function(){"use strict";this.$VideoPlayerHTML5Api6.ad_client_token},l.prototype.$VideoPlayerHTML5Api52=function(){"use strict";this.emit("buffering")},l.prototype.$VideoPlayerHTML5Api53=function(){"use strict";this.emit("buffered")},l.prototype.$VideoPlayerHTML5Api59=function(){"use strict";this.emit("streamInterrupted"),this.$VideoPlayerHTML5Api46=!0},l.prototype.$VideoPlayerHTML5Api60=function(){"use strict";this.emit("streamResumed"),this.$VideoPlayerHTML5Api46=!1},l.prototype.isStreamInterrupted=function(){"use strict";return this.$VideoPlayerHTML5Api46},l.prototype.getVideoID=function(){"use strict";return this.$VideoPlayerHTML5Api7?this.$VideoPlayerHTML5Api7.getVideoID():this.$VideoPlayerHTML5Api6.video_id},l.prototype.getDroppedFrames=function(){"use strict";return this.$VideoPlayerHTML5Api51.getDroppedFrames()},l.prototype.getTotalFrames=function(){"use strict";return this.$VideoPlayerHTML5Api51.getTotalFrames()},l.prototype.getDOMElement=function(){"use strict";return this.$VideoPlayerHTML5Api29},l.prototype.getVideoElement=function(){"use strict";return this.$VideoPlayerHTML5Api29},l.prototype.getSubscriptions=function(){"use strict";return this.$VideoPlayerHTML5Api34},l.onImplementationReady=function(e,t){"use strict";t()},l.prototype.destroy=function(e){"use strict";this.$VideoPlayerHTML5Api9||(this.$VideoPlayerHTML5Api9=!0,this.$VideoPlayerHTML5Api61(),this.abortLoading(e),this.$VideoPlayerHTML5Api62(),this.$VideoPlayerHTML5Api63&&t("DOM").remove(this.$VideoPlayerHTML5Api63))},l.prototype.getVideoInfo=function(){"use strict";return this.$VideoPlayerHTML5Api7?{isHD:this.getSelectedVideoQuality()==this.getAvailableVideoQualities().pop(),streamType:this.$VideoPlayerHTML5Api7.getStreamType(),hasHD:this.getAvailableVideoQualities().length>1,areSubtitlesActive:this.areSubtitlesActive(),isMuted:this.isMuted(),isPlaying:this.$VideoPlayerHTML5Api14,playbackDuration:this.getPlaybackDuration(),volume:this.getVolume(),resourceUrl:this.$VideoPlayerHTML5Api30?"DASH manifest":this.$VideoPlayerHTML5Api64(),hasSubtitles:this.$VideoPlayerHTML5Api7.hasSubtitles()||this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.isCaptionAvailable(),hasUnlimitedSrc:this.$VideoPlayerHTML5Api7.hasRateLimit(),useUnlimitedSrc:!this.$VideoPlayerHTML5Api16,projection:this.$VideoPlayerHTML5Api65(),tagSD:this.$VideoPlayerHTML5Api7.getSDTag(),tagHD:this.$VideoPlayerHTML5Api7.getHDTag(),isLiveStream:this.$VideoPlayerHTML5Api7.isLiveStream(),liveManifestUrl:this.$VideoPlayerHTML5Api7.getLiveManifestUrl()}:null},l.isImplementationUnavailable=function(e){"use strict";return t("isHTML5VideoImplementationUnavailable")(e)},l.prototype.pause=function(e){"use strict";if(this.$VideoPlayerHTML5Api18=e,"unloaded"===e&&!this.$VideoPlayerHTML5Api66()){var i=this.$VideoPlayerHTML5Api48||t("VideoPlayerHTML5Experiments").unloadShouldCancelPendingRequest;i&&this.$VideoPlayerHTML5Api13?this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING,this.addWatchTimeData({reason:"unloaded"})):this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").PAUSED,this.addWatchTimeData({reason:"unloaded"})),this.$VideoPlayerHTML5Api47=!0,this.preventPauseLoggingInMixin=!0}this.$VideoPlayerHTML5Api67(),this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.pause():this.$VideoPlayerHTML5Api29.pause()},l.prototype.$VideoPlayerHTML5Api56=function(e){"use strict";this.$VideoPlayerHTML5Api13=e},l.prototype.preload=function(){"use strict";this.$VideoPlayerHTML5Api28||(this.$VideoPlayerHTML5Api1&&this.$VideoPlayerHTML5Api68(),this.$VideoPlayerHTML5Api28=!0,this.$VideoPlayerHTML5Api29.setAttribute("preload","auto"))},l.prototype.isPreloading=function(){"use strict";return this.$VideoPlayerHTML5Api28},l.prototype.play=function(e){"use strict";return this.$VideoPlayerHTML5Api42||(this.$VideoPlayerHTML5Api42=e),this.$VideoPlayerHTML5Api19=e,this.$VideoPlayerHTML5Api66()?(this.$VideoPlayerHTML5Api26=!0,this.$VideoPlayerHTML5Api56(!0),this.$VideoPlayerHTML5Api1?(t("dispatchEvent")(this.$VideoPlayerHTML5Api29,"play"),this.$VideoPlayerHTML5Api68(),void(this.$VideoPlayerHTML5Api3=!0)):void this.$VideoPlayerHTML5Api70()):void this.$VideoPlayerHTML5Api69()},l.prototype.$VideoPlayerHTML5Api67=function(){"use strict";this.$VideoPlayerHTML5Api3&&this.$VideoPlayerHTML5Api29.paused&&t("dispatchEvent")(this.$VideoPlayerHTML5Api29,"pause"),this.$VideoPlayerHTML5Api56(!1),this.$VideoPlayerHTML5Api71()},l.prototype.$VideoPlayerHTML5Api71=function(){"use strict";this.$VideoPlayerHTML5Api26=!1,this.$VideoPlayerHTML5Api3=!1},l.prototype.$VideoPlayerHTML5Api72=function(){"use strict";this.$VideoPlayerHTML5Api29.setAttribute("preload","auto"),this.$VideoPlayerHTML5Api28=!0,this.$VideoPlayerHTML5Api29.load(),this.$VideoPlayerHTML5Api29.muted=this.$VideoPlayerHTML5Api22},l.prototype.seek=function(e){"use strict";this.allowNextSeekInMixin(),this.$VideoPlayerHTML5Api29.currentTime=e},l.prototype.removeRotation=function(){"use strict";t("CSS").removeClass(this.$VideoPlayerHTML5Api29,"_56jr"),t("CSS").removeClass(this.$VideoPlayerHTML5Api29,"_56js"),t("CSS").removeClass(this.$VideoPlayerHTML5Api29,"_56jt"),this.$VideoPlayerHTML5Api29.style.marginLeft="",this.$VideoPlayerHTML5Api29.style.marginTop="",this.$VideoPlayerHTML5Api29.style.width="",this.$VideoPlayerHTML5Api29.style.height=""},l.prototype.applyRotation=function(e){"use strict";if(e&&(t("CSS").conditionClass(this.$VideoPlayerHTML5Api29,"_56jr",90==e),t("CSS").conditionClass(this.$VideoPlayerHTML5Api29,"_56js",180==e),t("CSS").conditionClass(this.$VideoPlayerHTML5Api29,"_56jt",270==e),180!=e)){var i=this.$VideoPlayerHTML5Api11,r=this.$VideoPlayerHTML5Api45,a=(i-r)/2,n=(r-i)/2;this.$VideoPlayerHTML5Api29.style.marginLeft=n+"px",this.$VideoPlayerHTML5Api29.style.marginTop=a+"px",this.$VideoPlayerHTML5Api29.style.height=r+"px",this.$VideoPlayerHTML5Api29.style.width=i+"px"}},l.prototype.switchVideo=function(e){"use strict";if(this.$VideoPlayerHTML5Api6.videoData&&!(this.$VideoPlayerHTML5Api6.videoData.length<=e)){var i=new(t("VideoData"))(this.$VideoPlayerHTML5Api6.videoData[e]);if(this.$VideoPlayerHTML5Api7=i,(i.hasDashManifest()||i.isLiveStream())&&this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka&&this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka.isSupported()&&!this.$VideoPlayerHTML5Api6.fallbackSources){this.$VideoPlayerHTML5Api5.destroy();var r,a;r=i.getDashManifest(),i.isLiveStream()&&(a=i.getLiveManifestUrl());var n=new this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka(this.$VideoPlayerHTML5Api29,i.getDashPrefetchedRepresentationIDs(),{accessToken:this.$VideoPlayerHTML5Api2,minPlayQuality:this.$VideoPlayerHTML5Api23,maxPlayQuality:this.$VideoPlayerHTML5Api24,width:this.$VideoPlayerHTML5Api45,height:this.$VideoPlayerHTML5Api11,manifest:r,manifestUrl:a,isLive:i.isLiveStream(),startTimestamp:this.$VideoPlayerHTML5Api31,videoID:this.getVideoID(),playerOrigin:this.$VideoPlayerHTML5Api6.playerOrigin,playerSuborigin:this.$VideoPlayerHTML5Api6.playerSuborigin});n.addListener("bufferingStart",function(){return this.$VideoPlayerHTML5Api52()}.bind(this)),n.addListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Api53()}.bind(this)),n.addListener("tracksChanged",function(){return this.emit("qualityChange")}.bind(this)),n.addListener("streamInterrupted",function(){return this.$VideoPlayerHTML5Api59()}.bind(this)),n.addListener("streamResumed",function(){return this.$VideoPlayerHTML5Api60()}.bind(this)),n.addListener("adaptation",function(e){var i=e.reason;this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").QUALITY_CHANGE,{reason:i}),this.emit("qualityChange")}.bind(this)),n.addListener("representation_ended",function(e){t("dispatchCustomEvent")(this.$VideoPlayerHTML5Api29,"representationended",e)}.bind(this)),n.addListener("debug/shakaEvent",function(e){return this.emit("debug/shakaEvent",e)}.bind(this)),n.addListener("error",function(e){return this.$VideoPlayerHTML5Api73(e)}.bind(this)),n.once("captionParsed",function(){this.$VideoPlayerHTML5Api74()}.bind(this)),this.$VideoPlayerHTML5Api30=n,this.$VideoPlayerHTML5Api10.remove()}else this.$VideoPlayerHTML5Api29.src=this.$VideoPlayerHTML5Api64(),this.$VideoPlayerHTML5Api31&&this.seek(this.$VideoPlayerHTML5Api31);this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.removeSubtitles(),i.hasSubtitles()&&this.$VideoPlayerHTML5Api75(this.$VideoPlayerHTML5Api7.getSubtitlesSrc()),this.removeRotation(),this.applyRotation(i.getRotation())}},l.prototype.switchToStreamType=function(e){"use strict"},l.prototype.replaceVideoDataFromURL=function(e){"use strict"},l.prototype.getCurrentlyPlayingStreamInfoID=function(){"use strict";return this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.getStreamInfoIDForTimePosition(this.getCurrentTimePosition()):null},l.prototype.unmute=function(){"use strict";return this.$VideoPlayerHTML5Api1?(this.$VideoPlayerHTML5Api1.mutedState=!1,this.$VideoPlayerHTML5Api22=!1,void this.emit("unmuteVideo")):void(this.$VideoPlayerHTML5Api29.muted=!1)},l.prototype.mute=function(){"use strict";return this.$VideoPlayerHTML5Api1?(this.$VideoPlayerHTML5Api1.mutedState=!0,this.$VideoPlayerHTML5Api22=!0,void this.emit("muteVideo")):void(this.$VideoPlayerHTML5Api29.muted=!0)},l.prototype.setRotation=function(e){"use strict";this.removeRotation(),this.applyRotation(e)},l.prototype.setDimensions=function(e,t){"use strict";this.removeRotation(),this.$VideoPlayerHTML5Api45=e,this.$VideoPlayerHTML5Api11=t,this.applyRotation(this.$VideoPlayerHTML5Api7.getRotation()),this.$VideoPlayerHTML5Api32&&this.$VideoPlayerHTML5Api32.updateDimensions(e,t),this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.setDimensions(e,t),this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.setDimensions(e),this.emit("dimensionsChange",e,t)},l.prototype.$VideoPlayerHTML5Api76=function(){"use strict";this.$VideoPlayerHTML5Api29.controls=!this.$VideoPlayerHTML5Api8},l.prototype.$VideoPlayerHTML5Api54=function(){"use strict";this.$VideoPlayerHTML5Api29.controls=this.$VideoPlayerHTML5Api29.controls&&!this.$VideoPlayerHTML5Api8},l.prototype.$VideoPlayerHTML5Api55=function(){"use strict";this.$VideoPlayerHTML5Api10=t("EventListener").listen(this.$VideoPlayerHTML5Api29,"error",this.$VideoPlayerHTML5Api77.bind(this)),this.$VideoPlayerHTML5Api34.addSubscriptions(this.$VideoPlayerHTML5Api10,t("EventListener").listen(this.$VideoPlayerHTML5Api29,"playing",this.$VideoPlayerHTML5Api78.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"play",this.$VideoPlayerHTML5Api69.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"ended",this.$VideoPlayerHTML5Api79.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"waiting",this.$VideoPlayerHTML5Api80.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"pause",this.$VideoPlayerHTML5Api81.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"volumechange",this.$VideoPlayerHTML5Api82.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"mousedown",this.$VideoPlayerHTML5Api83.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"mouseup",this.$VideoPlayerHTML5Api84.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"timeupdate",this.$VideoPlayerHTML5Api85.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"click",this.$VideoPlayerHTML5Api86.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"loadedmetadata",this.$VideoPlayerHTML5Api87.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"progress",this.$VideoPlayerHTML5Api88.bind(this)),t("EventListener").listen(this.$VideoPlayerHTML5Api29,"seeked",this.$VideoPlayerHTML5Api89.bind(this)),t("EventListener").capture(this.$VideoPlayerHTML5Api29.parentNode,"pause",this.$VideoPlayerHTML5Api90.bind(this)))},l.prototype.$VideoPlayerHTML5Api91=function(e){"use strict";this.preventPauseLoggingInMixin=!1,e.preventDefault(),e.stopPropagation()},l.prototype.$VideoPlayerHTML5Api90=function(e){"use strict";e.target===this.$VideoPlayerHTML5Api29&&(this.$VideoPlayerHTML5Api29.ended||(this.$VideoPlayerHTML5Api47&&this.$VideoPlayerHTML5Api91(e),e.lastPauseReason=this.$VideoPlayerHTML5Api18),this.$VideoPlayerHTML5Api47=!1)},l.prototype.$VideoPlayerHTML5Api88=function(){"use strict";for(var e=this.$VideoPlayerHTML5Api29.buffered,t=0,i=0,r=e.length;r-- >0;){var a=e.end(r),n=e.start(r);if(n<=this.$VideoPlayerHTML5Api29.currentTime){i=n,t=a-n;break}}this.$VideoPlayerHTML5Api58(),this.$VideoPlayerHTML5Api92("flash/updateBuffer",{duration:t,offset:i})},l.prototype.$VideoPlayerHTML5Api61=function(){"use strict";clearTimeout(this.$VideoPlayerHTML5Api25)},l.prototype.$VideoPlayerHTML5Api58=function(){"use strict";this.$VideoPlayerHTML5Api61(),this.$VideoPlayerHTML5Api29.networkState===this.$VideoPlayerHTML5Api29.NETWORK_LOADING&&(this.$VideoPlayerHTML5Api25=setTimeout(function(){return this.$VideoPlayerHTML5Api93()}.bind(this),l.networkTimeout))},l.prototype.$VideoPlayerHTML5Api93=function(){"use strict";for(var e=this.$VideoPlayerHTML5Api29.buffered,i=0,r=0;r<e.length;r++){var a=e.start(r),n=e.end(r);i+=n-a}this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").NETWORK_TIMEOUT,{buffered:i})},l.prototype.$VideoPlayerHTML5Api85=function(){"use strict";var e;e=this.$VideoPlayerHTML5Api1?this.$VideoPlayerHTML5Api1.currentTime:this.$VideoPlayerHTML5Api29.currentTime,this.$VideoPlayerHTML5Api92("flash/updateStatus",{position:+e.toFixed(3)})},l.prototype.$VideoPlayerHTML5Api86=function(e){"use strict";0===e.button&&(this.emit("clickVideo"),e.preventDefault())},l.prototype.$VideoPlayerHTML5Api66=function(){"use strict";return this.$VideoPlayerHTML5Api29.paused},l.prototype.$VideoPlayerHTML5Api94=function(){"use strict";var e=this.$VideoPlayerHTML5Api29.buffered;return e.length>0&&0===e.start(0)&&e.end(0)===this.$VideoPlayerHTML5Api29.duration},l.prototype.$VideoPlayerHTML5Api80=function(){"use strict";this.$VideoPlayerHTML5Api94()||(this.$VideoPlayerHTML5Api44=!0,this.$VideoPlayerHTML5Api92("flash/buffering"))},l.prototype.setVolume=function(e){"use strict";this.$VideoPlayerHTML5Api29.volume=e},l.prototype.$VideoPlayerHTML5Api82=function(){"use strict";this.$VideoPlayerHTML5Api29.muted!==this.$VideoPlayerHTML5Api22&&this.$VideoPlayerHTML5Api29.volume===this.$VideoPlayerHTML5Api43&&this.$VideoPlayerHTML5Api29.volume>0?(this.$VideoPlayerHTML5Api22=this.$VideoPlayerHTML5Api29.muted,this.$VideoPlayerHTML5Api43=this.$VideoPlayerHTML5Api29.volume,this.$VideoPlayerHTML5Api29.muted?this.$VideoPlayerHTML5Api92("flash/muteVideo"):this.$VideoPlayerHTML5Api92("flash/unmuteVideo")):(this.$VideoPlayerHTML5Api22=this.$VideoPlayerHTML5Api29.muted,this.$VideoPlayerHTML5Api43=this.$VideoPlayerHTML5Api29.volume,this.$VideoPlayerHTML5Api92("flash/changeVolume",{volume:this.$VideoPlayerHTML5Api29.volume})),this.$VideoPlayerHTML5Api29.muted||this.$VideoPlayerHTML5Api92("flash/turnOffAutoplay",{reason:"unmuted"})},l.prototype.$VideoPlayerHTML5Api83=function(e){"use strict";0===e.button&&(this.$VideoPlayerHTML5Api21=!0)},l.prototype.$VideoPlayerHTML5Api84=function(e){"use strict";0===e.button&&(this.$VideoPlayerHTML5Api21=!1)},l.prototype.$VideoPlayerHTML5Api78=function(){"use strict";this.$VideoPlayerHTML5Api56(!1),this.$VideoPlayerHTML5Api44&&(this.$VideoPlayerHTML5Api44=!1,this.$VideoPlayerHTML5Api92("flash/buffered")),this.$VideoPlayerHTML5Api95()},l.prototype.$VideoPlayerHTML5Api69=function(){"use strict";this.$VideoPlayerHTML5Api14=!0,this.$VideoPlayerHTML5Api76(),this.$VideoPlayerHTML5Api96(),this.$VideoPlayerHTML5Api92("flash/beginPlayback",{position:+this.$VideoPlayerHTML5Api29.currentTime.toFixed(2),reason:this.$VideoPlayerHTML5Api19}),this.$VideoPlayerHTML5Api58()},l.prototype.$VideoPlayerHTML5Api81=function(){"use strict";if(this.$VideoPlayerHTML5Api29.ended)return this.$VideoPlayerHTML5Api14=!1,void this.$VideoPlayerHTML5Api56(!1);if(!(this.$VideoPlayerHTML5Api29.seeking&&this.$VideoPlayerHTML5Api18===t("VideoPlayerReason").SEEK||this.$VideoPlayerHTML5Api21)){if(this.$VideoPlayerHTML5Api18===t("VideoPlayerReason").SEEK)return void(this.$VideoPlayerHTML5Api18=null);null!==this.$VideoPlayerHTML5Api18&&this.$VideoPlayerHTML5Api18!==t("VideoPlayerReason").USER||this.$VideoPlayerHTML5Api92("flash/turnOffAutoplay",{reason:"manually_paused"}),this.$VideoPlayerHTML5Api18=null,this.$VideoPlayerHTML5Api14=!1,this.$VideoPlayerHTML5Api56(!1),this.$VideoPlayerHTML5Api54(),this.$VideoPlayerHTML5Api92("flash/pausePlayback",{position:this.$VideoPlayerHTML5Api29.currentTime.toFixed(2)})}},l.prototype.$VideoPlayerHTML5Api79=function(){"use strict";this.$VideoPlayerHTML5Api1||(this.$VideoPlayerHTML5Api54(),this.$VideoPlayerHTML5Api14=!1,this.$VideoPlayerHTML5Api56(!1),this.$VideoPlayerHTML5Api92("flash/finishPlayback"),this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles(),this.$VideoPlayerHTML5Api97())},l.prototype.$VideoPlayerHTML5Api89=function(){"use strict";this.emit("seekEnd",{position:+this.$VideoPlayerHTML5Api29.currentTime.toFixed(3)})},l.prototype.getEstimatedBandwidth=function(){"use strict";return this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka?this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka.getEstimatedBandwidth():null},l.prototype.$VideoPlayerHTML5Api87=function(){"use strict";this.$VideoPlayerHTML5Api92("flash/updateMetadata")},l.prototype.$VideoPlayerHTML5Api73=function(e){"use strict";this.emit("error",babelHelpers["extends"]({},e,{isPlayback:this.$VideoPlayerHTML5Api26}))},l.prototype.$VideoPlayerHTML5Api77=function(){"use strict";if(!this.$VideoPlayerHTML5Api1&&this.$VideoPlayerHTML5Api29.error){var e=this.$VideoPlayerHTML5Api29.error;this.emit("error",{error:h(e.code),isPlayback:this.$VideoPlayerHTML5Api26,message:o(e.code)})}},l.prototype.$VideoPlayerHTML5Api57=function(e,i){"use strict";e===t("VideoPlayerLoggerEvent").STARTED_PLAYING&&this.$VideoPlayerHTML5Api30&&(i.longest_init_response_time=this.$VideoPlayerHTML5Api30.getLongestInitResponseTime()),i.player_version=t("VideoPlayerVersions").PLEASANTVILLE,i.projection=this.$VideoPlayerHTML5Api65(),this.$VideoPlayerHTML5Api92("flash/logEvent",{logData:babelHelpers["extends"]({event:e},i)})},l.prototype.$VideoPlayerHTML5Api92=function(e,i){"use strict";t("Arbiter").inform(e,babelHelpers["extends"]({divID:this.$VideoPlayerHTML5Api12},i)),this.emit(e.substr("flash/".length),i)},l.prototype.$VideoPlayerHTML5Api95=function(){"use strict";var e=this.getVideoID();this.$VideoPlayerHTML5Api37=t("RTISubscriptionManager").subscribe("live/broadcast/caption/"+e,this.$VideoPlayerHTML5Api98.bind(this))},l.prototype.$VideoPlayerHTML5Api97=function(){"use strict";this.$VideoPlayerHTML5Api37&&this.$VideoPlayerHTML5Api37.unsubscribe()},l.prototype.getLastPlayReason=function(){"use strict";return this.$VideoPlayerHTML5Api19},l.prototype.getVideoPlayReason=function(){"use strict";return this.$VideoPlayerHTML5Api42},l.prototype.isMuted=function(){"use strict";return this.$VideoPlayerHTML5Api22},l.prototype.getPlaybackDuration=function(){"use strict";return this.$VideoPlayerHTML5Api1?this.$VideoPlayerHTML5Api1.playbackDuration:this.$VideoPlayerHTML5Api29.duration||0},l.prototype.getVolume=function(){"use strict";return this.$VideoPlayerHTML5Api29.volume},l.prototype.getCurrentTimePosition=function(){"use strict";return this.$VideoPlayerHTML5Api29.currentTime},l.prototype.$VideoPlayerHTML5Api64=function(){"use strict";return this.$VideoPlayerHTML5Api6.fallbackSources?this.$VideoPlayerHTML5Api15&&this.$VideoPlayerHTML5Api6.fallbackSources.HD?this.$VideoPlayerHTML5Api6.fallbackSources.HD:this.$VideoPlayerHTML5Api6.fallbackSources.SD:this.$VideoPlayerHTML5Api15&&this.$VideoPlayerHTML5Api7.hasHD()?this.$VideoPlayerHTML5Api99():this.$VideoPlayerHTML5Api100()},l.prototype.$VideoPlayerHTML5Api99=function(){"use strict";return this.$VideoPlayerHTML5Api16?this.$VideoPlayerHTML5Api7.getPlayableSrcRateLimitedHD():this.$VideoPlayerHTML5Api7.getPlayableSrcHD()},l.prototype.$VideoPlayerHTML5Api100=function(){"use strict";return this.$VideoPlayerHTML5Api16?this.$VideoPlayerHTML5Api7.getPlayableSrcRateLimitedSD():this.$VideoPlayerHTML5Api7.getPlayableSrcSD()},l.prototype.toggleSubtitles=function(){"use strict";this.$VideoPlayerHTML5Api36=!this.$VideoPlayerHTML5Api36,this.$VideoPlayerHTML5Api36?this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.showSubtitles():this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles(),this.emit("toggleSubtitles")},l.prototype.hasSubtitles=function(){"use strict";return this.$VideoPlayerHTML5Api7.hasSubtitles()},l.prototype.areSubtitlesActive=function(){"use strict";return this.$VideoPlayerHTML5Api36},l.prototype.areHLSActive=function(){"use strict";return!1},l.prototype.isRTMP=function(){"use strict";return!1},l.prototype.setSubtitlesStyle=function(e,t,i,r){"use strict";this.$VideoPlayerHTML5Api38=e,this.$VideoPlayerHTML5Api39=t,this.$VideoPlayerHTML5Api40=i,this.$VideoPlayerHTML5Api41=r},l.prototype.$VideoPlayerHTML5Api96=function(){"use strict";this.$VideoPlayerHTML5Api36?this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.showSubtitles():this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles()},l.prototype.$VideoPlayerHTML5Api101=function(){"use strict";this.$VideoPlayerHTML5Api14&&this.$VideoPlayerHTML5Api96(),this.emit("loadedSubtitles"),this.$VideoPlayerHTML5Api35.setSubtitlesStyle(this.$VideoPlayerHTML5Api38,this.$VideoPlayerHTML5Api39,this.$VideoPlayerHTML5Api40,this.$VideoPlayerHTML5Api41)},l.prototype.$VideoPlayerHTML5Api98=function(){"use strict";var e=this.getVideoID(),i=t("XLiveBroadcastCaptionsURIFetchAsyncController").getURIBuilder().setString("video_id",e).getURI();(new(t("AsyncRequest"))).setURI(i).setMethod("POST").setHandler(function(e){this.$VideoPlayerHTML5Api102(e.getPayload())}.bind(this)).send()},l.prototype.$VideoPlayerHTML5Api102=function(e){"use strict";this.$VideoPlayerHTML5Api75(e)},l.prototype.$VideoPlayerHTML5Api75=function(e){"use strict";t("Bootloader").loadModules(["VideoPlayerHTML5Subtitles","VideoPlayerWebVttSubtitleStream"],function(t,i){this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.removeSubtitles();var r=this.$VideoPlayerHTML5Api6.subtitleDrawer,a=new i(this.$VideoPlayerHTML5Api29,e);this.$VideoPlayerHTML5Api35=new t(this.$VideoPlayerHTML5Api29,a),this.$VideoPlayerHTML5Api35.setOnSubtitlesReady(function(){return this.$VideoPlayerHTML5Api101()}.bind(this)),this.$VideoPlayerHTML5Api35.registerDrawer(r),this.$VideoPlayerHTML5Api35.loadSubtitles()}.bind(this),"VideoPlayerHTML5Api")},l.prototype.$VideoPlayerHTML5Api74=function(){"use strict";t("Bootloader").loadModules(["VideoPlayerHTML5Subtitles","VideoPlayerCea608SubtitleSource"],function(e,t){this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.removeSubtitles();var i=this.$VideoPlayerHTML5Api6.subtitleDrawer,r=new t(this.$VideoPlayerHTML5Api29);this.$VideoPlayerHTML5Api35=new e(this.$VideoPlayerHTML5Api29,r),this.$VideoPlayerHTML5Api35.setOnSubtitlesReady(function(){return this.$VideoPlayerHTML5Api101()}.bind(this)),this.$VideoPlayerHTML5Api35.registerDrawer(i),this.$VideoPlayerHTML5Api35.loadSubtitles()}.bind(this),"VideoPlayerHTML5Api")},l.prototype.setStillFrameEnabled=function(e){"use strict";this.$VideoPlayerHTML5Api33=!e},l.prototype.$VideoPlayerHTML5Api103=function(){"use strict";if(!this.$VideoPlayerHTML5Api33){var e;if(this.$VideoPlayerHTML5Api32)e=this.$VideoPlayerHTML5Api32;else{
var i=t("DOMDimensions").getElementDimensions(this.$VideoPlayerHTML5Api29),r=t("DOM").create("canvas",{width:i.width,height:i.height,className:"_3t5i"});t("DOM").insertAfter(this.$VideoPlayerHTML5Api29,r),this.$VideoPlayerHTML5Api32=e=new(t("VideoFrameBuffer"))(r,this.$VideoPlayerHTML5Api29)}t("CSS").show(e.getDOMNode()),e.updateFrameBuffer(),t("CSS").hide(this.$VideoPlayerHTML5Api29)}},l.prototype.$VideoPlayerHTML5Api62=function(){"use strict";this.$VideoPlayerHTML5Api32&&(t("CSS").hide(this.$VideoPlayerHTML5Api32.getDOMNode()),t("CSS").show(this.$VideoPlayerHTML5Api29))},l.prototype.$VideoPlayerHTML5Api68=function(){"use strict";var e=this.$VideoPlayerHTML5Api1;e&&(this.$VideoPlayerHTML5Api17||(this.$VideoPlayerHTML5Api17=!0,this.emit("restoringAfterAbort"),this.allowNextSeekInMixin(),this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.reload(e.currentTime):(this.$VideoPlayerHTML5Api29.src=this.$VideoPlayerHTML5Api64(),this.$VideoPlayerHTML5Api29.preload=e.preload),t("seekHTMLMediaElementTo")(this.$VideoPlayerHTML5Api29,e.currentTime,function(){this.$VideoPlayerHTML5Api62(),this.$VideoPlayerHTML5Api1&&(this.$VideoPlayerHTML5Api29.muted=this.$VideoPlayerHTML5Api1.mutedState,this.$VideoPlayerHTML5Api1=null,this.emit("restoredAfterAbort")),this.$VideoPlayerHTML5Api17=!1,t("onCanPlayHTMLMediaElement").once(this.$VideoPlayerHTML5Api29,function(){return this.$VideoPlayerHTML5Api70()}.bind(this))}.bind(this))))},l.prototype.abortLoading=function(e){"use strict";if(e=e||{},!this.$VideoPlayerHTML5Api1){e.disableStillFrame||this.$VideoPlayerHTML5Api103();var i=this.$VideoPlayerHTML5Api29.currentTime,r=this.isMuted(),a=this.$VideoPlayerHTML5Api29.duration,n=this.$VideoPlayerHTML5Api29.paused,s=this.$VideoPlayerHTML5Api29.preload;if(this.$VideoPlayerHTML5Api28=!1,this.$VideoPlayerHTML5Api1={mutedState:r,currentTime:i,playbackDuration:a,preload:s},n&&this.$VideoPlayerHTML5Api14&&t("dispatchEvent")(this.$VideoPlayerHTML5Api29,"pause"),this.emit("abortedLoading"),this.$VideoPlayerHTML5Api30)return void this.$VideoPlayerHTML5Api30.unload();this.$VideoPlayerHTML5Api29.preload="none",this.$VideoPlayerHTML5Api29.removeAttribute("src"),this.$VideoPlayerHTML5Api29.load()}},l.prototype.setPreferredVideoQuality=function(e){"use strict";if(this.$VideoPlayerHTML5Api27=e,this.$VideoPlayerHTML5Api7){if(this.$VideoPlayerHTML5Api30&&t("VideoPlayerShakaExperiments").improveRebufferLogging)return void this.$VideoPlayerHTML5Api30.setPreferredVideoQuality(e);if(t("VideoPlayerHTML5Experiments").newStateChangeCalculation||(this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").PAUSED,this.addWatchTimeData({reason:"toggle_hd"})),this.$VideoPlayerHTML5Api57(t("VideoPlayerLoggerEvent").REQUESTED_PLAYING,{reason:t("VideoPlayerReason").USER})),this.$VideoPlayerHTML5Api30&&!t("VideoPlayerShakaExperiments").improveRebufferLogging)return void this.$VideoPlayerHTML5Api30.setPreferredVideoQuality(e);this.$VideoPlayerHTML5Api15=!this.$VideoPlayerHTML5Api15;var i=this.$VideoPlayerHTML5Api29.currentTime,r=this.$VideoPlayerHTML5Api29.muted,a=this.$VideoPlayerHTML5Api29.volume;this.$VideoPlayerHTML5Api29.src=this.$VideoPlayerHTML5Api64(),t("onCanPlayHTMLMediaElement").once(this.$VideoPlayerHTML5Api29,function(){this.$VideoPlayerHTML5Api29.currentTime=i,this.$VideoPlayerHTML5Api29.muted=r,this.$VideoPlayerHTML5Api29.volume=a,this.$VideoPlayerHTML5Api70(),this.emit("qualityChange")}.bind(this)),this.$VideoPlayerHTML5Api26=!0,this.$VideoPlayerHTML5Api56(!0),this.$VideoPlayerHTML5Api72()}},l.prototype.unsetPreferredVideoQuality=function(){"use strict";this.$VideoPlayerHTML5Api27=null,this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.unsetPreferredVideoQuality()},l.prototype.getPreferredVideoQuality=function(){"use strict";return this.$VideoPlayerHTML5Api27},l.prototype.getSelectedVideoQuality=function(){"use strict";return this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.getSelectedVideoQuality():this.$VideoPlayerHTML5Api15?"HD":"SD"},l.prototype.getAvailableVideoQualities=function(){"use strict";return this.$VideoPlayerHTML5Api6.fallbackSources?this.$VideoPlayerHTML5Api6.fallbackSources.HD?["SD","HD"]:["SD"]:this.$VideoPlayerHTML5Api7?this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.getAvailableVideoQualities():this.$VideoPlayerHTML5Api7.hasHD()?["SD","HD"]:["SD"]:[]},l.prototype.getIsAbrEnabled=function(){"use strict";return!!this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.getIsAbrEnabled()},l.prototype.canAutoSelectVideoQuality=function(){"use strict";return!!this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.canAutoSelectVideoQuality()},l.prototype.setPreloadDisabled=function(e){"use strict";this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.setPreloadDisabled(e)},l.prototype.restoreStreamBufferSize=function(){"use strict";this.$VideoPlayerHTML5Api30&&this.$VideoPlayerHTML5Api30.restoreStreamBufferSize()},l.getPlayerVersion=function(){"use strict";return t("VideoPlayerVersions").PLEASANTVILLE},l.prototype.$VideoPlayerHTML5Api65=function(){"use strict";return this.$VideoPlayerHTML5Api7.getProjection()},l.prototype.$VideoPlayerHTML5Api70=function(){"use strict";if(this.$VideoPlayerHTML5Api26){if(this.$VideoPlayerHTML5Api3)var e=t("EventListener").capture(this.$VideoPlayerHTML5Api29.parentNode,"play",function(i){t("Event").kill(i),e.remove()});var i=null;this.$VideoPlayerHTML5Api30?i=this.$VideoPlayerHTML5Api30.play():(t("VideoPlayerHTML5Experiments").preloadOnPlay&&(this.$VideoPlayerHTML5Api29.preload="auto"),i=this.$VideoPlayerHTML5Api29.play()),i&&i["catch"]&&i["catch"](function(e){this.$VideoPlayerHTML5Api56(!1)}.bind(this))}this.$VideoPlayerHTML5Api71()},l.getStreamTypeFromConfig=function(e){"use strict";var i=new(t("VideoData"))(e.videoData[0]);return i.getStreamType()},l.getIsPlayingLiveFromConfig=function(e){"use strict";var i=new(t("VideoData"))(e.videoData[0]);return i.isLiveStream()},l.getIsFacecastAudioFromConfig=function(e){"use strict";var i=new(t("VideoData"))(e.videoData[0]);return i.isFacecastAudio()},l.networkTimeout=5e3,a.exports=l},null),__d("CustomAbrManager",["EventListener","SubscriptionsHandler","Shaka","VideoPlayerStreamSwitchReasons","VideoQualityClasses","VideoPlayerShakaExperiments"],function(e,t,i,r,a,n){function s(e){"use strict";this.$CustomAbrManager1=null,this.$CustomAbrManager2=null,this.$CustomAbrManager3=new(t("SubscriptionsHandler")),this.$CustomAbrManager4=Number.POSITIVE_INFINITY,this.$CustomAbrManager5=!0,this.$CustomAbrManager6=!1,this.$CustomAbrManager7=e.maxWidth,this.$CustomAbrManager8=e.maxHeight,this.$CustomAbrManager9=e.minPlayQuality,this.$CustomAbrManager10=e.maxPlayQuality,this.$CustomAbrManager11=e.initiallyForcedRepresentations,this.$CustomAbrManager12=e.video,this.$CustomAbrManager13=null,this.$CustomAbrManager14=null,this.$CustomAbrManager15=null,e.enableAdaptation&&(this.$CustomAbrManager16=e.bandwidthDowngradeTarget,this.$CustomAbrManager17=e.bandwidthUpgradeTarget)}var o=t("Shaka").player.VideoTrack;s.prototype.destroy=function(){"use strict";this.$CustomAbrManager3.release(),this.$CustomAbrManager3.engage(),this.$CustomAbrManager1=null,this.$CustomAbrManager2=null,this.$CustomAbrManager5=!1},s.prototype.setResolutionConstraint=function(e,t){"use strict";this.$CustomAbrManager7=e,this.$CustomAbrManager8=t,this.$CustomAbrManager18()},s.prototype.initialize=function(e,t){"use strict";this.$CustomAbrManager1||this.$CustomAbrManager2||(this.$CustomAbrManager1=e,this.$CustomAbrManager2=t)},s.prototype.start=function(){"use strict";this.$CustomAbrManager1&&this.$CustomAbrManager2&&!this.$CustomAbrManager6&&(this.$CustomAbrManager4=Date.now()+s.FIRST_SWITCH_INTERVAL,this.$CustomAbrManager3.addSubscriptions(t("EventListener").listen(this.$CustomAbrManager1,"bandwidth",this.$CustomAbrManager19.bind(this)),t("EventListener").listen(this.$CustomAbrManager2,"adaptation",this.$CustomAbrManager20.bind(this)),t("EventListener").listen(this.$CustomAbrManager2,"trackschanged",this.$CustomAbrManager21.bind(this))),this.$CustomAbrManager6=!0)},s.prototype.$CustomAbrManager21=function(){"use strict";this.$CustomAbrManager18()},s.prototype.setPreferredVideoTrack=function(e){"use strict";var t=s.$CustomAbrManager22(this.$CustomAbrManager2.getVideoTracks()),i=!!t&&o.compare(t,e)<0;this.$CustomAbrManager13=e,this.$CustomAbrManager18(null,i)},s.prototype.unsetPreferredVideoTrack=function(){"use strict";this.$CustomAbrManager13=null,this.$CustomAbrManager18(null,!1)},s.prototype.enable=function(e){"use strict";this.$CustomAbrManager5=e},s.prototype.getInitialVideoTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var e=this.$CustomAbrManager23();return e?e.id:null},s.prototype.getInitialSwitchReason=function(){"use strict";return this.$CustomAbrManager15},s.prototype.getInitialAudioTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var e=this.$CustomAbrManager24();return e?e.id:null},s.prototype.selectVideoTrack=function(e,t,i,r){"use strict";this.$CustomAbrManager6&&this.$CustomAbrManager2.selectVideoTrack(e.id,t,i,r)},s.$CustomAbrManager22=function(e){"use strict";for(var t=0;t<e.length;++t)if(e[t].active)return e[t];return null},s.prototype.$CustomAbrManager25=function(){"use strict";for(var e=this.$CustomAbrManager12.currentTime,t=this.$CustomAbrManager12.buffered,i=0;i<t.length;i++){var r=t.start(i)-s.FUDGE_FACTOR,a=t.end(i)+s.FUDGE_FACTOR;if(e>=r&&e<=a)return t.end(i)-e}return 0},s.prototype.$CustomAbrManager19=function(e){"use strict";Date.now()<this.$CustomAbrManager4||this.$CustomAbrManager18(e)},s.prototype.$CustomAbrManager18=function(e,t){"use strict";if(this.$CustomAbrManager5){var i=this.$CustomAbrManager23();if(i){if(i.active)return void(this.$CustomAbrManager4=Date.now()+s.MIN_EVAL_INTERVAL);this.selectVideoTrack(i,!!t,0,this.$CustomAbrManager14)}this.$CustomAbrManager4=Number.POSITIVE_INFINITY}},s.prototype.$CustomAbrManager20=function(e){"use strict";this.$CustomAbrManager4==Number.POSITIVE_INFINITY&&(this.$CustomAbrManager4=Date.now()+s.MIN_SWITCH_INTERVAL)},s.prototype.$CustomAbrManager23=function(){var e,i=this,r=this.$CustomAbrManager2.getVideoTracks();if(0==r.length)return null;if(!this.$CustomAbrManager6)for(var a=0;a<r.length;a++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(r[a].streamInfoID))return this.$CustomAbrManager14=t("VideoPlayerStreamSwitchReasons").FORCED,this.$CustomAbrManager15=t("VideoPlayerStreamSwitchReasons").FORCED,r[a];if(this.$CustomAbrManager13){var n=r.find(function(e){return e.id===this.$CustomAbrManager13.id}.bind(this));if(n)return this.$CustomAbrManager14=t("VideoPlayerStreamSwitchReasons").USER,n}if(r.sort(o.compare),null!==this.$CustomAbrManager9||null!==this.$CustomAbrManager10){var e=function(){var e=null!==i.$CustomAbrManager9?t("VideoQualityClasses").indexOf(i.$CustomAbrManager9):0,a=null!==i.$CustomAbrManager10?t("VideoQualityClasses").indexOf(i.$CustomAbrManager10):t("VideoQualityClasses").length-1;if(e<=a){var n=r.filter(function(i){return t("VideoQualityClasses").indexOf(i.fbQualityClass)>=e&&t("VideoQualityClasses").indexOf(i.fbQualityClass)<=a});if(i.$CustomAbrManager14=t("VideoPlayerStreamSwitchReasons").PREFER_QUALITY_CLASS,!n.length)return{v:r[r.length-1]};var s=t("VideoQualityClasses").indexOf("sd");if(2==r.length&&2==n.length&&a<=s)return{v:r[0]};r=n}}();if("object"==typeof e)return e.v}var h=r[0],l=this.$CustomAbrManager8,u=this.$CustomAbrManager7,d=r;r=r.filter(function(e){return e.width<=u||e.height<=l});var p=s.$CustomAbrManager22(this.$CustomAbrManager2.getAudioTracks()),c=p?p.bandwidth:0,f=this.$CustomAbrManager25();if(f<t("VideoPlayerShakaExperiments").forceLowestRepresentationThreshold){var y=s.$CustomAbrManager22(d),g=0,m=d.indexOf(y);return m>-1&&(g=Math.floor(m*t("VideoPlayerShakaExperiments").forceLowerRepresentationStepRatio)),g>=r.length&&(g=r.length-1),this.$CustomAbrManager14=t("VideoPlayerStreamSwitchReasons").LOW_BUFFER_AVAILABILITY,r[g]}for(var T=this.$CustomAbrManager1.getBandwidth(),P=0;P<r.length;P++){var b=r[P],V=P+1<r.length?r[P+1]:{bandwidth:Number.POSITIVE_INFINITY};if(b.bandwidth){var M=(b.bandwidth+c)/this.$CustomAbrManager16,L=(V.bandwidth+c)/this.$CustomAbrManager17;if(T>=M&&T<=L&&(h=b,h.active))break}}return this.$CustomAbrManager14=t("VideoPlayerStreamSwitchReasons").BANDWIDTH,h},s.prototype.$CustomAbrManager24=function(){"use strict";var e=this.$CustomAbrManager2.getAudioTracks();if(0==e.length)return null;if(!this.$CustomAbrManager6)for(var t=0;t<e.length;t++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(e[t].streamInfoID))return e[t];return null},s.FIRST_SWITCH_INTERVAL=t("VideoPlayerShakaExperiments").firstSwitchInterval,s.MIN_SWITCH_INTERVAL=t("VideoPlayerShakaExperiments").minSwitchInterval,s.MIN_EVAL_INTERVAL=t("VideoPlayerShakaExperiments").minEvalInterval,s.FUDGE_FACTOR=1/60,a.exports=s},null),__d("VideoPlayerLiveStreamState",["RTISubscriptionManager","EventEmitter"],function(e,t,i,r,a,n){"use strict";function s(e){h.constructor.call(this),this.$VideoPlayerLiveStreamState1=[];for(var i in l)this.$VideoPlayerLiveStreamState1.push(t("RTISubscriptionManager").subscribe("video_broadcast/"+i+"_"+e,this.$VideoPlayerLiveStreamState2.bind(this,l[i])))}var o,h,l={interrupt:"streamInterruptAt",ended:"endedAt"};o=babelHelpers.inherits(s,t("EventEmitter")),h=o&&o.prototype,s.prototype.unsubscribe=function(){for(var e=this.$VideoPlayerLiveStreamState1,t=Array.isArray(e),i=0,e=t?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var r;if(t){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var a=r;a.unsubscribe()}},s.prototype.$VideoPlayerLiveStreamState2=function(e,t){var i=JSON.parse(t.payload||"{}")||{},r=i.time_position;"number"==typeof r&&(r/=1e3,this.emit(e,r))},a.exports=s},null),__d("VideoPlayerHTML5Shaka",["invariant","Promise","BlobFactory","CacheStorage","CustomAbrManager","EventEmitter","EventListener","Event","TaggedTimeRanges","URI","VideoDashPrefetchCache","VideoPlayerLiveStreamState","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaExperiments","VideoQualityClasses","VideoPlayerShakaPerformanceLogger","dispatchEvent","Shaka"],function(e,t,i,r,a,n,s){function o(e){var t=e.getVideoTracks();t.sort(m.compare);var i=t.reduce(function(e,t){return"hd"==t.fbQualityLabel?t:e});return i?i.id:t.pop().id}function h(e){var t=e.getVideoTracks();return t.sort(m.compare),t.shift().id}function l(e,i){var r=t("EventListener").capture(e.parentNode,i,function(i){i.target==e&&(r.remove(),t("Event").kill(i))})}function u(e,t){"use strict";this.$DisabledAbrManager1=e,this.$DisabledAbrManager2=t}function d(e,i,r){var a=r.videoID,n=r.width,s=r.height,o=r.manifest,h=r.manifestUrl,l=r.isLive,u=r.minPlayQuality,p=r.maxPlayQuality,f=r.accessToken,g=r.startTimestamp,m=r.playerOrigin,P=r.playerSuborigin;c.constructor.call(this),this.$VideoPlayerHTML5Shaka1=u,this.$VideoPlayerHTML5Shaka2=p,this.$VideoPlayerHTML5Shaka3=!1,this.$VideoPlayerHTML5Shaka4=null,this.$VideoPlayerHTML5Shaka5=1,this.$VideoPlayerHTML5Shaka6=!1,this.$VideoPlayerHTML5Shaka7=l,this.$VideoPlayerHTML5Shaka8=!1,this.$VideoPlayerHTML5Shaka9=n,this.$VideoPlayerHTML5Shaka10=s,this.$VideoPlayerHTML5Shaka11=i,this.$VideoPlayerHTML5Shaka12=null;var b=this.$VideoPlayerHTML5Shaka12;this.$VideoPlayerHTML5Shaka13=t("VideoPlayerShakaPerformanceLogger").isEnabled()?new(t("VideoPlayerShakaPerformanceLogger"))({videoID:a,video:e,representationId:b,isLive:l,accessToken:f,playerOrigin:m,playerSuborigin:P}):null,t("VideoPlayerShakaExperiments").improveRebufferLogging||(this.$VideoPlayerHTML5Shaka14=!0),t("EventListener").listen(e,"playing",this.$VideoPlayerHTML5Shaka15.bind(this)),t("EventListener").listen(e,"timeupdate",function(e){this.$VideoPlayerHTML5Shaka16(e.target.currentTime)}.bind(this)),t("EventListener").listen(e,"pause",this.$VideoPlayerHTML5Shaka17.bind(this)),t("EventListener").listen(e,"play",function(){this.$VideoPlayerHTML5Shaka8=!0}.bind(this)),this.$VideoPlayerHTML5Shaka18=null,this.$VideoPlayerHTML5Shaka19=null,this.$VideoPlayerHTML5Shaka20=null,this.$VideoPlayerHTML5Shaka21=new y(e,this.$VideoPlayerHTML5Shaka13),this.$VideoPlayerHTML5Shaka21.addEventListener("bufferingStart",function(){return this.$VideoPlayerHTML5Shaka22()}.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Shaka23()}.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("error",function(e){return this.$VideoPlayerHTML5Shaka24(e)}.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("adaptation",this.$VideoPlayerHTML5Shaka25.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("trackschanged",this.$VideoPlayerHTML5Shaka26.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("debug/shakaEvent",function(e){return this.emit("debug/shakaEvent",e.detail)}.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("manifestwrapped",this.$VideoPlayerHTML5Shaka27.bind(this)),this.$VideoPlayerHTML5Shaka21.addEventListener("captionParsed",function(){return this.emit("captionParsed")}.bind(this)),t("VideoPlayerShakaExperiments").enableLiveInterruptionDetection&&this.$VideoPlayerHTML5Shaka21.addEventListener("manifestIsUpdating",this.$VideoPlayerHTML5Shaka28.bind(this));var V=!1,M=null,L=null;this.$VideoPlayerHTML5Shaka29=t("VideoPlayerShakaExperiments").liveSendPushHeaders,o?this.$VideoPlayerHTML5Shaka30=T(o,h):(this.$VideoPlayerHTML5Shaka30=h,V=h.indexOf("dash-abr")!==-1),V&&(this.$VideoPlayerHTML5Shaka29=t("VideoPlayerShakaExperiments").liveAbrSendPushHeaders,this.$VideoPlayerHTML5Shaka29&&(M=t("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation,L=t("VideoPlayerShakaExperiments").liveAbrAudioPushRepresentation,this.$VideoPlayerHTML5Shaka11=[t("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation]),t("VideoPlayerShakaExperiments").liveAbrAlwaysForceRepresentation&&(this.$VideoPlayerHTML5Shaka11=[t("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation])),this.$VideoPlayerHTML5Shaka31=e,this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33(),this.$VideoPlayerHTML5Shaka34=this.$VideoPlayerHTML5Shaka35(),this.$VideoPlayerHTML5Shaka21.configure({enableAdaptation:!0,appendPlayingQueryParam:t("VideoPlayerShakaExperiments").addCdnDebugQueryParameters,endBufferingOnPlaying:t("VideoPlayerShakaExperiments").endBufferingOnPlaying,usePlaybackRateForBuffering:t("VideoPlayerShakaExperiments").improveRebufferLogging,streamBufferSize:t("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka36(),initialStreamBufferSize:d.isAutoplayBandwidthRestrained(l)||t("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka37(),dynamicStreamBufferSize:l?t("VideoPlayerShakaExperiments").liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:t("VideoPlayerShakaExperiments").includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:t("VideoPlayerShakaExperiments").minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:!0,liveStreamEndTimeout:t("VideoPlayerShakaExperiments").liveStreamEndTimeout/1e3,enableLiveInterruptionDetection:t("VideoPlayerShakaExperiments").enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:t("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:t("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:t("VideoPlayerShakaExperiments").liveMaxSegmentsToPush,liveSendPushHeaders:!d.isAutoplayBandwidthRestrained(l)&&this.$VideoPlayerHTML5Shaka38(),liveMaxManifestFetchesWithPush:t("VideoPlayerShakaExperiments").liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:t("VideoPlayerShakaExperiments").resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:t("VideoPlayerShakaExperiments").enableVideoDebug,reappendInitSegmentAfterAbort:t("VideoPlayerShakaExperiments").reappendInitSegmentAfterAbort,useInlineInitSegment:t("VideoPlayerShakaExperiments").useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:t("VideoPlayerShakaExperiments").currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:M,liveAudioPushRepresentation:L,jumpToLiveThreshold:t("VideoPlayerShakaExperiments").jumpToLiveThreshold,liveDataFetchMaxRetries:t("VideoPlayerShakaExperiments").liveDataFetchMaxRetries,liveSourceBufferClearMaxRetries:t("VideoPlayerShakaExperiments").liveSourceBufferClearMaxRetries,useLongCacheForManifest:t("VideoPlayerShakaExperiments").useLongCacheForManifest,jumpToEarliestPositionInCurrentBlock:t("VideoPlayerShakaExperiments").jumpToEarliestPositionInCurrentBlock,ignoreMinBufferTime:t("VideoPlayerShakaExperiments").ignoreMinBufferTime,playheadFragmentedGapDiffAllowance:t("VideoPlayerShakaExperiments").playheadFragmentedGapDiffAllowance,fixBufferingGoalDetermination:t("VideoPlayerShakaExperiments").fixBufferingGoalDetermination,skipEmptySegments:t("VideoPlayerShakaExperiments").skipEmptySegments,useMicroTaskTimeouts:t("VideoPlayerShakaExperiments").useMicroTaskTimeouts}),l&&t("VideoPlayerShakaExperiments").enableLiveInterruptionDetection&&(this.$VideoPlayerHTML5Shaka39=new(t("VideoPlayerLiveStreamState"))(a),this.$VideoPlayerHTML5Shaka39.addListener("streamInterruptAt",this.$VideoPlayerHTML5Shaka40.bind(this)),["streamInterruptAt","commercialBreakAt","endedAt"].forEach(function(e){this.$VideoPlayerHTML5Shaka39.addListener(e,function(t){this.emit("debug/shakaEvent",{type:e,event:t})}.bind(this))}.bind(this))),g&&this.$VideoPlayerHTML5Shaka21.setPlaybackStartTime(g),this.$VideoPlayerHTML5Shaka21.load(this.$VideoPlayerHTML5Shaka34)}var p,c,f=t("Shaka").player,y=f.Player,g=f.DashVideoSource,m=f.VideoTrack,T=t("Shaka").dash.mpd.parseMpd,P=t("Shaka").util.FailoverUri,b=window.devicePixelRatio||1,V=t("VideoPlayerShakaBandwidthEstimator").getEstimator();P.setPrefetchCacheValueGetter(t("VideoDashPrefetchCache").getCacheValue),u.prototype.initialize=function(e,t){"use strict";this.$DisabledAbrManager3=t},u.prototype.start=function(){"use strict";this.$DisabledAbrManager4||(this.$DisabledAbrManager4=!0,this.$DisabledAbrManager2&&this.$DisabledAbrManager1&&this.$DisabledAbrManager3.selectVideoTrack(o(this.$DisabledAbrManager3),!1))},u.prototype.enable=function(){"use strict"},u.prototype.getInitialVideoTrackId=function(){"use strict";if(this.$DisabledAbrManager2)return h(this.$DisabledAbrManager3);var e=this.$DisabledAbrManager1?o(this.$DisabledAbrManager3):h(this.$DisabledAbrManager3);return e},u.prototype.setPreferredVideoTrack=function(e){"use strict";this.$DisabledAbrManager4&&this.$DisabledAbrManager3.selectVideoTrack(e.id,!0)},u.prototype.unsetPreferredVideoTrack=function(){"use strict"},u.prototype.destroy=function(){"use strict";this.$DisabledAbrManager3=null},p=babelHelpers.inherits(d,t("EventEmitter")),c=p&&p.prototype,d.prototype.isCaptionAvailable=function(){"use strict";return!1},d.prototype.getDebug=function(){"use strict";return{AbrManager:this.$VideoPlayerHTML5Shaka32,VideoSource:this.$VideoPlayerHTML5Shaka34,ShakaPlayer:this.$VideoPlayerHTML5Shaka21}},d.getEstimatedBandwidth=function(){"use strict";return V.getBandwidth()},d.isAutoplayBandwidthRestrained=function(e){"use strict";var i=t("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(e);return i},d.prototype.$VideoPlayerHTML5Shaka16=function(e){"use strict";var t=this.$VideoPlayerHTML5Shaka41.get(e);if(t){var i=t.id,r=t.reason,a=t.performanceLogger;if(this.$VideoPlayerHTML5Shaka12!==i){var n=this.$VideoPlayerHTML5Shaka12;this.$VideoPlayerHTML5Shaka12=i,a&&a.setStreamSwitchReason(r).log(),this.emit("representation_ended",{representationID:n,nextRepresentationID:i,streamSwitchReason:r})}}},d.prototype.getStreamInfoIDForTimePosition=function(e){"use strict";var t=this.$VideoPlayerHTML5Shaka41.get(e),i=null;return t&&(i=t.id),i},d.prototype.$VideoPlayerHTML5Shaka42=function(e,t){"use strict";return e.fbQualityLabel?e.fbQualityLabel:0==m.compare(e,t[0])?"SD":0==m.compare(e,t[t.length-1])?"HD":null},d.prototype.getAvailableVideoQualities=function(){"use strict";if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka18;var e=this.$VideoPlayerHTML5Shaka34.getVideoTracks();return e.sort(m.compare),e.every(function(e){return null!==e.fbQualityLabel})?e.map(function(e){return e.fbQualityLabel}):e.length>1?["SD","HD"]:["SD"]},d.prototype.getIsAbrEnabled=function(){"use strict";return t("VideoPlayerShakaExperiments").enableAdaptation},d.prototype.getSelectedVideoQuality=function(){"use strict";if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka19;var e=this.$VideoPlayerHTML5Shaka34.getVideoTracks();e.sort(m.compare);var t=e.find(function(e){return e.active});return t?this.$VideoPlayerHTML5Shaka42(t,e):null},d.prototype.canAutoSelectVideoQuality=function(){"use strict";return!0},d.prototype.setPreloadDisabled=function(e){"use strict";t("VideoPlayerShakaExperiments").blockAutoplayAllowPreloadSettingsChange&&this.$VideoPlayerHTML5Shaka21.configure({initialStreamBufferSize:e?0:this.$VideoPlayerHTML5Shaka37(),liveSendPushHeaders:!e&&this.$VideoPlayerHTML5Shaka38()})},d.prototype.restoreStreamBufferSize=function(){"use strict";t("VideoPlayerShakaExperiments").useStreamBufferSizeOverride&&this.$VideoPlayerHTML5Shaka21.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka37(),streamBufferSize:this.$VideoPlayerHTML5Shaka36()})},d.prototype.$VideoPlayerHTML5Shaka37=function(){"use strict";return this.$VideoPlayerHTML5Shaka7?t("VideoPlayerShakaExperiments").liveInitialStreamBufferSize:t("VideoPlayerShakaExperiments").initialStreamBufferSize},d.prototype.$VideoPlayerHTML5Shaka36=function(){"use strict";return this.$VideoPlayerHTML5Shaka7?t("VideoPlayerShakaExperiments").liveStreamBufferSize:t("VideoPlayerShakaExperiments").streamBufferSize},d.prototype.$VideoPlayerHTML5Shaka38=function(){"use strict";return this.$VideoPlayerHTML5Shaka29},d.prototype.setPreferredVideoQuality=function(e){"use strict";var t=this.$VideoPlayerHTML5Shaka34.getVideoTracks();t.sort(m.compare);var i=t.find(function(i){return e==this.$VideoPlayerHTML5Shaka42(i,t)}.bind(this));i&&(this.$VideoPlayerHTML5Shaka20=e,this.$VideoPlayerHTML5Shaka32.setPreferredVideoTrack(i))},d.prototype.unsetPreferredVideoQuality=function(){"use strict";this.$VideoPlayerHTML5Shaka20=null,this.$VideoPlayerHTML5Shaka32.unsetPreferredVideoTrack()},d.prototype.pause=function(){"use strict";this.$VideoPlayerHTML5Shaka43&&!t("VideoPlayerShakaExperiments").improveRebufferLogging?(this.$VideoPlayerHTML5Shaka44=!0,this.$VideoPlayerHTML5Shaka45=!0,t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"pause"),this.$VideoPlayerHTML5Shaka21.setResumeAfterBuffering(!1)):this.$VideoPlayerHTML5Shaka31.pause()},d.prototype.play=function(){"use strict";return this.$VideoPlayerHTML5Shaka8=!0,this.$VideoPlayerHTML5Shaka13&&(this.$VideoPlayerHTML5Shaka31.paused||this.$VideoPlayerHTML5Shaka31.ended)&&(this.$VideoPlayerHTML5Shaka46=this.$VideoPlayerHTML5Shaka13.getOperationLogger("play").setState("pending_play").start()),this.$VideoPlayerHTML5Shaka43&&!t("VideoPlayerShakaExperiments").improveRebufferLogging?(this.$VideoPlayerHTML5Shaka44=!1,this.$VideoPlayerHTML5Shaka45=!0,t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"play"),t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"waiting"),this.$VideoPlayerHTML5Shaka21.setResumeAfterBuffering(!0),t("Promise").resolve()):this.$VideoPlayerHTML5Shaka31.play()},d.prototype.$VideoPlayerHTML5Shaka47=function(){"use strict";var e=this.$VideoPlayerHTML5Shaka4;if(e){var t=this.$VideoPlayerHTML5Shaka31.currentTime,i=4,r=t>e-i,a=t>e;a?(this.emit("debug/shakaEvent",{type:"streamResumedAt",event:this.$VideoPlayerHTML5Shaka4}),this.$VideoPlayerHTML5Shaka4=null):this.$VideoPlayerHTML5Shaka43&&(this.$VideoPlayerHTML5Shaka6=r)}return this.$VideoPlayerHTML5Shaka6},d.prototype.$VideoPlayerHTML5Shaka22=function(){"use strict";t("VideoPlayerShakaExperiments").improveRebufferLogging||(l(this.$VideoPlayerHTML5Shaka31,"pause"),this.$VideoPlayerHTML5Shaka44=!1,this.$VideoPlayerHTML5Shaka45=!1),this.$VideoPlayerHTML5Shaka43=!0,this.$VideoPlayerHTML5Shaka47()?(t("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest||(this.$VideoPlayerHTML5Shaka13&&!this.$VideoPlayerHTML5Shaka48&&(this.$VideoPlayerHTML5Shaka48=this.$VideoPlayerHTML5Shaka13.getOperationLogger("stream_interrupted").start()),this.$VideoPlayerHTML5Shaka34.setIsLiveInterrupted(!0)),this.emit("streamInterrupted")):(this.$VideoPlayerHTML5Shaka21.setResumeAfterBuffering(!0),this.emit("bufferingStart"))},d.prototype.$VideoPlayerHTML5Shaka23=function(){var e=this;t("VideoPlayerShakaExperiments").improveRebufferLogging||(this.$VideoPlayerHTML5Shaka44||l(this.$VideoPlayerHTML5Shaka31,"play"),this.$VideoPlayerHTML5Shaka45||function(){var i=t("EventListener").capture(e.$VideoPlayerHTML5Shaka31.parentNode,"playing",function(e){if(e.target==this.$VideoPlayerHTML5Shaka31)return i.remove(),this.$VideoPlayerHTML5Shaka14?void(this.$VideoPlayerHTML5Shaka14=!1):void t("Event").kill(e)}.bind(e))}()),this.$VideoPlayerHTML5Shaka43=!1,this.$VideoPlayerHTML5Shaka48&&(this.$VideoPlayerHTML5Shaka48.log(),this.$VideoPlayerHTML5Shaka48=null),this.$VideoPlayerHTML5Shaka34.setIsLiveInterrupted(!1),this.$VideoPlayerHTML5Shaka6?this.$VideoPlayerHTML5Shaka49():this.emit("bufferingEnd")},d.prototype.$VideoPlayerHTML5Shaka24=function(e){"use strict";var i=e.detail||{},r=i.type||"undefined",a=i.status||null,n=i.url||null;return t("VideoPlayerShakaExperiments").blockPlayRequestOnNetworkError&&this.$VideoPlayerHTML5Shaka7&&Object.values(t("VideoPlayerShakaExperiments").blockPlayRequestHTTPStatusList).indexOf(a)!=-1&&"mpd"===new(t("URI"))(n).getPath().split(".").pop()?(this.$VideoPlayerHTML5Shaka8&&(t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"playing"),this.$VideoPlayerHTML5Shaka8=!1),this.$VideoPlayerHTML5Shaka50()):void this.emit("error",{error:"SHAKA_"+r.toUpperCase(),message:i.message,httpStatus:a,url:n})},d.prototype.unload=function(){"use strict";this.$VideoPlayerHTML5Shaka19=this.getSelectedVideoQuality(),this.$VideoPlayerHTML5Shaka18=this.getAvailableVideoQualities(),this.$VideoPlayerHTML5Shaka34?null!==this.$VideoPlayerHTML5Shaka34.isLive()&&(this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka34.isLive()):this.$VideoPlayerHTML5Shaka7=!1,this.$VideoPlayerHTML5Shaka21.unload(),this.$VideoPlayerHTML5Shaka3=!0},d.prototype.$VideoPlayerHTML5Shaka33=function(){"use strict";var e={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka51(),maxHeight:this.$VideoPlayerHTML5Shaka52(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka11,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?t("VideoPlayerShakaExperiments").liveBandwidthDowngradeTarget:t("VideoPlayerShakaExperiments").bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?t("VideoPlayerShakaExperiments").liveBandwidthUpgradeTarget:t("VideoPlayerShakaExperiments").bandwidthUpgradeTarget,video:this.$VideoPlayerHTML5Shaka31},i=t("VideoQualityClasses").indexOf("hd");null!=this.$VideoPlayerHTML5Shaka1&&t("VideoQualityClasses").indexOf(this.$VideoPlayerHTML5Shaka1)>=i;return new(t("CustomAbrManager"))(e)},d.prototype.$VideoPlayerHTML5Shaka35=function(){"use strict";this.$VideoPlayerHTML5Shaka32||s(0),this.$VideoPlayerHTML5Shaka30||s(0);var e=new g(this.$VideoPlayerHTML5Shaka30,null,V,this.$VideoPlayerHTML5Shaka32);return this.$VideoPlayerHTML5Shaka41=new(t("TaggedTimeRanges"))(function(e,t){return e.id===t.id&&e.reason===t.reason}),e.setTaggedTimeRangesEntryAdder(function(e,t,i){this.$VideoPlayerHTML5Shaka41.add(e,t,i)}.bind(this)),e},d.prototype.reload=function(e){"use strict";this.$VideoPlayerHTML5Shaka3&&(this.$VideoPlayerHTML5Shaka32=this.$VideoPlayerHTML5Shaka33(),this.$VideoPlayerHTML5Shaka34=this.$VideoPlayerHTML5Shaka35(),this.$VideoPlayerHTML5Shaka47()&&(this.$VideoPlayerHTML5Shaka31.playbackRate=0,
this.emit("streamInterrupted")),this.$VideoPlayerHTML5Shaka21.setPlaybackStartTime(e),this.$VideoPlayerHTML5Shaka21.load(this.$VideoPlayerHTML5Shaka34).then(function(){return this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka34.isLive()?this.$VideoPlayerHTML5Shaka50():(this.$VideoPlayerHTML5Shaka20&&this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka20),this.$VideoPlayerHTML5Shaka19=null,this.$VideoPlayerHTML5Shaka53=null,void(this.$VideoPlayerHTML5Shaka3=!1))}.bind(this))["catch"](function(e){throw e}))},d.prototype.$VideoPlayerHTML5Shaka50=function(){"use strict";t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"seeked"),t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"playing"),t("dispatchEvent")(this.$VideoPlayerHTML5Shaka31,"ended"),this.emit("streamResumed"),this.$VideoPlayerHTML5Shaka39.unsubscribe(),this.unload()},d.prototype.getLongestInitResponseTime=function(){"use strict";return this.$VideoPlayerHTML5Shaka34.getLongestInitResponseTime()},d.$VideoPlayerHTML5Shaka54=function(){"use strict";return t("VideoPlayerShakaExperiments").resolutionConstraintFactor*b},d.prototype.$VideoPlayerHTML5Shaka51=function(){"use strict";return t("VideoPlayerShakaExperiments").useResolutionConstraints?this.$VideoPlayerHTML5Shaka9*d.$VideoPlayerHTML5Shaka54():1/0},d.prototype.$VideoPlayerHTML5Shaka52=function(){"use strict";return t("VideoPlayerShakaExperiments").useResolutionConstraints?this.$VideoPlayerHTML5Shaka10*d.$VideoPlayerHTML5Shaka54():1/0},d.prototype.setDimensions=function(e,t){"use strict";this.$VideoPlayerHTML5Shaka9=e,this.$VideoPlayerHTML5Shaka10=t,this.$VideoPlayerHTML5Shaka32.setResolutionConstraint(this.$VideoPlayerHTML5Shaka51(),this.$VideoPlayerHTML5Shaka52())},d.isSupported=function(){"use strict";return y.isBrowserSupported()},d.prototype.$VideoPlayerHTML5Shaka26=function(){"use strict";this.emit("tracksChanged")},d.prototype.$VideoPlayerHTML5Shaka25=function(e){"use strict";"video"===e.contentType&&(this.$VideoPlayerHTML5Shaka13&&this.$VideoPlayerHTML5Shaka13.setRepresentationID(e.id),this.emit("adaptation",{reason:e.reason}))},d.prototype.$VideoPlayerHTML5Shaka40=function(e){"use strict";t("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest&&(this.$VideoPlayerHTML5Shaka13&&!this.$VideoPlayerHTML5Shaka48&&(this.$VideoPlayerHTML5Shaka48=this.$VideoPlayerHTML5Shaka13.getOperationLogger("stream_interrupted").start()),this.$VideoPlayerHTML5Shaka34.setIsLiveInterrupted(!0)),this.$VideoPlayerHTML5Shaka4=e},d.prototype.$VideoPlayerHTML5Shaka28=function(){"use strict";this.$VideoPlayerHTML5Shaka47()&&this.$VideoPlayerHTML5Shaka49()},d.prototype.$VideoPlayerHTML5Shaka49=function(){"use strict";this.$VideoPlayerHTML5Shaka4=null,this.$VideoPlayerHTML5Shaka6=!1,this.$VideoPlayerHTML5Shaka34.forceResyncVideoBuffer(),this.emit("streamResumed")},d.prototype.$VideoPlayerHTML5Shaka27=function(){"use strict";var e=!this.$VideoPlayerHTML5Shaka31.paused;this.unload(),this.reload().then(function(){this.$VideoPlayerHTML5Shaka6&&this.$VideoPlayerHTML5Shaka49(),e&&this.play()}.bind(this))["catch"](function(e){})},d.prototype.$VideoPlayerHTML5Shaka15=function(){"use strict";this.$VideoPlayerHTML5Shaka8=!1,this.$VideoPlayerHTML5Shaka14&&(this.$VideoPlayerHTML5Shaka14=!1),this.$VideoPlayerHTML5Shaka46&&(this.$VideoPlayerHTML5Shaka46.log(),this.$VideoPlayerHTML5Shaka46=null)},d.prototype.$VideoPlayerHTML5Shaka17=function(){"use strict";this.$VideoPlayerHTML5Shaka8&&(this.$VideoPlayerHTML5Shaka8=!1),this.$VideoPlayerHTML5Shaka46&&(this.$VideoPlayerHTML5Shaka46.setResult("aborted").log(),this.$VideoPlayerHTML5Shaka46=null)},a.exports=d},null),__d("VideoWithLoopingPlayback",["setImmediate","VideoPlayerReason"],function(e,t,i,r,a,n){function s(e){var i=arguments.length<=1||void 0===arguments[1]?-1:arguments[1];this.$VideoWithLoopingPlayback5=function(){var e=this.$VideoWithLoopingPlayback1.getOption("FeedAutoplay","isVisibleForAutoplay"),i=this.$VideoWithLoopingPlayback1.getOption("WatchAndScroll","isActive"),r=this.$VideoWithLoopingPlayback1.getIsInChannel();!e&&void 0!==e||i||r||this.$VideoWithLoopingPlayback4&&!(this.$VideoWithLoopingPlayback3<this.$VideoWithLoopingPlayback4)?this.$VideoWithLoopingPlayback1.setOption("Looping","isLooping",!1):(t("setImmediate")(function(){return this.$VideoWithLoopingPlayback1.play(t("VideoPlayerReason").LOOP)}.bind(this)),this.$VideoWithLoopingPlayback3++)}.bind(this),this.$VideoWithLoopingPlayback1=e,this.$VideoWithLoopingPlayback2=!0,this.$VideoWithLoopingPlayback3=1,this.$VideoWithLoopingPlayback4=i>-1?i:null,this.$VideoWithLoopingPlayback1.addListener("finishPlayback",this.$VideoWithLoopingPlayback5),this.$VideoWithLoopingPlayback1.registerOption("Looping","isLooping",function(){return this.$VideoWithLoopingPlayback2}.bind(this),function(e){return this.$VideoWithLoopingPlayback6(e)}.bind(this))}s.prototype.isLooping=function(){"use strict";return this.$VideoWithLoopingPlayback2},s.prototype.getLoopCount=function(){"use strict";return this.$VideoWithLoopingPlayback3},s.prototype.getMaxLoopCount=function(){"use strict";return this.$VideoWithLoopingPlayback4},s.prototype.setMaxLoopCount=function(e){"use strict";this.$VideoWithLoopingPlayback4=e>-1?e:null},s.prototype.$VideoWithLoopingPlayback6=function(e){"use strict";this.$VideoWithLoopingPlayback2=e},a.exports=s},null);
//# sourceMappingURL=maps/M4rgQylBnt-.js.map
