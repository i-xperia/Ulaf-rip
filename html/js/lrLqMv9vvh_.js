self.CavalryLogger&&CavalryLogger.start_js(["+SiCe"]),__d("CommentPostedLiveState",[],function(e,t,n,o,r,i){r.exports={LIVE:"Live",ON_DEMAND:"OnDemand"}},null),__d("ComposerEntryPointRef",[],function(e,t,n,o,r,i){r.exports={FEED:"feed",FEED_INLINE:"feed_inline",FEED_VOICE_SWITCHER:"feed_voice_switcher",SPROUTS:"sprouts",TIMELINE:"timeline",NATIVE_PERMALINK:"native_permalink",EVENT:"event",EVENT_ALL_MEDIA:"event_all_media",EVENT_PHOTOS:"event_photos",EVENT_VIDEOS:"event_videos",EVENT_WALL:"event_wall",EVENT_ABOUT:"event_about",GROUP:"group",NATIVE_GROUP:"native_group",NATIVE_PAGE:"native_page",PAGES_MANAGER:"pages_manager",FINCH_PAGE_CHECKIN:"finch_page_checkin",PLACES_NEARBY_FRIENDS:"places_nearby_friends",PLACES_SEARCH_FAILURE:"places_search_failure",FEED_STORY:"feed_story",PHOTOS_DASHBOARD:"photos_dashboard",PHOTOS_TAB_TIMELINE:"photos_tab_timeline",ADD_PHOTO_IN_TIMELINE_TAB:"add_photo_in_timeline_tab",ADD_PHOTO_IN_ALBUM:"add_photo_in_album",ADD_PHOTO_IN_PHOTOS_SECTION:"add_photo_in_photos_section",PHOTOS_ALBUM:"photos_album",PHOTOS_ALBUM_LISTING:"photos_album_listing",CREATE_COUPON_DIALOG:"create_coupon_dialog",SOCIAL_PLUGIN:"social_plugin",PLATFORM_DIALOG:"platform_dialog",SHARE_BUTTON_PLUGIN:"share_button",PAGE_PLUGIN:"page",ADS_CREATE:"ads_create",ADS_POWER_EDITOR:"ads_power_editor",TOPIC_HASHTAG_FEED:"topic_hashtag_feed",PERMALINK:"permalink",EDIT_DIALOG:"edit_dialog",EDIT_COMPOSER:"edit_composer",PAGES_FEED:"pages_feed",PAGES_PHOTO_TAB:"pages_photo_tab",PAGES_VIDEO_TAB:"pages_video_tab",PAGES_VIDEO_TAB_HUB:"pages_video_tab_hub",PAGES_VOICE_SWITCHER:"pages_voice_switcher",PAGES_COVER_VIDEO:"pages_cover_video",PAGE_TIPS:"page_tips",AGGREGATED_LINK_STORY:"aggregated_link_story",FEED_STICKY_COMPOSER:"feed_sticky_composer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",WIFI_CHECKIN:"wifi_checkin",HOVERCARD_CONICS:"hovercard_conics",AGGREGATED_STORY:"aggregated_story",YEAR_IN_REVIEW:"year_in_review",ORIGIN_STORY:"origin_story",CELEBRATE_FRIENDS:"celebrate_friends",CREATIVE_ASSISTANT:"creative_assistant",MEGAPHONE:"megaphone",MOMENTS:"moments",LIVE:"live",LIVE_BROADCAST:"live_broadcast",LIVE_MAP:"live_map",TOPIC_STORY_ACTION_LINK:"topic_story_action_link",OTHER:"other",TRENDING_TOPIC:"trending_topic",UC_TOOLBAR:"uc_toolbar",PAGE_CONTENT_TAB_DRAFTS:"page_content_tab_drafts",PAGE_LAUNCH_POINT:"page_launch_point",PAGE_CONTENT_TAB_PUBLISHED_POSTS:"page_content_tab_published_posts",PAGE_CONTENT_TAB_SCHEDULED_POSTS:"page_content_tab_scheduled_posts",PAGE_CONTENT_TAB_ADS_POSTS:"page_content_tab_ads_posts",PAGE_CONTNET_TAB_JOB_POSTS:"page_contet_tab_job_posts",PAGE_CONTENT_TAB_VIDEO_LIBRARY:"page_content_tab_video_library",PAGE_CONTENT_ADS_ASSET_VIDEO_LIBRARY:"page_content_ads_asset_video_library",PAGE_CONTENT_TAB_CANVAS:"page_content_tab_canvas",PAGE_CONTENT_TAB_REFERENCE_LIBRARY:"page_content_tab_reference_library",REVIEW_UNIT:"review_unit",REVIEWS_LIST:"reviews_list",CHECKIN_STORY:"checkin_story",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",BULK_UPLOAD:"bulk_upload",REFERENCE_VIDEO_BULK_UPLOAD:"reference_video_bulk_upload",SAHELI:"saheli",GAMEFACE:"gameface",GAMETIME:"gametime",ANNIVERSARY_VIDEO:"anniversary_video",FRIENDS_DAY:"friends_day_2016",FRIENDVERSARY:"FRIENDVERSARY",PRIVACY_CHECKUP:"privacy_checkup",FEEDX:"feedx",FEED_SPROUTS:"feed_sprouts",FEEDX_SPROUTS:"feedx_sprouts",LEGACY_FEED:"legacy_feed",REACTION:"reaction",FLASHBACK:"flashback",INSIGHTS_POST_SPONSORED_TABLE:"insights_post_sponsored_table",INSIGHTS_POST_DIRECT_BOOST:"insights_post_direct_boost",VOTER_REGISTRATION:"voter_registration",ISSUE_MODULE:"issue_module",ENDORSEMENT_MODULE:"endorsement_module",COMPOSER_PREFILL:"composer_prefill",MTOUCH_LOCAL_SERP:"mtouch_local_serp",RED_ENVELOPE_POST:"red_envelope_post",FUNDRAISER_PAGE:"fundraiser_page",OFFERS_COMPOSER:"offers_composer",RESHARE_DIALOG:"reshare_dialog",POLITICAL_ISSUE:"political_issue",POLITICAL_ENDORSEMENT:"political_endorsement",PROFILE_PIC_CHANGE_DIALOG:"profile_pic_change_dialog",PROFILE_VIDEO:"profile_video",PUBLISH_FRAME_DIALOG:"publish_frame_dialog",AYMT:"aymt",SW_BG_SYNC:"sw_bg_sync",FEED_INSPIRATIONS:"feed_inspirations",INSPIRATIONS:"inspirations",WORK_FEED:"work_feed",DEVELOPER_SITE:"developer_site",RECENT_POSTS:"timeline/recent_posts",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_VIDEO_PLATFORM_DIALOG:"live_video_platform_dialog"}},null),__d("ReactComposerAttachmentType",[],function(e,t,n,o,r,i){r.exports={STATUS:"STATUS",MEDIA:"MEDIA",ALBUM:"ALBUM",MLE:"MLE",LIFE_EVENT:"LIFE_EVENT",NOTES:"NOTES",QANDA:"QANDA",PAGES_EXTRA:"PAGES_EXTRA",FILE:"FILE",QUESTION:"QUESTION",SELL:"SELL",WORK_HEADER:"WORK_HEADER",RED_ENVELOPE:"RED_ENVELOPE",LIVE_BROADCAST:"LIVE_BROADCAST",PHOTO_ZOOM_CROP:"PHOTO_ZOOM_CROP",PROFILE_PIC_DESCRIPTION:"PROFILE_PIC_DESCRIPTION",PROFILE_PIC_FRAME:"PROFILE_PIC_FRAME",LIVE_VIDEO:"LIVE_VIDEO",DOC:"DOC",EVENT:"EVENT",GAME:"GAME",CTA:"CTA",QA:"QA",MESSAGE:"MESSAGE",GET_DIRECTIONS:"GET_DIRECTIONS",CALL:"CALL",PLACE_LIST:"PLACE_LIST",QUIZ:"QUIZ"}},null),__d("ReactComposerFeatureType",[],function(e,t,n,o,r,i){r.exports={DATE:"date",EVENT:"event",FILE:"file",FORMATTED_TEXT:"formatted_text",LIFE_EVENT:"life_event",LINK:"link",LOCATION:"location",MARKDOWN:"markdown",MEDIA:"media",MENTION_TAG:"mention_tag",MILESTONE:"milestone",MINUTIAE:"minutiae",NOTE:"note",OFFER:"offer",PAGE_CTA:"page_cta",PHOTO_TAG:"photo_tag",PRIVACY:"privacy",PRODUCT:"product",SELL:"sell",SPONSOR:"sponsor",TEXT:"text",WITH_TAG:"with_tag"}},null),__d("ReactComposerLoggingName",[],function(e,t,n,o,r,i){r.exports={ALBUM_SPROUT:"album_sprout",ALBUM_TAB_SELECTOR:"album_tab_selector",AUDIENCE_SELECTOR:"audience_selector",BACKDATE_TAGGER:"backdate_tagger",CANVAS_EDITOR:"canvas_editor",CHEVRON_MENU_EDIT_POST:"chevron_menu/edit_post",CONTENT_WARNINGS_TAGGER:"content_warnings_tagger",DELETE_POST_EDIT_BUTTON:"delete_post_dialog/edit_post_button",DOC_TAB_SELECTOR:"doc_tab_selector",ELLIPSIS_SPROUT:"ellipsis_sprout",ESCAPE_KEY:"escape_key",EVENT_TAB_SELECTOR:"event_tab_selector",FILE_TAB_SELECTOR:"file_tab_selector",FORMATTED_TEXT_BUTTON:"formatted_text_button",FORMATTED_TEXT_SPROUT:"formatted_text_sprout",FORMATTED_TEXT_TAGGER:"formatted_text_tagger",FRIEND_TAG_SPROUT:"friend_tag_sprout",GAME_TAB_SELECTOR:"game_tab_selector",INLINE_COMPOSER:"inline_composer",LINK_DROPPED:"link_dropped",LINK_PASTED:"link_pasted",LINK_REMOVE_BUTTON:"link_remove_button",LIVE_VIDEO_SPROUT:"live_video_sprout",LIVE_VIDEO_TAB_SELECTOR:"live_video_tab_selector",LOCATION_TAG_SPROUT:"location_tag_sprout",LOCATION_TAGGER:"location_tagger",MARKDOWN_SPROUT:"markdown_sprout",MARKDOWN_TAGGER:"markdown_tagger",MARKETPLACE:"marketplace",MEDIA_ATTACHMENT_UPLOAD_BUTTON:"media_attachment_upload_button",MEDIA_COLLAGE_PLUS_BUTTON:"media_collage_plus_button",MEDIA_FILE_DROPPED:"media_file_dropped",MEDIA_FILE_PASTED:"media_file_pasted",MEDIA_SPROUT:"media_sprout",MEDIA_TAB_SELECTOR:"media_tab_selector",MEDIA_TAGGER:"media_tagger",MEDIA_UPLOADS_PLUS_BUTTON:"media_uploads_plus_button",MEDIA_COMPOSER_ON_INIT:"media_composer_on_init",MENTIONS_INPUT_FOCUS:"mentions_input_focus",MESSENGER_PHOTO_VIEWER_SHARE:"messenger_photo_viewer_share",MINUTIAE_SPROUT:"minutiae_sprout",MINUTIAE_TAGGER:"minutiae_tagger",MLE_TAB_SELECTOR:"mle_tab_selector",MODAL_PAGE_INVITE_DASHBOARD:"modal_page_invite_dashboard",NOTES_SPROUT:"notes_sprout",NOTES_TAB_SELECTOR:"notes_tab_selector",PAGES_CTA_SELECTOR:"pages_cta_selector",PAGES_EXTRA_TAB_SELECTOR:"pages_extra_tab_selector",PEOPLE_TAGGER:"people_tagger",PEOPLE_TAGGER_SPROUT:"people_tagger_sprout",PHOTO_UPLOAD_DONE:"photo_upload_done",PRODUCT_TAGGER:"product_tagger",PRODUCT_TAGGER_BANNER_UPSELL:"product_tagger_banner_upsell",PROMPT:"prompt",QA_TAB_SELECTOR:"qa_tab_selector",QANDA_TAB_SELECTOR:"qanda_tab_selector",QUICKSILVER_SHARE_SCORE_BUTTON:"quicksilver_share_score_button",QUESTION_TAB_SELECTOR:"question_tab_selector",QUIZ_TAB_SELECTOR:"quiz_tab_selector",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",RED_ENVELOPE_TAB_SELECTOR:"red_envelope_tab_selector",SELL_TAB_SELECTOR:"sell_tab_selector",SHARE_NOW_MENU_SHARE_TO_PAGE:"share_now_menu/share_to_page",SHARE_NOW_MENU_POST_TO_GROUP:"share_now_menu/post_to_group",SHARE_NOW_MENU_SEND_MESSAGE:"share_now_menu/send_message",SHARE_NOW_MENU_SHARE_FRIEND_TIMELINE:"share_now_menu/share_friend_timeline",SHARE_NOW_MENU_WRITE_POST:"share_now_menu/write_post",SPONSOR_SPROUT:"sponsor_sprout",SPONSOR_TAGGER:"sponsor_tagger",STATUS_TAB_SELECTOR:"status_tab_selector",TAGGER_SUMMARY_LOCATION:"tagger_summary_row/location_tagger",TAGGER_SUMMARY_MINUTIAE:"tagger_summary_row/minutiae_tagger",TAGGER_SUMMARY_PEOPLE:"tagger_summary_row/people_tagger",TAGGER_SUMMARY_ROW:"tagger_summary_row",TARGETING_TAGGER:"targeting_tagger",OTHERS:"others"}},null),__d("UFIInstanceActionType",[],function(e,t,n,o,r,i){r.exports={CHANGE_ORDER_MODE:"story_change_order_mode",CHANGE_VISIBILITY:"story_change_visibility",INIT:"instance_init",RECEIVED_VOD_COMMENTS:"received_vod_comments",REMOVE:"story_remove",REQUESTED_VOD_COMMENTS:"requested_vod_comments",TOGGLE_COMMENTS:"story_toggle_comments",TOGGLE_COMMERCIAL_BREAK:"story_toggle_commercial_break",TRANSLATE_ALL:"translate_all"}},null),__d("UFIStoryActionType",[],function(e,t,n,o,r,i){r.exports={CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"}},null),__d("UFIStreamingStateType",[],function(e,t,n,o,r,i){r.exports={LIVE:"live",ON_DEMAND:"on_demand"}},null),__d("VideoPlayerLoggerSource",[],function(e,t,n,o,r,i){r.exports={ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",EMBEDDED:"embedded",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",HTML5:"html5",INLINE:"inline",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",INSIGHTS:"insights",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",OFFERS_DETAIL:"offers_detail",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PERMALINK:"permalink",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",TV:"tv",VIDEOHUB_PLAYLIST:"videohub_playlist",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",WATCH_SCROLL:"watch_scroll",SLIDESHOW:"slideshow",LIVE_MAP:"live_map",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",ISSUES_MODULE:"issues_module",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",LIVE_CONTROL_PANEL:"live_control_panel",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation"}},null),__d("WebCommentViewOption",[],function(e,t,n,o,r,i){r.exports={CHRONOLOGICAL:"chronological",RANKED_THREADED:"ranked_threaded",TOPLEVEL:"toplevel",RECENT_ACTIVITY:"recent_activity",FEATURED:"featured",FILTERED:"filtered",LIVE_STREAMING:"live_streaming"}},null),__d("UFICommentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(e,t,n,o,r,i){"use strict";function s(){this.clear()}s.prototype.log=function(){t("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,t("Banzai").BASIC)},s.prototype.logVital=function(){t("GeneratedLoggerUtils").log("logger:UFICommentLoggerConfig",this.$UFICommentTypedLogger1,t("Banzai").VITAL)},s.prototype.clear=function(){return this.$UFICommentTypedLogger1={},this},s.prototype.updateData=function(e){return this.$UFICommentTypedLogger1=babelHelpers["extends"]({},this.$UFICommentTypedLogger1,e),this},s.prototype.setDuration=function(e){return this.$UFICommentTypedLogger1.duration=e,this},s.prototype.setEvent=function(e){return this.$UFICommentTypedLogger1.event=e,this},s.prototype.setHasPhoto=function(e){return this.$UFICommentTypedLogger1.has_photo=e,this},s.prototype.setHasSticker=function(e){return this.$UFICommentTypedLogger1.has_sticker=e,this},s.prototype.setIsReply=function(e){return this.$UFICommentTypedLogger1.is_reply=e,this},s.prototype.setRequestLength=function(e){return this.$UFICommentTypedLogger1.request_length=e,this},s.prototype.setVC=function(e){return this.$UFICommentTypedLogger1.vc=e,this};r.exports=s},null),__d("UFICommentLogger",["UFICommentTypedLogger"],function(e,t,n,o,r,i){"use strict";function s(){this.$UFICommentLogger1={},this.$UFICommentLogger2={}}s.prototype.logNewCommentPost=function(e,n,o){this.$UFICommentLogger2[e]=babelHelpers["extends"]({timestamp:n},o),(new(t("UFICommentTypedLogger"))).setEvent("new_comment_post").setHasPhoto(o.has_photo).setHasSticker(o.has_sticker).setIsReply(o.is_reply).log()},s.prototype.logNewCommentReceived=function(e,n){var o=this.$UFICommentLogger2[e];if(o){var r=0;n&&o.timestamp&&(r=n-o.timestamp),(new(t("UFICommentTypedLogger"))).setEvent("new_comment_received").setDuration(r).setHasPhoto(o.has_photo).setHasSticker(o.has_sticker).setIsReply(o.is_reply).log()}delete this.$UFICommentLogger2[e]},s.prototype.logCommentFetch=function(e,n,o){var r=babelHelpers["extends"]({timestamp:n},o);void 0===this.$UFICommentLogger1[e]?this.$UFICommentLogger1[e]=[r]:this.$UFICommentLogger1[e].push(r),(new(t("UFICommentTypedLogger"))).setEvent("fetch_comment").setIsReply(o.is_reply).setRequestLength(o.request_length).log()},s.prototype.logCommentFetchReceived=function(e,n){if(this.$UFICommentLogger1[e]){var o=this.$UFICommentLogger1[e].shift(),r=0;n&&o.timestamp&&(r=n-o.timestamp),(new(t("UFICommentTypedLogger"))).setEvent("fetch_comment_received").setDuration(r).setIsReply(o.is_reply).setRequestLength(o.request_length).log(),0===this.$UFICommentLogger1[e].length&&delete this.$UFICommentLogger1[e]}},r.exports=new s},null),__d("UFICommentEditIDStore",["FluxReduceStore","UFIAddCommentActionType","UFICentralUpdates","UFICommentActionType","UFIDispatcherBase"],function(e,t,n,o,r,i){"use strict";function s(e){c.constructor.call(this,e),t("UFICentralUpdates").subscribe("actor-changed",function(e,n){t("UFIDispatcherBase").dispatch({type:"PRIVATE_ACTOR_CHANGED",instanceID:!0,ftentidentifier:!0})})}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.prototype.getInitialState=function(){return{}},s.prototype.getForInstance=function(e){return this.getState()[e]||null},s.prototype.reduce=function(e,n){var o;switch(n.type){case"PRIVATE_ACTOR_CHANGED":return{};case t("UFIAddCommentActionType").CANCEL:case t("UFIAddCommentActionType").SUBMIT_EDIT:var r=(e[n.instanceID],babelHelpers.objectWithoutProperties(e,[n.instanceID]));return r;case t("UFICommentActionType").EDIT:return babelHelpers["extends"]({},e,(o={},o[n.instanceID]=n.comment.id,o))}return e},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIComments",["invariant","ClientIDs","ImmutableObject","LiveWWWFeedbackTypedLogger","UFICentralUpdates","UFIConstants","randomInt"],function(e,t,n,o,r,i,s){"use strict";function a(e){return e in D?D[e]:e}function c(e,n){e.forEach(function(e){var o=e.ftentidentifier,r=t("UFIConstants").UFIPayloadSourceType,i=e.clientid,s=!1,a=babelHelpers["extends"]({},e);return i&&(delete a.clientid,s=t("ClientIDs").isExistingClientID(i),s&&D[i])?void(new(t("LiveWWWFeedbackTypedLogger"))).setEvent("update_view").setUpdateType("comment").setOriginatedLocally(!0).setCommentID(e.id).log():(n!==r.LIVE_SEND&&n!==t("UFIConstants").UFIPayloadSourceType.STREAMING&&n!==r.USER_ACTION&&n!==r.ENDPOINT_ADD_COMMENT&&n!==r.ENDPOINT_EDIT_COMMENT||(a.isunseen=!0),n!==t("UFIConstants").UFIPayloadSourceType.LIVE_SEND&&n!==t("UFIConstants").UFIPayloadSourceType.STREAMING||(a.islive=!0),n!==r.ENDPOINT_COMMENT_FETCH&&n!==r.ENDPOINT_ID_COMMENT_FETCH||(a.fromfetch=!0),s&&U[i]&&(a.ufiinstanceid=U[i].ufiinstanceid,D[i]=e.id,R[e.id]=i,U[e.id]=U[i],delete U[i],t("UFICentralUpdates").didUpdateComment(i)),S.setComment(e.id,new(t("ImmutableObject"))(a)),t("UFICentralUpdates").didUpdateComment(e.id),void t("UFICentralUpdates").didUpdateFeedback(o))})}function u(e,n){for(var o=0;o<e.length;o++){var r=e[o];switch(r.actiontype){case t("UFIConstants").UFIActionType.LIKE_ACTION:S.getComment(r.entidentifier)&&p(r.clientid,r.entidentifier,r.hasviewerliked,r.likecount,r.reactiondata,n);break;case t("UFIConstants").UFIActionType.COMMENT_LIKE:p(r.clientid,r.commentid,r.viewerliked,r.likecount,r.reactiondata,n);break;case t("UFIConstants").UFIActionType.REACTION:S.getComment(r.entidentifier)&&l(r.entidentifier,r);break;case t("UFIConstants").UFIActionType.COMMENT_REACTION:l(r.commentid,r);break;case t("UFIConstants").UFIActionType.DELETE_COMMENT:I(r);break;case t("UFIConstants").UFIActionType.LIVE_DELETE_COMMENT:f(r);break;case t("UFIConstants").UFIActionType.ACCEPT_ANSWER:h(r);break;case t("UFIConstants").UFIActionType.REMOVE_PREVIEW:C(r);break;case t("UFIConstants").UFIActionType.COMMENT_SET_SPAM:E(r);break;case t("UFIConstants").UFIActionType.CONFIRM_COMMENT_REMOVAL:g(r);break;case t("UFIConstants").UFIActionType.TRANSLATE_COMMENT:m(r);break;case t("UFIConstants").UFIActionType.COMMENT_LIKECOUNT_UPDATE:d(r);break;case t("UFIConstants").UFIActionType.UPDATE_CONSTITUENT_TITLE:y(r)}}}function p(e,n,o,r,i,s){var a=S.getComment(n);if(a){var c={},u=e&&t("ClientIDs").isExistingClientID(e);u||(c.hasviewerliked=o,c.likecount=r,i&&(c.reactioncount=i.reactioncount,c.reactioncountmap=i.reactioncountmap,c.reactioncountreduced=i.reactioncountreduced,c.viewerreaction=i.viewerreaction)),s!==t("UFIConstants").UFIPayloadSourceType.LIVE_SEND&&s!==t("UFIConstants").UFIPayloadSourceType.STREAMING||(new(t("LiveWWWFeedbackTypedLogger"))).setEvent("update_view").setUpdateType("comment_like").setOriginatedLocally(u).setCommentID(n).log(),c.likeconfirmhash=t("randomInt")(0,1024),A(n,c)}}function l(e,n){var o=S.getComment(e);if(o){var r={};if(n.clientid&&t("ClientIDs").isExistingClientID(n.clientid)&&n.viewerreaction!==o.viewerreaction)return;r.hasviewerliked=n.hasviewerliked,r.likecount=n.likecount,r.reactioncount=n.reactioncount,r.reactioncountmap=n.reactioncountmap,r.reactioncountreduced=n.reactioncountreduced,r.viewerreaction=n.viewerreaction,A(e,r)}}function d(e){var n=S.getComment(e.commentid);if(n&&e.hasviewerliked===n.hasviewerliked){var o={likecount:e.likecount,likeconfirmhash:t("randomInt")(0,1024)};A(e.commentid,o)}}function m(e){var t=e.commentid,n=S.getComment(t);if(n){var o={translationdata:e.translationdata};A(t,o)}}function _(e){var t={reportLink:e.reportLink,commenterIsFOF:e.commenterIsFOF,userIsMinor:e.userIsMinor,giveFeedbackLink:e.giveFeedbackLink,reportGroupAdminLink:e.reportGroupAdminLink};return t}function I(e){var n=S.getComment(e.commentid);T(n,t("UFIConstants").UFIStatus.DELETED)}function f(e){var n=S.getComment(e.commentid);n&&n.status!==t("UFIConstants").UFIStatus.DELETED&&T(n,t("UFIConstants").UFIStatus.LIVE_DELETED)}function h(e){A(e.commentid,{postacceptedanswer:e.isaccepted?e.commentid:null})}function C(e){A(e.commentid,{attachment:null})}function E(e){var n=S.getComment(e.commentid),o=e.shouldHideAsSpam?t("UFIConstants").UFIStatus.SPAM_DISPLAY:null;T(n,o)}function g(e){A(e.commentid,_(e))}function T(e,t){A(e.id,{priorstatus:e.status,status:t})}function y(e){var t=S.getComment(e.commentid);if(t){var n={constituentTitle:e.constituentTitle};A(e.commentid,n)}}function A(e,n){var o=S.getComment(e)||new(t("ImmutableObject"))({});S.setComment(e,t("ImmutableObject").set(o,n)),t("UFICentralUpdates").didUpdateComment(o.id),t("UFICentralUpdates").didUpdateFeedback(o.ftentidentifier)}var U={},D={},R={},S={getRenderKey:function(e){return"comment"+(e in R?R[e]:e)},getComment:function(e){return e===t("UFIConstants").unavailableCommentKey?null:U[a(e)]},setComment:function(e,n){n instanceof t("ImmutableObject")||s(0),U[a(e)]=n},resetComments:function(e){for(var t in e)delete U[a(t)]},getCommentsForFTEntIdentifier:function(e){return Object.values(U).filter(function(t){return t.ftentidentifier==e})}};t("UFICentralUpdates").subscribe("update-comments",function(e,t){t.comments&&t.comments.length&&c(t.comments,t.payloadsource),t.pinnedcomments&&t.pinnedcomments.length&&c(t.pinnedcomments,t.payloadsource)}),t("UFICentralUpdates").subscribe("update-actions",function(e,t){t.actions&&t.actions.length&&u(t.actions,t.payloadsource)}),r.exports=S},6),__d("UFILivePinnedCommentStore",["FluxReduceStore","UFIComments","UFIFeedbackTargets","UFIDispatcherBase","UFIStoryActionType","areEqual"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.prototype.getInitialState=function(){return{}},s.prototype.reduce=function(e,n){var o;switch(n.type){case t("UFIStoryActionType").LIVE_PIN_COMMENT:case t("UFIStoryActionType").LIVE_UNPIN_COMMENT:var r=n.commentID,i=n.pinEventID;return babelHelpers["extends"]({},e,(o={},o[n.ftentidentifier]={commentID:r,pinEventID:i},o));default:return e}},s.prototype.areEqual=function(e,n){return t("areEqual")(e,n)},s.prototype.getPinnedCommentID=function(e){var n=this.getState()[e];if(!n){var o=t("UFIFeedbackTargets").getFeedbackTargetIfExists(e);return o?o.livepinnedcommentid||null:null}return n.commentID||null},s.prototype.getPinEventID=function(e){var t=this.getState()[e];return t?t.pinEventID||null:null},s.prototype.getPinnedCommentAuthorID=function(e){var n=this.getPinnedCommentID(e);return null===n?null:t("UFIComments").getComment(n).author||null},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIRootRegistry",[],function(e,t,n,o,r,i){"use strict";var s={},a={},c={},u=[],p={registerController:function(e,t,n,o){s[e]=o,a[n]=[].concat(a[n]||[],[t]),c[t]=n},registerSnowliftID:function(e){u.push(e)},isSnowliftNode:function(e){return u.indexOf(e)>=0},getInstanceIDFromFTEntIdentifier:function(e){return a[e]||null},getFTEntIdentifierFromInstanceID:function(e){return c[e]||null},cleanupInstance:function(e){var t=c[e],n=a[t];n&&n.includes(e)&&(a[t]=n.filter(function(t){return t!=e}),0==a[t].length&&delete a[t]),delete c[e]},cleanupSnowliftNodes:function(){u.forEach(function(e){return s[e]&&s[e]()}),s={},u=[]}};r.exports=p},null),__d("UFIVisibility",[],function(e,t,n,o,r,i){"use strict";var s={VISIBLE:"visible",HIDDEN:"hidden"};r.exports=s},null),__d("UFICommentVisibilityStore",["invariant","FluxReduceStore","UFICommentActionType","UFIComments","UFIDispatcherBase","UFIInstanceActionType","UFILivePinnedCommentStore","UFIRootRegistry","UFIVisibility","filterObject"],function(e,t,n,o,r,i,s){"use strict";function a(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return null===t&&null===n||null!==t&&null!==n||s(0),t?e+"-"+t+(n?"-P":""):e}function c(e,t){return e===t||e.startsWith(t+"-")}function u(e){var n=t("UFIRootRegistry").getInstanceIDFromFTEntIdentifier(e);return n?n:[]}function p(e){return{instanceid:e}}function l(){d.apply(this,arguments)}var d,m;d=babelHelpers.inherits(l,t("FluxReduceStore")),m=d&&d.prototype,l.prototype.getInitialState=function(){return{}},l.prototype.getVisibility=function(e,n){var o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=o?a(n.instanceid,o.comment.fbid,o.isLivePinnedComment):a(n.instanceid);return e.hasOwnProperty(r)?e[r]:t("UFIVisibility").HIDDEN},l.prototype.$UFICommentVisibilityStore1=function(e){var n=p(e);return this.getVisibility(this.getState(),n)===t("UFIVisibility").VISIBLE},l.prototype.isFeedbackTargetVisible=function(e){var t=u(e);return t.some(function(e){return this.$UFICommentVisibilityStore1(e)}.bind(this))},l.prototype.reduce=function(e,n){var o,r;switch(n.type){case t("UFICommentActionType").UNMOUNTED:var i=babelHelpers["extends"]({},e);return delete i[a(n.instanceID,n.renderedComment.comment.fbid,n.renderedComment.isLivePinnedComment)],i;case t("UFICommentActionType").CHANGE_VISIBILITY:return babelHelpers["extends"]({},e,(o={},o[a(n.instanceID,n.renderedComment.comment.fbid,n.renderedComment.isLivePinnedComment)]=n.visibility,o));case t("UFIInstanceActionType").CHANGE_VISIBILITY:var u=t("UFIRootRegistry").getFTEntIdentifierFromInstanceID(n.instanceID),p=t("UFIComments").getCommentsForFTEntIdentifier(u);n.type===t("UFIInstanceActionType").CHANGE_VISIBILITY||s(0);var l=n.visibility,d=p.reduce(function(e,t){return e[a(n.instanceID,t.fbid,!t.fbid&&null)]=l,e},{});if(u){var m=t("UFILivePinnedCommentStore").getPinnedCommentID(u);if(null!==m){var _=t("UFIComments").getComment(m);d[a(n.instanceID,_.fbid,!0)]=l}}return babelHelpers["extends"]({},e,(r={},r[a(n.instanceID)]=n.visibility,r),d);case t("UFIInstanceActionType").REMOVE:var I=n.instanceID,f=a(I);return t("filterObject")(e,function(e,t){return t!==f&&!c(t,I)})}return e},r.exports=new l(t("UFIDispatcherBase"))},null),__d("UFIKeyValueStore",["FluxReduceStore","abstractMethod"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.prototype.getInitialState=function(){return{}},s.prototype.getValueFor=function(e){return this.getState()[e]||null},s.prototype.getStateKey=function(e){return e.instanceID},s.prototype.getStateValue=function(e){return t("abstractMethod")("UFIKeyValueStore","getStateValue")},s.prototype.reduce=function(e,t){var n=this.getStateKey(t),o=this.getStateValue(t);if(null!==o){var r;return babelHelpers["extends"]({},e,(r={},r[n]=o,r))}return e},r.exports=s},null),__d("UFICommercialBreakStore",["UFIKeyValueStore","UFIInstanceActionType","UFIDispatcherBase"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("UFIKeyValueStore")),c=a&&a.prototype,s.prototype.getValueFor=function(e){return!!c.getValueFor.call(this,e)},s.prototype.getStateValue=function(e){switch(e.type){case t("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK:return e.inCommercial}return null},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIComposerIsTypingStore",["UFIKeyValueStore","UFIAddCommentActionType","UFIDispatcherBase"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("UFIKeyValueStore")),c=a&&a.prototype,s.prototype.getStateKey=function(e){return e.ftentidentifier},s.prototype.getStateValue=function(e){switch(e.type){case t("UFIAddCommentActionType").SUBMIT_EDIT:return!1;case t("UFIAddCommentActionType").SUBMIT_NEW:return!1;case t("UFIAddCommentActionType").CHANGE_CONTENT:var n=e.text.trim().length;return n>0}return null},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIFeedbackStore",["FluxReduceStore","UFIDispatcherBase","UFIInstanceActionType"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.prototype.getInitialState=function(){return{}},s.prototype.reduce=function(e,n){var o;switch(n.type){case t("UFIInstanceActionType").INIT:var r=n.payload,i=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];return i?babelHelpers["extends"]({},e,(o={},o[n.ftentidentifier]=babelHelpers["extends"]({orderingmodes:[],defaultcommentorderingmode:""},i),o)):e}return e},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIInteractionStore",["UFIAddCommentActionType","UFICommentActionType","UFIDispatcherBase","UFIInstanceActionType","UFIKeyValueStore","UFIStoryActionType"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("UFIKeyValueStore")),c=a&&a.prototype,s.prototype.getValueFor=function(e){return!!c.getValueFor.call(this,e)},s.prototype.getStateValue=function(e){switch(e.type){case t("UFIAddCommentActionType").CHANGE_CONTENT:case t("UFIAddCommentActionType").SUBMIT_EDIT:case t("UFIAddCommentActionType").SUBMIT_NEW:case t("UFICommentActionType").CHANGE_REACTION:case t("UFICommentActionType").EDIT:case t("UFICommentActionType").REMOVE:case t("UFICommentActionType").TOGGLE_LIKE:case t("UFICommentActionType").TOGGLE_MARK_AS_SPAM:case t("UFICommentActionType").TRANSLATE:case t("UFIInstanceActionType").CHANGE_ORDER_MODE:case t("UFIInstanceActionType").TOGGLE_COMMENTS:case t("UFIStoryActionType").PAGE_IN_COMMENTS:case t("UFIStoryActionType").SHOW_REPLIES:case t("UFIStoryActionType").TOGGLE_REPLIES:return!0}return null},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFILiveTypingStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.getNewFeedbackState=function(e){switch(e){case t("UFIStoryActionType").FRIEND_TYPING:return"friend";case t("UFIStoryActionType").SOMEONE_TYPING:return"someone";case t("UFIStoryActionType").TYPING_STOPPED:return!1;default:return null}},s.prototype.getInitialState=function(){return{}},s.prototype.reduce=function(e,t){var n=s.getNewFeedbackState(t.type);if(null!==n){var o;e=babelHelpers["extends"]({},e,(o={},o[t.ftentidentifier]=n,o))}return e},s.prototype.isFriendTyping=function(e){return"friend"===this.getState()[e]},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIOrderingModeStore",["invariant","FluxReduceStore","Map","UFIDispatcherBase","UFIFeedbackStore","UFIInstanceActionType","WebCommentViewOption"],function(e,t,n,o,r,i,s){"use strict";function a(e,t){return e.filter(function(e){return e.selected}).map(function(e){return e.value}).pop()||t}function c(){u.apply(this,arguments)}var u,p;u=babelHelpers.inherits(c,t("FluxReduceStore")),p=u&&u.prototype,c.prototype.getInitialState=function(){return new(t("Map"))},c.prototype.areEqual=function(e,t){return e===t},c.prototype.isLiveStreaming=function(e){return this.getState().get(e)==t("WebCommentViewOption").LIVE_STREAMING},c.prototype.isInverted=function(e){switch(e){case t("WebCommentViewOption").RECENT_ACTIVITY:case t("WebCommentViewOption").RANKED_THREADED:case t("WebCommentViewOption").FILTERED:case t("WebCommentViewOption").LIVE_STREAMING:return!0}return!1},c.prototype.getOrderingMode=function(e){var t=this.getState().get(e);return void 0!==t||s(0),t},c.prototype.reduce=function(e,n){switch(n.type){case t("UFIInstanceActionType").INIT:if(e.has(n.instanceID))return e;t("UFIDispatcherBase").waitFor([t("UFIFeedbackStore").getDispatchToken()]);var o=t("UFIFeedbackStore").getState()[n.ftentidentifier];return e=new(t("Map"))(e),e.set(n.instanceID,a(o.orderingmodes,o.defaultcommentorderingmode));case t("UFIInstanceActionType").CHANGE_ORDER_MODE:return e.has(n.instanceID)&&e.get(n.instanceID)===n.mode||(e=new(t("Map"))(e),e.set(n.instanceID,n.mode)),e}return e},r.exports=new c(t("UFIDispatcherBase"));
},null),__d("UFIActionTypes",["UFIInstanceActionType","UFIStoryActionType","UFIAddCommentActionType","UFICommentActionType"],function(e,t,n,o,r,i){"use strict";var s={INSTANCE:t("UFIInstanceActionType"),STORY:t("UFIStoryActionType"),ADD_COMMENT:t("UFIAddCommentActionType"),COMMENT:t("UFICommentActionType")};r.exports=s},null),__d("UFIReactionPendingRequestsStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],function(e,t,n,o,r,i){"use strict";function s(e){return e+"-comment"}function a(e){return e+"-story"}function c(e,t){var n;return babelHelpers["extends"]({},e,(n={},n[t]=(e[t]||0)+1,n))}function u(e,t){var n;return babelHelpers["extends"]({},e,(n={},n[t]=(e[t]||0)-1,n))}function p(){l.apply(this,arguments)}var l,d;l=babelHelpers.inherits(p,t("FluxReduceStore")),d=l&&l.prototype,p.prototype.getInitialState=function(){return{}},p.prototype.reduce=function(e,n){switch(n.type){case t("UFIActionTypes").STORY.CHANGE_REACTION:return c(e,a(n.ftentidentifier));case t("UFIActionTypes").COMMENT.CHANGE_REACTION:return c(e,s(n.fbid));case t("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:case t("UFIActionTypes").STORY.CHANGE_REACTION_FAILURE:return u(e,a(n.ftentidentifier));case t("UFIActionTypes").COMMENT.CHANGE_REACTION_FAILURE:case t("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return u(e,s(n.fbid))}return e},p.prototype.getPendingRequestsForComment=function(e){return this.getState()[s(e)]||0},p.prototype.getPendingRequests=function(e){return this.getState()[a(e)]||0},r.exports=new p(t("UFIDispatcherBase"))},null),__d("UFIReactionSyncStore",["FluxReduceStore","UFIActionTypes","UFIDispatcherBase"],function(e,t,n,o,r,i){"use strict";function s(e){return e+"-comment"}function a(e){return e+"-story"}function c(){u.apply(this,arguments)}var u,p;u=babelHelpers.inherits(c,t("FluxReduceStore")),p=u&&u.prototype,c.prototype.getInitialState=function(){return{}},c.prototype.reduce=function(e,n){var o,r,i;switch(n.type){case t("UFIActionTypes").INSTANCE.INIT:var c=n.payload,u=c.feedbacktarget?c.feedbacktarget:c.feedbacktargets&&c.feedbacktargets[0];if(!u)return e;var p=n.payload.comments.reduce(function(e,t){return e[s(t.fbid)]=t.viewerreaction,e},{});return babelHelpers["extends"]({},e,p,(o={},o[a(n.ftentidentifier)]=u.viewerreaction,o));case t("UFIActionTypes").STORY.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},e,(r={},r[a(n.ftentidentifier)]=n.reactionType,r));case t("UFIActionTypes").COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers["extends"]({},e,(i={},i[s(n.fbid)]=n.reactionType,i));default:return e}},c.prototype.getLastKnownCommentReaction=function(e){return this.getState()[s(e)]},c.prototype.getLastKnownReaction=function(e){return this.getState()[a(e)]},r.exports=new c(t("UFIDispatcherBase"))},null),__d("UFISharedDispatcher",["UFIDispatcherBase","UFIFeedbackStore","UFIAcceptedAnswerStore","UFICommentEditIDStore","UFICommentVisibilityStore","UFICommercialBreakStore","UFIComposerIsTypingStore","UFIInteractionStore","UFILivePinnedCommentStore","UFILiveTypingStore","UFILocallyComposedCommentStore","UFIOrderingModeStore","UFIReactionPendingRequestsStore","UFIReactionSyncStore","UFISpamStore"],function(e,t,n,o,r,i){"use strict";t("UFIFeedbackStore"),t("UFIAcceptedAnswerStore"),t("UFICommentEditIDStore"),t("UFICommentVisibilityStore"),t("UFICommercialBreakStore"),t("UFIComposerIsTypingStore"),t("UFIFeedbackStore"),t("UFIInteractionStore"),t("UFILivePinnedCommentStore"),t("UFILiveTypingStore"),t("UFILocallyComposedCommentStore"),t("UFIOrderingModeStore"),t("UFIReactionPendingRequestsStore"),t("UFIReactionSyncStore"),t("UFISpamStore"),r.exports=t("UFIDispatcherBase")},null),__d("NumberFormat",["intlNumUtils","NumberFormatConfig"],function(e,t,n,o,r,i){function s(e){return(""+e).split("").reverse().join("")}function a(e,n){if(Math.abs(e).toString().length<t("NumberFormatConfig").minDigitsForThousandsSeparator)return e.toString();var o=s(""+e);return s(o.replace(c,"$1"+n))}var c=/(\d{3})(?=\d)/g,u={formatIntegerWithDelimiter:a,formatInteger:function(e){return t("NumberFormatConfig").switchImplementationGK?t("intlNumUtils").formatNumberWithThousandDelimiters(e):a(e,t("NumberFormatConfig").numberDelimiter)}};r.exports=u},null),__d("UFICommentAction",["UFICommentActionType"],function(e,t,n,o,r,i){"use strict";var s={changeReaction:function(e,n,o,r){return{type:t("UFICommentActionType").CHANGE_REACTION,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,reactionType:o,target:r}},changeReactionSuccess:function(e,n,o){return{type:t("UFICommentActionType").CHANGE_REACTION_SUCCESS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,reactionType:o}},changeReactionFailure:function(e,n,o){return{type:t("UFICommentActionType").CHANGE_REACTION_FAILURE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,reactionType:o}},mounted:function(e,n){return{type:t("UFICommentActionType").MOUNTED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.comment.fbid,renderedComment:n,contextArgs:e}},unmounted:function(e,n){return{type:t("UFICommentActionType").UNMOUNTED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.comment.fbid,renderedComment:n,contextArgs:e}},changeVisibility:function(e,n,o){return{type:t("UFICommentActionType").CHANGE_VISIBILITY,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.comment.fbid,renderedComment:n,contextArgs:e,visibility:o}},edit:function(e,n){return{type:t("UFICommentActionType").EDIT,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n}},remove:function(e,n,o,r){return{type:t("UFICommentActionType").REMOVE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,target:o,onConfirm:r}},removePreview:function(e,n,o){return{type:t("UFICommentActionType").REMOVE_PREVIEW,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,target:o}},toggleLike:function(e,n,o){return{type:t("UFICommentActionType").TOGGLE_LIKE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,like:!n.hasviewerliked,target:o}},translate:function(e,n,o){return{type:t("UFICommentActionType").TRANSLATE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,trigger:o}},markAsSpam:function(e,n,o){return{type:t("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,is_spam:!0,target:o}},markAsNotSpam:function(e,n,o){return{type:t("UFICommentActionType").TOGGLE_MARK_AS_SPAM,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,is_spam:!1,target:o}},inlineBan:function(e,n,o,r){return{type:t("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,is_banned:!0,ownerid:r,target:o}},undoInlineBan:function(e,n,o,r){return{type:t("UFICommentActionType").TOGGLE_INLINE_BAN,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n,is_banned:!1,ownerid:r,target:o}},embed:function(e,n){return{type:t("UFICommentActionType").EMBED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n}},showConstituentTitle:function(e,n){return{type:t("UFICommentActionType").SHOW_CONSTITUENT_TITLE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n}},hideConstituentTitle:function(e,n){return{type:t("UFICommentActionType").HIDE_CONSTITUENT_TITLE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,fbid:n.fbid,comment:n}}};r.exports=s},null),__d("UFIReactionsUtils",[],function(e,t,n,o,r,i){var s={getReactionData:function(e,t,n,o){t=parseInt(t,10);var r=!!t,i=e.reactorids?e.reactorids.slice(0):[],s=i.indexOf(n),a=0;r?s<0&&(i.unshift(n),a=1):s>-1&&(i.splice(s,1),a=-1);var c=Math.max(e.reactioncount+a,0),u=e.reactioncountreduced;u&&!isNaN(u)&&(u=o?o(c):c.toString());var p,l=e.reactioncountmap||{},d=e.viewerreaction;d&&l[d]&&(l[d]["default"]=Math.max((l[d]["default"]||0)-1,0),p=l[d].reduced,p&&!isNaN(p)&&(l[d].reduced=l[d]["default"].toString())),r&&l[t]&&(l[t]["default"]=(l[t]["default"]||0)+1,p=l[t].reduced,p&&!isNaN(p)&&(l[t].reduced=l[t]["default"].toString()));var m=e.userreactions;m&&!Array.isArray(m)||(m={}),r?m[n]=t:delete m[n];var _=e.importantreactorids||[],I=_.indexOf(n);r&&I===-1?_.unshift(n):r||I===-1||_.splice(I,1);var f=null;if(e.reactionsentences){var h=!(d&&t);f={current:e.reactionsentences[h?"alternate":"current"],alternate:e.reactionsentences[h?"current":"alternate"]}}return{importantreactorids:_,reactioncount:c,reactioncountmap:l,reactioncountreduced:u,reactionsentences:f,reactorids:i,userreactions:m,viewerreaction:t}},getReactionCountMapFromSummary:function(e){var t={};if(!e)return t;for(var n=0;n<e.length;n++){var o=e[n],r=o.feedback_reaction.key;t[r]={"default":o.reactors&&o.reactors.count,reduced:o.reactors&&o.reactors.display_count}}return t}};r.exports=s},null),__d("UFIStoryAction",["UFIStoryActionType"],function(e,t,n,o,r,i){"use strict";var s={changeAcceptedAnswer:function(e,n,o){return{type:t("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,instanceID:e.instanceid,ftentidentifier:n.ftentidentifier,comment:n,doAccept:o}},commentsArrived:function(e,n,o,r){return{type:t("UFIStoryActionType").COMMENTS_ARRIVED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,newOffset:n,newLength:o,source:r}},pageInComments:function(e,n,o,r){return{type:t("UFIStoryActionType").PAGE_IN_COMMENTS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,commentID:n,direction:o,nextRange:r}},showComments:function(e){return{type:t("UFIStoryActionType").SHOW_COMMENTS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},showReplies:function(e,n,o){return{type:t("UFIStoryActionType").SHOW_REPLIES,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,commentID:n,initiatorComment:o}},spamFetched:function(e,n,o,r){return{type:t("UFIStoryActionType").SPAM_FETCHED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,viewas:n,commentIDs:o,parentCommentID:r}},changeReaction:function(e,n,o){return{type:t("UFIStoryActionType").CHANGE_REACTION,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,contextArgs:e,reactionType:n,target:o}},changeReactionSuccess:function(e,n){return{type:t("UFIStoryActionType").CHANGE_REACTION_SUCCESS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,reactionType:n}},changeReactionFailure:function(e,n){return{type:t("UFIStoryActionType").CHANGE_REACTION_FAILURE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,reactionType:n}},toggleReplies:function(e,n){return{type:t("UFIStoryActionType").TOGGLE_REPLIES,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,commentID:n}},friendTyping:function(e){return{type:t("UFIStoryActionType").FRIEND_TYPING,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},someoneTyping:function(e){return{type:t("UFIStoryActionType").SOMEONE_TYPING,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},typingStopped:function(e){return{type:t("UFIStoryActionType").TYPING_STOPPED,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},pinComment:function(e,n){var o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return{type:t("UFIStoryActionType").LIVE_PIN_COMMENT,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,commentID:n,pinEventID:o}},unpinComment:function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return{type:t("UFIStoryActionType").LIVE_UNPIN_COMMENT,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,commentID:null,pinEventID:n}}};r.exports=s},null),__d("UFIUserActionUtils",["Nectar","collectDataAttributes"],function(e,t,n,o,r,i){var s={trackingData:function a(e){if(!e)return{ft:{}};var a={ft:t("collectDataAttributes")(e,["ft"]).ft};return t("Nectar").addModuleData(a,e),a}};r.exports=s},null),__d("XUFICommentReactionController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/comment/reaction/",{reaction_type:{type:"Enum",enumType:0}})},null),__d("XUFIReactionController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/reaction/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:!1},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},spherical_pitch:{type:"Int"},spherical_yaw:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})},null),__d("UFIReactionUserActions",["ActorURI","AsyncResponse","AsyncRequest","ClientIDs","ChannelClientID","NumberFormat","QE2Logger","MercuryServerDispatcher","UFICentralUpdates","UFICommentAction","UFIComments","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionPendingRequestsStore","UFIReactionSyncStore","UFIReactionTypes","UFISharedDispatcher","UFIStoryAction","UFIReactionsUtils","UFIUserActionUtils","UFIVideoPlayerRegistry","XUFIReactionController","XUFICommentReactionController","emptyFunction","ifRequired","setImmediate"],function(e,t,n,o,r,i){"use strict";function s(e,t){return e&&e.ft_ent_identifier==t.ft_ent_identifier&&e.comment_id==t.comment_id}function a(e,t){return t}function c(){t("QE2Logger").logExposureForUser(A)}function u(e,n){var o=t("UFIReactionPendingRequestsStore").getPendingRequests(e);if(!(o>0)){var r=t("UFIReactionSyncStore").getLastKnownReaction(e);n!==r&&t("UFIFeedbackTargets").getFeedbackTarget(e,function(e){var n=f(e,r);t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:n})})}}function p(e,n){var o=n.data,r=o.ft_ent_identifier,i=o.reaction_type;t("UFISharedDispatcher").dispatch(t("UFIStoryAction").changeReactionSuccess({instanceid:o.instance_id,ftentidentifier:r},i)),t("setImmediate")(function(){return u(r,i)})}function l(e){var n=e.request.data,o=n.ft_ent_identifier,r=n.reaction_type;c();var i=t("UFIConfig").reactionsHasReactionsRollback,s=t("UFIConfig").reactionsHasReactionsRetry;return s&&!n.retry_attempt?void t("MercuryServerDispatcher").trySend(t("XUFIReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},n,{retry_attempt:1})):(t("UFISharedDispatcher").dispatch(t("UFIStoryAction").changeReactionFailure({instanceid:n.instance_id,ftentidentifier:o},r)),i&&t("setImmediate")(function(){return u(o,r)}),void t("AsyncResponse").defaultErrorHandler(e))}function d(e,n,o){var r=t("UFIReactionPendingRequestsStore").getPendingRequestsForComment(n.fbid);if(!(r>0)){var i=t("UFIReactionSyncStore").getLastKnownCommentReaction(n.fbid);o!==i&&t("UFIFeedbackTargets").getFeedbackTarget(e,function(e){var o=I(n,e,i);t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:o})})}}function m(e,n){var o=n.data,r=o.ft_ent_identifier,i=o.reaction_type,s=t("UFIComments").getComment(o.comment_id);s&&(t("UFISharedDispatcher").dispatch(t("UFICommentAction").changeReactionSuccess({instanceid:o.instance_id,ftentidentifier:r},s,i)),t("setImmediate")(function(){return d(r,s,i)}))}function _(e){var n=e.request.data,o=n.ft_ent_identifier,r=n.reaction_type,i=t("UFIComments").getComment(n.comment_id);if(i){c();var s=t("UFIConfig").reactionsHasCommentReactionsRollback,a=t("UFIConfig").reactionsHasCommentReactionsRetry;if(a&&!n.retry_attempt)return void t("MercuryServerDispatcher").trySend(t("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({},n,{retry_attempt:1}));t("UFISharedDispatcher").dispatch(t("UFICommentAction").changeReactionFailure({instanceid:n.instance_id,ftentidentifier:o},i,r)),s&&t("setImmediate")(function(){return d(o,i,r)}),t("AsyncResponse").defaultErrorHandler(e)}}function I(e,n,o){var r=e.id,i=[C(e,o,r,n.supportedreactions||[],n.actorforpost)],s=o===t("UFIReactionTypes").LIKE;if(n.hasviewerliked!==s){var a=s?1:-1;i.push({commentid:r,actiontype:t("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:s,likecount:(e.likecount||0)+a})}return i}function f(e,n){var o=[h(e,n)],r=n!==t("UFIReactionTypes").NONE;if(e.hasviewerliked!==r){var i=r?1:-1;o.push({actiontype:t("UFIConstants").UFIActionType.LIKE_ACTION,actorid:e.actorforpost,hasviewerliked:r,likecount:(e.likecount||0)+i,entidentifier:e.entidentifier,likesentences:{current:e.likesentences.alternate,alternate:e.likesentences.current}})}return o}function h(e,n){return Object.assign({actiontype:t("UFIConstants").UFIActionType.REACTION,actorid:e.actorforpost,entidentifier:e.entidentifier},t("UFIReactionsUtils").getReactionData(e,n,e.actorforpost,t("NumberFormat").formatInteger))}function C(e,n,o,r,i){for(var s={},a=0;a<r.length;a++){var c=r[a],u=e.reactioncountmap?e.reactioncountmap[c]:null;s[c]={"default":u?u["default"]:0,reduced:u?u.reduced:"0"}}var p=t("UFIReactionsUtils").getReactionData({viewerreaction:e.viewerreaction,reactioncount:e.reactioncount,reactioncountreduced:e.reactioncountreduced,reactioncountmap:s,reactorids:e.viewerreaction?[i]:[]},n,i);return{actiontype:t("UFIConstants").UFIActionType.COMMENT_REACTION,commentid:o,hasviewerliked:!!n,likecount:p.reactioncountmap[1]["default"],reactioncount:p.reactioncount,reactioncountmap:p.reactioncountmap,reactioncountreduced:p.reactioncountreduced,viewerreaction:n}}var E={changeReaction:function(e,n,o,r){t("UFIFeedbackTargets").getFeedbackTarget(e,function(i){var s=f(i,n);t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:s});var a=t("UFIUserActionUtils").trackingData(r),c={};c[t("ActorURI").PARAMETER_ACTOR]=i.actorforpost;var u=babelHelpers["extends"]({client_id:t("ClientIDs").getNewClientID(),ft_ent_identifier:e,reaction_type:n,root_id:o.rootid,session_id:t("ChannelClientID").getID(),source:o.source,feedback_referrer:o.feedbackReferrer,instance_id:o.instanceid},c,a);o.fluentContentToken&&function(){var e=o.fluentContentToken,n=t("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(r,e);o.isLiveVOD||n&&n.isSpherical()?u.on_demand_content_time_offset=t("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(r,e):o.islivestreaming&&(u.live_content_time_offset=t("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(r,e)),n&&n.isSpherical()&&t("ifRequired")("SphericalViewportControlStore",function(e){var t=e.getOrientation(n.getVideoPlayerID());t&&(u.spherical_pitch=Math.round(t.pitch),u.spherical_yaw=Math.round(t.yaw))},t("emptyFunction")())}(),t("MercuryServerDispatcher").trySend(t("XUFIReactionController").getURIBuilder().getURI(),u)})},changeCommentReaction:function(e,n,o,r){var i=t("UFIComments").getComment(e);i.viewerreaction!=n&&t("UFIFeedbackTargets").getFeedbackTarget(i.ftentidentifier,function(s){var a=t("UFIUserActionUtils").trackingData(r),c=I(i,s,n);t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:c});var u={};u[t("ActorURI").PARAMETER_ACTOR]=s.actorforpost,t("MercuryServerDispatcher").trySend(t("XUFICommentReactionController").getURIBuilder().getURI(),babelHelpers["extends"]({comment_id:e,legacy_id:i.legacyid,reaction_type:n,ft_ent_identifier:i.ftentidentifier,source:o.source,instance_id:o.instanceid,client_id:t("ClientIDs").getNewClientID(),session_id:t("ChannelClientID").getID()},a,u))})}},g={},T=t("XUFIReactionController").getURIBuilder().getURI();g[T]={mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:l,handler:p};var y=t("XUFICommentReactionController").getURIBuilder().getURI();g[y]={mode:t("MercuryServerDispatcher").BATCH_CONDITIONAL,batch_if:s,batch_function:a,error_handler:_,handler:m},t("MercuryServerDispatcher").registerEndpoints(g);var A="feedback_reactions_www_rollback_universe";r.exports=E},null),__d("UFIPagedCommentListImpl",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFICommentLogger","UFIConfig","UFIConstants","UFIFeedbackTargets"],function(e,t,n,o,r,i){"use strict";function s(e){this.actorID=null,this.basePermalink=null,this.commentPermalinks=Object.create(null),this.count=0,this.dataSource=new(t("KeyedCallbackManager")),this.deletedComments=Object.create(null),this.deletedCount=0,this.lastRequestedLength=0,this.lastRequestedOffset=0,this.feedbackTargetID=e,t("UFIFeedbackTargets").getFeedbackTarget(this.feedbackTargetID,function(e){this.actorID=e.actorforpost,this.basePermalink=e.permalink}.bind(this))}s.prototype.setClientHasAll=function(e){},s.prototype.addOrUpdateComment=function(e){e.islocal?this.$UFIPagedCommentListImpl1(e.id):this.$UFIPagedCommentListImpl2(e.id,e.clientid,e.legacyid),t("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)},s.prototype.$UFIPagedCommentListImpl1=function(e){this.dataSource.setResource(this.count,e),this.count++},s.prototype.$UFIPagedCommentListImpl2=function(e,n,o){var r=n&&t("ClientIDs").isExistingClientID(n),i=this.dataSource.getAllResources(),s={};for(var a in i){var c=i[a];s[c]=a}if(r&&n&&n in s){s[e]=s[n];var u=s[n];this.dataSource.setResource(u,e),t("UFIConfig").logCommentPost&&t("UFICommentLogger").logNewCommentReceived(n,Date.now())}else!s[e]&&n&&this.$UFIPagedCommentListImpl1(e);o&&e in s&&(this.commentPermalinks[e]=this.buildCommentPermalink(e,o,s[e]))},s.prototype.addCommentIDs=function(e,n,o){for(var r={},i=0;i<n;i++)r[e+i]=o[i]||t("UFIConstants").unavailableCommentKey;this.dataSource.addResourcesAndExecute(r),t("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)},s.prototype.getComments=function(e,t,n,o){var r=new Array(t).fill().map(function(t,n){return n+e}),i=this.dataSource.getUnavailableResourcesFromRequest(r);if(i.length){var s=Math.min.apply(Math,i),a=Math.max.apply(Math,i),c=s,u=a-s+1;(c<this.lastRequestedOffset||c+u>this.lastRequestedOffset+this.lastRequestedLength)&&(this.lastRequestedOffset=c,this.lastRequestedLength=u,this.fetchComments(c,u,n))}else this.dataSource.executeOrEnqueue(r,function(n){return o(this.commentsFromCommentIDs(n,e,t))}.bind(this))},s.prototype.getCommentsOrThrow=function(e){var t=e.getLength(),n=e.getOffset(),o={};return new Array(t).fill().forEach(function(e,t){var r=t+n,i=this.dataSource.getResource(r);if(!i)throw new Error("Tried to get nonexistent comment");o[r]=i}.bind(this)),this.commentsFromCommentIDs(o,n,t)},s.prototype.fetchComments=function(e,t,n){},s.prototype.commentsFromCommentIDs=function(e,t,n){return{}},s.prototype.reset=function(){var e=this.dataSource.getAllResources();return this.dataSource.reset(),this.count=0,this.deletedCount=0,this.deletedComments={},this.lastRequestedOffset=0,this.lastRequestedLength=0,e},s.prototype.deleteComment=function(e){e in this.deletedComments||(this.deletedComments[e]=!0,this.deletedCount++)},s.prototype.updateCommentCount=function(e){this.count=e,this.deletedCount=0},s.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID},s.prototype.getCommentCount=function(){return this.count},s.prototype.getDeletedCount=function(){return this.deletedCount},s.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount},s.prototype.getBasePermalink=function(){return this.basePermalink},s.prototype.buildCommentPermalink=function(e,t,n){return null},s.prototype.getPermalinkForComment=function(e){return this.commentPermalinks[e]},r.exports=s},null),__d("UFIReplyCommentListImpl",["ActorURI","JSLogger","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIPagedCommentListImpl","URI"],function(e,t,n,o,r,i){"use strict";function s(e,t,n){c.constructor.call(this,e),this.parentCommentID=t,this.containerOrderingMode=n}var a,c,u=t("JSLogger").create("ufi_reply_comment_list");a=babelHelpers.inherits(s,t("UFIPagedCommentListImpl")),c=a&&a.prototype,s.prototype.fetchComments=function(e,n,o){t("UFIConfig").logCommentLoad&&t("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:!0});var r={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[e],lengths:[n],feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:o?o.translateAll:null};o&&o.viewAs||(r[t("ActorURI").PARAMETER_ACTOR]=this.actorID),t("MercuryServerDispatcher").trySend("/ajax/ufi/reply_fetch.php",r)},s.prototype.commentsFromCommentIDs=function(e,n,o){for(var r={},i=0;i<o;i++){var s=t("UFIComments").getComment(e[n+i]);s&&(r[n+i]=s)}return r},s.prototype.reset=function(){var e=c.reset.call(this),n={};for(var o in e){var r=e[o];n[r]=!0}return t("UFIComments").resetComments(n),e},s.prototype.getParentCommentID=function(){return this.parentCommentID},s.prototype.buildCommentPermalink=function(e,n,o){if(!this.basePermalink)return null;var r=this.getParentCommentID().split("_"),i=n;return 2===r.length?i=r[1]:u.error("Bad reply comment ID: "+this.getParentCommentID()),new(t("URI"))(this.basePermalink).addQueryData({comment_id:i,reply_comment_id:n}).toString()},t("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/reply_fetch.php":{mode:t("MercuryServerDispatcher").IMMEDIATE}}),r.exports=s},null),__d("UFIReplyCommentList",["getObjectValues","UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentListImpl"],function(e,t,n,o,r,i){"use strict";function s(e){var n=t("UFIComments").getComment(e.commentid),o=n.id,r=n.parentcommentid;r&&n.status!==t("UFIConstants").UFIStatus.DELETED&&n.status!==t("UFIConstants").UFIStatus.FAILED_ADD&&c.getReplyListsForParentCommentID(r).forEach(function(e){e.deleteComment(o)})}var a={},c={getCommentList:function(e,n,o){if(a[n]||(a[n]={}),!a[n][o]){var r=new(t("UFIReplyCommentListImpl"))(e,n,o),i=c.getReplyListsForParentCommentID(String(n));i.length&&r.updateCommentCount(i[0].getCommentCount()),a[n][o]=r}return a[n][o]},getReplyListsForParentCommentID:function(e){return t("getObjectValues")(a[e]||{})},resetWithContext:function(e,t,n,o){var r=a[t][o];r&&(r.reset(),r.actorID=n)}};t("UFICentralUpdates").subscribe("update-actions",function(e,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var r=n.actions[o];switch(r.actiontype){case t("UFIConstants").UFIActionType.DELETE_COMMENT:s(r)}}}),t("UFICentralUpdates").subscribe("update-comment-lists",function(e,t){var n=t.commentlists;if(n&&n.replies&&Object.keys(n).length)for(var o in n.replies){var r=n.replies[o],i=r.ftentidentifier,s=r.containerorderingmode,a=c.getCommentList(String(i),String(o),s);a.addCommentIDs(r.range.offset,r.range.length,r.values),a.updateCommentCount(r.count)}}),t("UFICentralUpdates").subscribe("update-comments",function(e,t){t.comments&&t.comments.length&&t.comments.forEach(function(e){var t=e.parentcommentid;t&&c.getReplyListsForParentCommentID(String(t)).forEach(function(t){t.addOrUpdateComment(e)})})}),r.exports=c},6),__d("UFIToplevelPagedCommentListImpl",["ActorURI","MercuryServerDispatcher","UFICommentLogger","UFIComments","UFIConfig","UFIOrderingModeStore","UFIPagedCommentListImpl","URI","WebCommentViewOption"],function(e,t,n,o,r,i){"use strict";function s(e,n){c.constructor.call(this,e),this.clientHasAll=!1,this.orderReversed=t("UFIOrderingModeStore").isInverted(n),this.orderingMode=n,this.clientHasAll=!1}var a,c;a=babelHelpers.inherits(s,t("UFIPagedCommentListImpl")),c=a&&a.prototype,s.prototype.fetchComments=function(e,n,o){t("UFIConfig").logCommentLoad&&t("UFICommentLogger").logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:!1});var r={ft_ent_identifier:this.feedbackTargetID,viewas:o&&o.viewAs?o.viewAs+"":null,source:o&&o.feedbackSource,offset:e,length:n,orderingmode:this.orderingMode,feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null,translate_all:o?o.translateAll:null,clientcommentcount:this.count};this.orderingMode===t("WebCommentViewOption").RECENT_ACTIVITY&&this.orderingMode===t("WebCommentViewOption").RANKED_THREADED&&this.orderingMode===t("WebCommentViewOption").FILTERED||delete r.clientcommentcount,o&&o.viewAs||(r[t("ActorURI").PARAMETER_ACTOR]=this.actorID),t("MercuryServerDispatcher").trySend("/ajax/ufi/comment_fetch.php",r)},s.prototype.commentsFromCommentIDs=function(e,n,o){for(var r={},i=n,s=n+o-1,a=0;a<o;a++){var c=this.orderReversed?s-a:i+a,u=t("UFIComments").getComment(e[c]);u&&(r[n+a]=u)}return r},s.prototype.getOrderingMode=function(){return this.orderingMode},s.prototype.setClientHasAll=function(e){this.clientHasAll=e},s.prototype.getClientHasAll=function(){return this.clientHasAll},s.prototype.buildCommentPermalink=function(e,n,o){return this.basePermalink?new(t("URI"))(this.basePermalink).addQueryData({comment_id:n}).toString():null},t("MercuryServerDispatcher").registerEndpoints({"/ajax/ufi/comment_fetch.php":{mode:t("MercuryServerDispatcher").IMMEDIATE}}),r.exports=s},null),__d("UFIRange",[],function(e,t,n,o,r,i){"use strict";function s(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];this.offset=e,this.length=t,this.requestedOffset=this.offset,this.requestedLength=this.length}s.prototype.getOffset=function(){return this.offset},s.prototype.getLength=function(){return this.length},s.prototype.getRequestedOffset=function(){return this.requestedOffset},s.prototype.getRequestedLength=function(){return this.requestedLength},s.prototype.updateRequestedRange=function(e,t){return this.requestedOffset=e,this.requestedLength=t,this},s.prototype.isLoadingNext=function(){var e=this.requestedOffset+this.requestedLength,t=this.offset+this.length;return e>t},s.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset},s.combine=function(e,t){if(!t)return e;var n=Math.min(e.getOffset(),t.getOffset()),o=Math.max(e.getLength(),t.getLength()),r=new s(n,o);if(t.getRequestedLength()>0){var i=Math.min(n,t.getRequestedOffset()),a=Math.max(n+o,t.getRequestedOffset()+t.getRequestedLength());r.updateRequestedRange(i,a-i)}return r},r.exports=s},null),__d("UFIToplevelStreamedCommentList",["invariant","ClientIDs","Map","UFICentralUpdates","UFICommentLogger","UFIConfig","UFIComments","UFIConstants","UFIRange","UFIStreamingStateType"],function(e,t,n,o,r,i,s){"use strict";function a(e){this.feedbackTargetID=e,this.commentIDs=[],this.deletedCount=0,this.totalCommentCount=0}a.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID},a.prototype.getClientHasAll=function(){return!1},a.prototype.getActualCommentCount=function(){return this.commentIDs.length},a.prototype.getCommentCount=function(){return this.totalCommentCount},a.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()},a.prototype.getDeletedCount=function(){return this.deletedCount},a.prototype.getPermalinkForComment=function(e){return""},a.prototype.getComments=function(e,n,o,r){r(this.getCommentsOrThrow(new(t("UFIRange"))(e,n),o))},a.prototype.getCommentsOrThrow=function(e,n){var o=e.getLength(),r=e.getOffset();0===r||s(0);for(var i=n.streamingOrderReversed,a={},c=0;c<Math.min(o,this.commentIDs.length);++c){var u=i?this.commentIDs.length-1-c:c,p=t("UFIComments").getComment(this.commentIDs[u]);p&&(a[c]=p)}return a},a.prototype.$UFIToplevelStreamedCommentList3=function(){var e=this.commentIDs;return this.commentIDs=[],e},a.prototype.hasComment=function(e){for(var t=0;t<this.commentIDs.length;++t)if(this.commentIDs[t]===e.id)return!0;return!1},a.prototype.addCommentIDs=function(e,t,n){},a.prototype.setClientHasAll=function(e){},a.prototype.addOrUpdateComment=function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=e.clientid;if(o&&t("ClientIDs").isExistingClientID(o))for(var r=0;r<this.commentIDs.length;++r)this.commentIDs[r]===o&&(this.commentIDs[r]=e.id,t("UFIConfig").logCommentPost&&t("UFICommentLogger").logNewCommentReceived(o,Date.now()));else if(n||e.islocal){if(this.hasComment(e))return;this.commentIDs.push(e.id),n!==t("UFIStreamingStateType").ON_DEMAND&&(this.totalCommentCount+=1);
}this.commentIDs.length>50&&this.commentIDs.shift(),t("UFICentralUpdates").didUpdateFeedback(this.feedbackTargetID)},a.prototype.deleteComment=function(e){this.deletedCount+=1;for(var t=[],n=0;n<this.commentIDs.length;++n){var o=this.commentIDs[n];o!==e&&t.push(o)}this.commentIDs=t},a.prototype.updateCommentCount=function(e){this.totalCommentCount=e,this.deletedCount=0},a.getCommentList=function(e){var n=arguments.length<=1||void 0===arguments[1]?a.GLOBAL_ID:arguments[1],o=a.$UFIToplevelStreamedCommentList1.get(e);o||(o=new(t("Map")),a.$UFIToplevelStreamedCommentList1.set(e,o));var r=o.get(n);return r||(r=new a(e),o.set(n,r)),r},a.getExistingCommentList=function(e){var t=arguments.length<=1||void 0===arguments[1]?a.GLOBAL_ID:arguments[1],n=a.$UFIToplevelStreamedCommentList1.get(e);return n?n.get(t):null},a.getAllExistingCommentLists=function(e){var t=a.$UFIToplevelStreamedCommentList1.get(e);return t?Array.from(t.values()):[]},a.$UFIToplevelStreamedCommentList4=function(e,t){var n=a.$UFIToplevelStreamedCommentList2.get(e);if(n)return void t.forEach(function(e){n[e]=!0});var o={};t.forEach(function(e){o[e]=!0}),a.$UFIToplevelStreamedCommentList2.set(e,o)},a.resetCommentList=function(e){var t=arguments.length<=1||void 0===arguments[1]?a.GLOBAL_ID:arguments[1],n=a.getExistingCommentList(e,t);n&&a.$UFIToplevelStreamedCommentList4(e,n.$UFIToplevelStreamedCommentList3())},a.resetAllCommentLists=function(e){var n=a.getAllExistingCommentLists(e);if(0!==n.length){n.forEach(function(t){a.$UFIToplevelStreamedCommentList4(e,t.$UFIToplevelStreamedCommentList3())});var o=a.$UFIToplevelStreamedCommentList2.get(e);o&&(a.$UFIToplevelStreamedCommentList2["delete"](e),t("UFIComments").resetComments(o))}},a.GLOBAL_ID="GLOBAL_ID",a.$UFIToplevelStreamedCommentList1=new(t("Map")),a.$UFIToplevelStreamedCommentList2=new(t("Map")),t("UFICentralUpdates").subscribe("update-actions",function(e,n){n.actions&&n.actions.forEach(function(e){if(e.actiontype===t("UFIConstants").UFIActionType.DELETE_COMMENT){var n=t("UFIComments").getComment(e.commentid),o=n.id,r=n.ftentidentifier,i=n.parentcommentid;i||(e.islocal||n.status!==t("UFIConstants").UFIStatus.DELETED&&n.status!==t("UFIConstants").UFIStatus.FAILED_ADD)&&a.getAllExistingCommentLists(r).forEach(function(e){return e.deleteComment(o)})}})}),t("UFICentralUpdates").subscribe("update-comments",function(e,t){if(t.comments){var n=t.targetufiinstanceid;t.comments.forEach(function(e){e.parentcommentid||(n?a.getCommentList(e.ftentidentifier,n).addOrUpdateComment(e,t.streamingstate):a.getAllExistingCommentLists(e.ftentidentifier).forEach(function(n){n.addOrUpdateComment(e,t.streamingstate)}))})}}),t("UFICentralUpdates").subscribe("update-feedback",function(e,t){var n=t.feedbacktarget?t.feedbacktarget:t.feedbacktargets&&t.feedbacktargets[0];n&&a.getAllExistingCommentLists(n.entidentifier).forEach(function(e){return e.updateCommentCount(n.commentcount)})}),r.exports=a},6),__d("UFIToplevelPagedCommentList",["UFICentralUpdates","UFIComments","UFIConstants","UFIReplyCommentList","UFIToplevelPagedCommentListImpl","UFIToplevelStreamedCommentList","WebCommentViewOption"],function(e,t,n,o,r,i){"use strict";function s(e){var n=t("UFIComments").getComment(e.commentid),o=n.id,r=n.ftentidentifier,i=n.parentcommentid;i||(e.islocal||n.status!==t("UFIConstants").UFIStatus.DELETED&&n.status!==t("UFIConstants").UFIStatus.FAILED_ADD)&&c.getCommentListsForFeedbackTargetID(r).forEach(function(e){e.deleteComment(o)})}var a={},c={getCommentList:function(e,n){if(a[e]||(a[e]={}),!a[e][n]){var o=new(t("UFIToplevelPagedCommentListImpl"))(e,n),r=c.getCommentListsForFeedbackTargetID(e);r.length&&o.updateCommentCount(r[0].getCommentCount()),a[e][n]=o}return a[e][n]},getCommentListsForFeedbackTargetID:function(e){var t=[],n=a[e]||{};for(var o in n)t.push(n[o]);return t},getPagedCommentCountForFeedbackTargetID:function(e){var t=c.getCommentListsForFeedbackTargetID(e);return t.length?t[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function(e){var n=c.getCommentListsForFeedbackTargetID(e),o=n.length?n[0].getDisplayedCommentCount():null,r=t("UFIToplevelStreamedCommentList").getAllExistingCommentLists(e),i=r.length?r[0].getDisplayedCommentCount():null;return null===o&&null===i?null:Math.max(o||0,i||0)},resetCommentListsForFeedbackTargetID:function(e){if(a[e]){var n={};for(var o in a[e]){var r=a[e][o],i=r.reset();for(var s in i){var c=i[s];n[c]=!0}}t("UFIComments").resetComments(n)}},resetCommentListsWithContext:function(e,n){var o=a[e];if(o){var r={};for(var i in o){var s=o[i];s.actorID=n;var c=s.reset();for(var u in c){var p=c[u];r[p]=!0,t("UFIReplyCommentList").resetWithContext(e,p,n,i)}}t("UFIComments").resetComments(r)}}};t("UFICentralUpdates").subscribe("update-actions",function(e,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var r=n.actions[o];switch(r.actiontype){case t("UFIConstants").UFIActionType.DELETE_COMMENT:s(r)}}}),t("UFICentralUpdates").subscribe("update-comment-lists",function(e,t){var n=t.commentlists;if(n&&n.comments&&Object.keys(n).length)for(var o in n.comments)for(var r in n.comments[o]){var i=n.comments[o][r],s=c.getCommentList(String(o),r);s.addCommentIDs(i.range.offset,i.range.length,i.values),s.setClientHasAll(!!i.forcenotpageable)}}),t("UFICentralUpdates").subscribe("update-comments",function(e,t){t.comments&&t.comments.length&&t.comments.forEach(function(e){if(!e.parentcommentid){var t=e.ftentidentifier;c.getCommentListsForFeedbackTargetID(String(t)).forEach(function(t){t.addOrUpdateComment(e)})}})}),t("UFICentralUpdates").subscribe("update-feedback",function(e,n){var o=n.feedbacktarget?n.feedbacktarget:n.feedbacktargets&&n.feedbacktargets[0];o&&function(){var e=o.entidentifier,n=o.defaultcommentorderingmode,r={};n&&(r[n]=!0),o.orderingmodes&&o.orderingmodes.forEach(function(e){e.value!==t("WebCommentViewOption").LIVE_STREAMING&&(r[e.value]=!0)});for(var i in r)c.getCommentList(String(e),String(i)).updateCommentCount(o.commentcount)}()}),r.exports=c},6),__d("XConstituencyTitleEditVisibilityDialogController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/constituency_title/edit_comment_visibility/",{ft_id:{type:"FBID",required:!0},action_type:{type:"Enum",required:!0,enumType:1},source:{type:"Enum",required:!0,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}})},null),__d("XConstituencyTitleEnableController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/constituency_title/enable/",{})},null),__d("XUFIActorChangeController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/actor/change/",{})},null),__d("XUFIAddCommentController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/add/comment/",{})},null),__d("XUFICommentAcceptAnswerController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/comment/answer/accept/",{})},null),__d("XUFICommentLikeController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/comment/like/",{})},null),__d("XUFIDeleteCommentController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/delete/comment/",{})},null),__d("XUFIEditCommentController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/edit/comment/",{})},null),__d("XUFIHideCommentController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/hide/comment/",{})},null),__d("XUFILikeController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/like/",{})},null),__d("XUFITranslateCommentController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/ufi/translate/comment/",{})},null),__d("UFIUserActions",["errorCode","fbt","ActorURI","AsyncRequest","AsyncResponse","ChannelClientID","ClientIDs","CommentPostedLiveState","ImmutableObject","NYE2017TextHandler","UFICentralUpdates","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFIComments","UFICommentLogger","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIReactionUserActions","UFIUserActionUtils","UFIVideoPlayerRegistry","MercuryServerDispatcher","UnicodeBidi","XConstituencyTitleEditVisibilityDialogController","XConstituencyTitleEnableController","XUFIActorChangeController","XUFIAddCommentController","XUFICommentAcceptAnswerController","XUFICommentLikeController","XUFIDeleteCommentController","XUFIEditCommentController","XUFIHideCommentController","XUFILikeController","XUFITranslateCommentController","ifRequired"],function(e,t,n,o,r,i,s,a){"use strict";function c(e){t("AsyncResponse").defaultErrorHandler(e)}function u(e){var n=e.request.data;t("AsyncResponse").defaultErrorHandler(e);var o=n.client_id||n.comment_id,r=t("UFIComments").getComment(o),i=r.status===t("UFIConstants").UFIStatus.PENDING_EDIT?t("UFIConstants").UFIStatus.FAILED_EDIT:t("UFIConstants").UFIStatus.FAILED_ADD;r=t("ImmutableObject").setDeep(r,{status:i,allowRetry:p(e),body:{mentionstext:n.comment_text,mentionsphoto:r.photo_comment,mentionsvideo:r.video_comment}}),t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[r]})}function p(e){var t=e.getError();return!e.isBlockedAction()&&(!!e.silentError||1357012!==t&&1357006!==t)}function l(e){var n=e.request.data,o=n.comment_id,r=t("UFIComments").getComment(o);r=t("ImmutableObject").set(r,{status:r.priorstatus||null,priorstatus:void 0}),t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[r]})}function d(e){var n=e.request.data,o=n.comment_id,r=t("UFIComments").getComment(o);if(n.like_action===r.hasviewerliked){var i=r.hasviewerliked?-1:1,s={commentid:o,actiontype:t("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:!r.hasviewerliked,likecount:(r.likecount||0)+i};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[s]})}t("AsyncResponse").defaultErrorHandler(e)}function m(e){var n=e.request.data,o=n.ft_ent_identifier;t("UFIFeedbackTargets").getFeedbackTarget(o,function(e){if(e.hasviewerliked===n.like_action){var r=e.hasviewerliked?-1:1,i={actiontype:t("UFIConstants").UFIActionType.LIKE_ACTION,actorid:e.actorforpost,hasviewerliked:!e.hasviewerliked,likecount:(e.likecount||0)+r,entidentifier:o,likesentences:{current:e.likesentences.alternate,alternate:e.likesentences.current}};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[i]})}}),t("AsyncResponse").defaultErrorHandler(e)}function _(e){var n=e.request.data,o=n.ft_ent_identifier;t("UFIFeedbackTargets").getFeedbackTarget(o,function(e){if(e.hasviewersubscribed===n.subscribe_action){var r={actiontype:t("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:e.actorforpost,hasviewersubscribed:!e.hasviewersubscribed,entidentifier:o};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[r]})}}),t("AsyncResponse").defaultErrorHandler(e)}function I(e,t){return e&&e.ft_ent_identifier==t.ft_ent_identifier&&e.comment_id==t.comment_id}function f(e,t){return e&&e.ft_ent_identifier==t.ft_ent_identifier}function h(e,t){return e&&e.ft_ent_identifier==t.ft_ent_identifier}function C(e,t){return t}var E={BAN:"ban",UNDO_BAN:"undo_ban"},g={changeActor:function(e,n){t("UFIFeedbackTargets").getFeedbackTarget(e,function(o){t("UFIToplevelPagedCommentList").resetCommentListsWithContext(e,n),t("UFIToplevelStreamedCommentList").resetAllCommentLists(e),t("UFICentralUpdates").inform("actor-changed",{actorID:n});var r={from_actor_id:o.actorforpost,ft_ent_identifier:e};r[t("ActorURI").PARAMETER_ACTOR]=n;var i=t("XUFIActorChangeController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(i,r)})},changeCommentLike:function(e,n,o){var r=t("UFIComments").getComment(e);if(r.hasviewerliked!=n){var i=t("UFIUserActionUtils").trackingData(o.target),s=n?1:-1,a={commentid:e,actiontype:t("UFIConstants").UFIActionType.COMMENT_LIKE,viewerliked:n,likecount:(r.likecount||0)+s};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[a]}),t("UFIFeedbackTargets").getFeedbackTarget(r.ftentidentifier,function(s){var a={};a[t("ActorURI").PARAMETER_ACTOR]=s.actorforpost;var c=t("XUFICommentLikeController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(c,babelHelpers["extends"]({comment_id:e,legacy_id:r.legacyid,like_action:n,ft_ent_identifier:r.ftentidentifier,source:o.source,client_id:t("ClientIDs").getNewClientID(),session_id:t("ChannelClientID").getID()},i,a))})}},_getAttachment:function(e){return e},_getLocalComment:function(e,n,o,r,i,s){var c=t("ClientIDs").getNewClientID(),u=t("UnicodeBidi").isDirectionLTR(o)?"ltr":"rtl",p=this._getAttachment(i.attachedsticker);return{ftentidentifier:n,body:{text:o,dir:u},author:e.actorforpost,id:c,islocal:!0,ufiinstanceid:i.ufiinstanceid,likecount:0,hasviewerliked:!1,parentcommentid:i.replyid,replycommentparentid:i.replycommentparentid,attachment:p,photo_comment:i.attachedphoto,video_comment:i.attachedvideo,timestamp:{time:Math.floor(Date.now()/1e3),text:a._("A few seconds ago")},photoTextTagID:i.photoTextTagID,isPhotoTag:i.isPhotoTag,photoTagX:i.photoTagX,photoTagY:i.photoTagY,videoTimeOffset:s,postedLiveState:i.islivestreaming?t("CommentPostedLiveState").LIVE:t("CommentPostedLiveState").ON_DEMAND}},addComment:function(e,n,o,r){t("UFIFeedbackTargets").getFeedbackTarget(e,function(i){var s=this.createComment(e,n,o,r);if(s){t("NYE2017TextHandler").playCommentAnimationIfMatchesAndAllowed(n);var a={actiontype:t("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:i.actorforpost,hasviewersubscribed:!0,entidentifier:i.entidentifier},c={actiontype:t("UFIConstants").UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:i.targetfbid};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[s],actions:[a,c]})}}.bind(this))},createComment:function(e,n,o,r){var i=t("UFIFeedbackTargets").getFeedbackTargetIfExists(e);if(!i.actorforpost)return null;var s=null;if(r.isBroadcasterUFI)s=t("ifRequired")("LiveVideoBroadcastBroadcastStore",function(e){return e.getCurrentBroadcastTime()});else if(r.fluentContentToken&&(r.isLiveVOD||r.islivestreaming||r.enableVODCommentTimestamps)){var a=t("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTimeForElement(r.target,r.fluentContentToken);if(r.isLiveVOD||r.islivestreaming)s=a;else{var c=t("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerForElement(r.target,r.fluentContentToken);null!=c&&a>0&&a<Math.floor(c.getPlaybackDuration())&&(s=a)}}var u=this._getLocalComment(i,e,n,o,r,s);return this._sendCommentToServer(e,i.actorforpost,n,o,r,u.id,s),u},_sendCommentToServer:function(e,n,o,r,i,s,a){var c=null;i.reply_fbid?c=i.reply_fbid:i.replyid&&(c=t("UFIComments").getComment(i.replyid).fbid);var u;t("UFIConfig").logCommentPost&&t("UFICommentLogger").logNewCommentPost(s,i.timestamp,{has_photo:!!i.attachedphoto,has_video:!!i.attachedvideo,has_sticker:!!i.attachedsticker,is_reply:!!i.replyid});var p={};p[t("ActorURI").PARAMETER_ACTOR]=n;var l=t("XUFIAddCommentController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(l,babelHelpers["extends"]({ft_ent_identifier:e,comment_text:r,source:i.source,client_id:s,session_id:t("ChannelClientID").getID(),reply_fbid:c,parent_comment_id:i.parent_comment_id||i.replyid,reply_comment_parent_id:i.replycommentparentid,rootid:i.rootid,clp:u,attached_sticker_fbid:i.attachedsticker?i.attachedsticker.fbid:0,attached_photo_fbid:i.attachedphoto?i.attachedphoto.fbid:0,attached_video_fbid:i.attachedvideo?i.attachedvideo.fbid:0,attached_share_url:i.attachedshareurl,feedback_referrer:i.feedbackReferrer,feed_context:i.feedcontext,video_time_offset:a,is_live_streaming:i.islivestreaming,is_markdown:i.isMarkdown},t("UFIUserActionUtils").trackingData(i.target),p,{photo_text_tag_id:i.photoTextTagID,is_private:i.isPrivate,is_photo_tag:i.isPhotoTag,photo_fbid:i.photoFBID,photo_tag_x:i.photoTagX,photo_tag_y:i.photoTagY}))},_hasCommentTextChanged:function(e,t){return e.body&&e.body.text!=t},_hasCommentPhotoChanged:function(e,t){return(e||t)&&!(e&&t)||e&&t&&e.fbid!=t.fbid},_hasCommentVideoChanged:function(e,t){return(e||t)&&!(e&&t)||e&&t&&e.fbid!=t.fbid},_hasCommentStickerChanged:function(e,t){return(e||t)&&!(e&&t)||e&&"sticker"==e.type&&t&&e.fbid!=t.fbid},editComment:function(e,n,o,r){var i=t("UFIUserActionUtils").trackingData(r.target),s=t("UFIComments").getComment(e),c=this._hasCommentTextChanged(s,n)||this._hasCommentPhotoChanged(s.photo_comment,r.attachedPhoto)||this._hasCommentStickerChanged(s.attachment,r.attachedSticker)||this._hasCommentVideoChanged(s.video_comment,r.attachedVideo);s=t("ImmutableObject").set(s,{status:t("UFIConstants").UFIStatus.PENDING_EDIT,body:{text:n},editnux:null,attachment:r.attachedSticker,photo_comment:r.attachedPhoto,video_comment:r.attachedVideo}),c&&(s=t("ImmutableObject").set(s,{originalTimestamp:s.timestamp.time,timestamp:{time:Math.floor(Date.now()/1e3),text:a._("A few seconds ago")}})),t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{comments:[s]}),t("UFIFeedbackTargets").getFeedbackTarget(s.ftentidentifier,function(e){var n={};n[t("ActorURI").PARAMETER_ACTOR]=e.actorforpost;var a=t("XUFIEditCommentController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(a,babelHelpers["extends"]({ft_ent_identifier:s.ftentidentifier,comment_text:o,source:r.source,comment_id:s.id,parent_comment_id:s.parentcommentid,attached_sticker_fbid:r.attachedSticker?r.attachedSticker.fbid:0,attached_photo_fbid:r.attachedPhoto?r.attachedPhoto.fbid:0,attached_video_fbid:r.attachedVideo?r.attachedVideo.fbid:0},i,n))})},translateComments:function(e,n,o,r){var i=t("XUFITranslateCommentController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(i,{ft_ent_identifier:e,comment_ids:n,source:r.source,trigger:o})},setHideAsSpam:function(e,n,o){var r=t("UFIUserActionUtils").trackingData(o.target),i=t("UFIComments").getComment(e),s={commentid:e,actiontype:t("UFIConstants").UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:n};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[s]}),t("UFIFeedbackTargets").getFeedbackTarget(i.ftentidentifier,function(s){var a={};a[t("ActorURI").PARAMETER_ACTOR]=s.actorforpost;var c=t("XUFIHideCommentController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(c,babelHelpers["extends"]({comment_id:e,spam_action:n,ft_ent_identifier:i.ftentidentifier,source:o.source},r,a))})},removeComment:function(e,n){var o=t("UFIUserActionUtils").trackingData(n.target),r=t("UFIComments").getComment(e),i={actiontype:t("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:e,islocal:!0,oneclick:n.oneclick};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[i]}),t("UFIFeedbackTargets").getFeedbackTarget(r.ftentidentifier,function(e){var i={};i[t("ActorURI").PARAMETER_ACTOR]=e.actorforpost;var s=t("XUFIDeleteCommentController").getURIBuilder().getURI();t("MercuryServerDispatcher").trySend(s,babelHelpers["extends"]({comment_id:r.id,comment_legacyid:r.legacyid,ft_ent_identifier:r.ftentidentifier,one_click:n.oneclick,source:n.source,client_id:t("ClientIDs").getNewClientID()},o,i))})},changeAcceptedAnswer:function(e,n){t("MercuryServerDispatcher").trySend(D,{ft_ent_identifier:e.id,do_accept:n})},banUser:function(e,n,o,r){var i=o?E.BAN:E.UNDO_BAN;t("MercuryServerDispatcher").trySend("/ajax/ufi/ban_user.php",{page_id:n,commenter_id:e.author,action:i,comment_id:e.id,client_side:!0})},changeSubscribe:function(e,n,o){t("UFIFeedbackTargets").getFeedbackTarget(e,function(r){var i=t("UFIUserActionUtils").trackingData(o.target);if(r.hasviewersubscribed!==n){var s={actiontype:t("UFIConstants").UFIActionType.SUBSCRIBE_ACTION,actorid:r.actorforpost,hasviewersubscribed:n,entidentifier:e};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[s]});var a={};a[t("ActorURI").PARAMETER_ACTOR]=r.actorforpost,t("MercuryServerDispatcher").trySend("/ajax/ufi/subscribe.php",babelHelpers["extends"]({subscribe_action:n,ft_ent_identifier:e,source:o.source,client_id:t("ClientIDs").getNewClientID(),rootid:o.rootid,comment_expand_mode:o.commentexpandmode},i,a))}})},fetchSpamComments:function(e,n,o,r){t("MercuryServerDispatcher").trySend("/ajax/ufi/id_comment_fetch.php",{ft_ent_identifier:e,viewas:r,comment_ids:n,parent_comment_id:o,source:null})},hideConstituentTitle:function(e){var n=t("XConstituencyTitleEnableController").getURIBuilder().getURI();new(t("AsyncRequest"))(n).setMethod("POST").setData({ft_id:e.ftentidentifier,enable:!1,source:"comment_edit_menu",comment_id:e.id}).send()},showConstituentTitle:function(e){var n=t("XConstituencyTitleEditVisibilityDialogController").getURIBuilder().setFBID("ft_id",e.ftentidentifier).setEnum("action_type","comment_show_constituent_title").setEnum("source","comment_edit_menu").setString("comment_id",e.id).getURI();new(t("AsyncRequest"))(n).send()},removePreview:function(e,n){var o=t("UFIUserActionUtils").trackingData(n.target),r={commentid:e.id,actiontype:t("UFIConstants").UFIActionType.REMOVE_PREVIEW};t("UFICentralUpdates").handleUpdate(t("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[r]}),t("MercuryServerDispatcher").trySend("/ajax/ufi/remove_preview.php",babelHelpers["extends"]({comment_id:e.id,ft_ent_identifier:e.ftentidentifier,source:n.source},o))}},T={"/ajax/ufi/ban_user.php":{mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:c},"/ajax/ufi/subscribe.php":{mode:t("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:_,batch_if:h,batch_function:C},"/ajax/ufi/id_comment_fetch.php":{mode:t("MercuryServerDispatcher").IMMEDIATE},"/ajax/ufi/remove_preview.php":{mode:t("MercuryServerDispatcher").IMMEDIATE},"/profile/broadcast_request/async/add_composer_token/":{mode:t("MercuryServerDispatcher").IMMEDIATE}},y=t("XUFIAddCommentController").getURIBuilder().getURI();T[y]={mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:u};var A=t("XUFIDeleteCommentController").getURIBuilder().getURI();T[A]={mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:l};var U=t("XUFICommentLikeController").getURIBuilder().getURI();T[U]={mode:t("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:d,batch_if:I,batch_function:C};var D=t("XUFICommentAcceptAnswerController").getURIBuilder().getURI();T[D]={mode:t("MercuryServerDispatcher").IMMEDIATE};var R=t("XUFIHideCommentController").getURIBuilder().getURI();T[R]={mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:l};var S=t("XUFILikeController").getURIBuilder().getURI();T[S]={mode:t("MercuryServerDispatcher").BATCH_CONDITIONAL,error_handler:m,batch_if:f,batch_function:C};var F=t("XUFIEditCommentController").getURIBuilder().getURI();T[F]={mode:t("MercuryServerDispatcher").IMMEDIATE,error_handler:u};var v=t("XUFITranslateCommentController").getURIBuilder().getURI();T[v]={mode:t("MercuryServerDispatcher").IMMEDIATE};var b=t("XUFIActorChangeController").getURIBuilder().getURI();T[b]={mode:t("MercuryServerDispatcher").IMMEDIATE},t("MercuryServerDispatcher").registerEndpoints(T),r.exports=babelHelpers["extends"]({},g,t("UFIReactionUserActions"))},null),__d("UFISpamStore",["FluxReduceStore","UFIDispatcherBase","UFIStoryActionType","UFIUserActions"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("FluxReduceStore")),c=a&&a.prototype,s.prototype.getInitialState=function(){return{}},s.prototype.areEqual=function(e,t){return Object.keys(e).length===Object.keys(t).length},s.prototype.reduce=function(e,n){switch(n.type){case t("UFIStoryActionType").SPAM_FETCHED:e=babelHelpers["extends"]({},e),n.commentIDs.forEach(function(t){return e[t]=!0}),t("UFIUserActions").fetchSpamComments(n.ftentidentifier,n.commentIDs,n.parentCommentID,n.viewas)}return e},r.exports=new s(t("UFIDispatcherBase"))},null),__d("UFIDispatcher",["ReactDispatcher_DEPRECATED","UFISharedDispatcher"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("ReactDispatcher_DEPRECATED")),c=a&&a.prototype,s.prototype.dispatch=function(e){c.dispatch.call(this,e),t("UFISharedDispatcher").dispatch(e)},r.exports=s},null),__d("UFIInstanceAction",["UFIInstanceActionType"],function(e,t,n,o,r,i){"use strict";var s={changeOrderingMode:function(e,n){return{type:t("UFIInstanceActionType").CHANGE_ORDER_MODE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,mode:n}},toggleComments:function(e){return{type:t("UFIInstanceActionType").TOGGLE_COMMENTS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},changeCommentListVisibility:function(e,n){return{type:t("UFIInstanceActionType").CHANGE_VISIBILITY,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,visibility:n}},init:function(e,n){return{type:t("UFIInstanceActionType").INIT,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,payload:n}},didRequestVODComments:function(e){return{type:t("UFIInstanceActionType").REQUESTED_VOD_COMMENTS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},didReceiveVODComments:function(e){return{type:t("UFIInstanceActionType").RECEIVED_VOD_COMMENTS,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},remove:function(e){return{type:t("UFIInstanceActionType").REMOVE,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}},toggleCommercialBreak:function(e,n){return{type:t("UFIInstanceActionType").TOGGLE_COMMERCIAL_BREAK,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier,inCommercial:n}},translateAll:function(e){return{type:t("UFIInstanceActionType").TRANSLATE_ALL,instanceID:e.instanceid,ftentidentifier:e.ftentidentifier}}};r.exports=s},null),__d("UFIDispatcherContext.react",["React","UFIDispatcher"],function(e,t,n,o,r,i){"use strict";function s(){a.apply(this,arguments)}var a,c,u=t("React").PropTypes;a=babelHelpers.inherits(s,t("React").Component),c=a&&a.prototype,s.prototype.getChildContext=function(){return{dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}},s.prototype.render=function(){return this.props.children},s.propTypes={dispatcher:u.instanceOf(t("UFIDispatcher")).isRequired,stores:u.object.isRequired},s.childContextTypes={dispatch:u.func,stores:u.object},r.exports=s},null),__d("XUIEditButton.react",["cx","fbt","XUIAbstractGlyphButton.react","React","joinClasses"],function(e,t,n,o,r,i,s,a){function c(){"use strict";u.apply(this,arguments)}var u,p;u=babelHelpers.inherits(c,t("React").Component),p=u&&u.prototype,c.prototype.render=function(){"use strict";var e=this.props.label,n=this.props.title;return this.props.title||this.props.tooltip||(e||(e=a._("Edit")),n=e),t("React").createElement(t("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{label:e,title:n,"data-hover":this.props.tooltip&&"tooltip","data-tooltip-alignh":this.props.tooltip&&"center","data-tooltip-content":this.props.tooltip,className:t("joinClasses")(this.props.className,"_5upq _5upr")}))},r.exports=c},null),__d("ComposerStickyEntriesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],function(e,t,n,o,r,i){"use strict";function s(){this.clear()}s.prototype.log=function(){t("GeneratedLoggerUtils").log("logger:ComposerStickyEntriesLoggerConfig",this.$ComposerStickyEntriesTypedLogger1,t("Banzai").BASIC)},s.prototype.logVital=function(){t("GeneratedLoggerUtils").log("logger:ComposerStickyEntriesLoggerConfig",this.$ComposerStickyEntriesTypedLogger1,t("Banzai").VITAL)},s.prototype.clear=function(){return this.$ComposerStickyEntriesTypedLogger1={},this},s.prototype.updateData=function(e){return this.$ComposerStickyEntriesTypedLogger1=babelHelpers["extends"]({},this.$ComposerStickyEntriesTypedLogger1,e),this},s.prototype.setEventType=function(e){return this.$ComposerStickyEntriesTypedLogger1.event_type=e,this},s.prototype.setStickyType=function(e){return this.$ComposerStickyEntriesTypedLogger1.sticky_type=e,this},s.prototype.setVC=function(e){return this.$ComposerStickyEntriesTypedLogger1.vc=e,this};r.exports=s},null),__d("linkifyEntityRange",["Link.react","React"],function(e,t,n,o,r,i){function s(e,n){var o=(n.entity||{}).url;return o?t("React").createElement(t("Link.react"),{href:o,target:"_blank"},e):t("React").createElement("span",null,e)}r.exports=s},null),__d("ReactComposerAttachmentActionType",["keyMirrorRecursive"],function(e,t,n,o,r,i){r.exports=t("keyMirrorRecursive")({REGISTER_ATTACHMENT:null,INITIALIZE_ATTACHMENT:null,SELECT_ATTACHMENT:null,SET_INITIALIZED:null,SET_BOOTLOADED:null,SET_BOOTSTRAPPED:null,UPLOAD_ATTACHMENT:null},"ReactComposerAttachmentActionType")},null),__d("ReactComposerMediaUploadActionType",["keyMirrorRecursive"],function(e,t,n,o,r,i){r.exports=t("keyMirrorRecursive")({PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_IS_SPHERICAL:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_RETRY:null,PHOTO_UPLOAD_EXTRA_DONE:null,PHOTOS_SELECT:null,PHOTO_ADD_UPLOAD:null,SPHERICAL_PHOTO_CHECK_DONE:null,SPHERICAL_PHOTO_CHECK_FAILED:null,VIDEO_UPLOAD_ENQUEUED:null,VIDEO_UPLOAD_UPLOADING:null,VIDEO_UPLOAD_DONE:null,VIDEO_UPLOAD_FAILED:null,VIDEO_UPLOAD_RETRY:null,VIDEO_SET_THUMBNAIL:null,VIDEO_SET_UPLOADER:null,MEDIA_UPLOAD_MOVED:null,MEDIA_UPLOAD_REMOVE:null,MEDIA_UPLOAD_PROGRESS:null,MEDIA_UPLOAD_INPUT_CLICKED:null,MEDIA_UPLOAD_INPUT_DONE:null,PREFILL_MEDIAS:null,REORDER_MEDIAS:null},"ReactComposerMediaUploadActionType")},null),__d("ReactComposerScrapedAttachmentActionType",["keyMirrorRecursive"],function(e,t,n,o,r,i){r.exports=t("keyMirrorRecursive")({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null,ATTACHMENT_CAROUSEL_UPLOAD:null,ATTACHMENT_SHARE_SELECTED:null},"ReactComposerScrapedAttachmentActionType")},null),__d("ReactComposerActionTypes",["keyMirrorRecursive"],function(e,t,n,o,r,i){r.exports=t("keyMirrorRecursive")({COMPOSER_ENTRY:null,COMPOSER_CANCEL:null,INIT_CONFIG:null,POST_ERROR:null,POST_STARTED:null,POST_INTENDED:null,POST_SUCCEEDED:null,POST_FINALLY:null,PUBLISH_STARTED:null,PUBLISH_SUCCEEDED:null,COMPOSER_RESET:null,EXPAND_SPROUTS:null,COLLAPSE_SPROUTS:null,FEATURE_INTENT:null,FEATURE_DONE:null,SCHEDULE:null},"ReactComposerActionTypes")},null),__d("ReactComposerLoggingQueue",["invariant","Bootloader","requireWeak"],function(e,t,n,o,r,i,s){var a=null;t("requireWeak")("ReactComposerLoggingStore",function(e){a=e});var c=[],u={add:function(e){e&&e.suppressWaterfallLogging||(e&&e.composerID||s(0),a&&a.isActivated(e.composerID)||c.push(e))},initBootload:function(e,n,o,r){t("Bootloader").loadModules(["ComposerXSessionIDs","ComposerXMarauderLogger","ReactComposerPerfLogger","ReactComposerLoggingStore"],function(t,i,s,a){t.resetSessionID(e),i.registerComposer(n,o,r),s.registerComposer(n,r.targetType,r.ref,o),a.activate(e)},"ReactComposerLoggingQueue")},pop:function(){return c.shift()},getLength:function(){return c.length}};r.exports=u},null),__d("ReactComposerDispatcher",["ReactComposerLoggingQueue","Dispatcher_DEPRECATED"],function(e,t,n,o,r,i){function s(){"use strict";a.apply(this,arguments)}var a,c;a=babelHelpers.inherits(s,t("Dispatcher_DEPRECATED")),c=a&&a.prototype,s.prototype.dispatch=function(e){"use strict";c.dispatch.call(this,e),t("ReactComposerLoggingQueue").add(e)},r.exports=new s},null),__d("ReactComposerStoreBase",["ReactComposerActionTypes","ReactComposerDispatcher","ReactComposerEvents","EventEmitter","Map"],function(e,t,n,o,r,i){function s(e,n){"use strict";c.constructor.call(this),this.$ReactComposerStoreBase1=e,this.$ReactComposerStoreBase2=new(t("Map")),this.$ReactComposerStoreBase3=t("ReactComposerDispatcher").register(function(e){
switch(e.type){case t("ReactComposerActionTypes").COMPOSER_RESET:this.__cleanup(e)}n(e)}.bind(this))}var a,c;a=babelHelpers.inherits(s,t("EventEmitter")),c=a&&a.prototype,s.prototype.getComposerData=function(e){"use strict";var t=this.$ReactComposerStoreBase2.get(e);return t||(t=this.$ReactComposerStoreBase1(),this.$ReactComposerStoreBase2.set(e,t)),t},s.prototype.clearComposerData=function(e){"use strict";this.$ReactComposerStoreBase2.set(e,this.$ReactComposerStoreBase1())},s.prototype.addChangeListener=function(e){"use strict";return this.addListener(t("ReactComposerEvents").CHANGE,e)},s.prototype.emitChange=function(e){"use strict";this.emit(t("ReactComposerEvents").CHANGE,{composerID:e})},s.prototype.getDispatchToken=function(){"use strict";return this.$ReactComposerStoreBase3},s.prototype.validateAction=function(e,t){"use strict";t=[].concat(t);var n=t.map(function(t){if(void 0===e[t])throw new Error("Action missing field: "+t);return e[t]});return 1===t.length?n[0]:n},s.prototype.__cleanup=function(e){"use strict";this.clearComposerData(e.composerID),this.emitChange(e.composerID)},r.exports=s},null),__d("ReactComposerActionStore",["errorCode","ReactComposerActionTypes","ReactComposerEvents","ReactComposerStoreBase","Arbiter","AsyncResponse","NYE2017TextHandler","Set","requireWeak"],function(e,t,n,o,r,i,s){function a(e,n){"use strict";e=e?e:function(){return null};var o;u.constructor.call(this,e,function(e){if(!o||!o.__shouldIgnoreAction(e))switch(e.type){case t("ReactComposerActionTypes").POST_STARTED:o&&o.$ReactComposerActionStore2(e);break;case t("ReactComposerActionTypes").POST_INTENDED:o&&o.$ReactComposerActionStore3(e);break;case t("ReactComposerActionTypes").POST_SUCCEEDED:o&&o.$ReactComposerActionStore4(e);break;case t("ReactComposerActionTypes").POST_ERROR:o&&o.$ReactComposerActionStore5(e);break;case t("ReactComposerActionTypes").POST_FINALLY:o&&o.$ReactComposerActionStore6(e)}n&&n(e)}),o=this,this.$ReactComposerActionStore1=new(t("Set"))}var c,u,p=void 0;t("requireWeak")("ReactComposerStatusStore",function(e){return p=e}),c=babelHelpers.inherits(a,t("ReactComposerStoreBase")),u=c&&c.prototype,a.prototype.registerComposerID=function(e){"use strict";this.$ReactComposerActionStore1.add(e)},a.prototype.$ReactComposerActionStore2=function(e){"use strict";var n=this.validateAction(e,"composerID");this.__onPostStarted&&this.__onPostStarted(e),t("Arbiter").inform(t("ReactComposerEvents").POST_STARTED+n)},a.prototype.$ReactComposerActionStore3=function(e){"use strict";this.validateAction(e,["composerID","actorID","config","targetID"]),this.__canPost&&!this.__canPost(e)||this.$ReactComposerActionStore2(e)},a.prototype.$ReactComposerActionStore4=function(e){"use strict";var n=this.validateAction(e,"composerID");if(p){var o=p.getMessage(n);t("NYE2017TextHandler").playPostAnimationIfMatchesAndAllowed(o)}this.__onPostSucceeded&&this.__onPostSucceeded(e),t("Arbiter").inform(t("ReactComposerEvents").POST_SUCCEEDED+n)},a.prototype.$ReactComposerActionStore5=function(e){"use strict";if(this.__onPostError)return this.__onPostError(e);if(e.response){var n=e.response.getError&&1455004==e.response.getError();if(n)return;t("AsyncResponse").defaultErrorHandler(e.response)}},a.prototype.$ReactComposerActionStore6=function(e){"use strict";this.__onPostFinally&&this.__onPostFinally(e)},a.prototype.__shouldIgnoreAction=function(e){"use strict";var t=this.validateAction(e,"composerID");return!this.$ReactComposerActionStore1.has(t)},r.exports=a},null),__d("ReactComposerFocusActionTypes",["keyMirror"],function(e,t,n,o,r,i){"use strict";r.exports=t("keyMirror")({SUBSCRIBE:null,UNSUBSCRIBE:null,FOCUS_ACQUIRED:null,FOCUS_LOST:null})},null),__d("ReactComposerInit",["invariant","Arbiter","ReactComposerEvents","ReactComposerIDGenerator","Map","React","ReactDOM"],function(e,t,n,o,r,i,s){var a={_isUnmounting:!1,instances:new(t("Map")),changeProps:function(e,t){var n=a._getCurrentInstance(e);n.props=t,a.resetComposer(e,!0)},normalizeComposerID:function(e){return e.contextConfig.composerID||(e.contextConfig.composerID=t("ReactComposerIDGenerator").getID()),e.contextConfig.composerID},init:function(e,n,o,r){var i=a.normalizeComposerID(n),s={ComposerModule:e,props:n,container:o,asyncPreloader:r,hidden:!1};this._render(s),this._preloadAsyncData(s),a.instances.set(i,s),t("Arbiter").inform(t("ReactComposerEvents").INSTANCE_MOUNTED+i)},_render:function(e){var n=e.ComposerModule,o=e.props,r=e.container;t("ReactDOM").render(t("React").createElement(n,o),r)},_preloadAsyncData:function(e){var t=e.props,n=e.asyncPreloader;null==n||t.config.audienceXHP||n.onLoaded(function(n){var o=n.audienceXHP;t.config=babelHelpers["extends"]({},t.config,{audienceXHP:t.config.audienceXHP||o}),this._render(e)}.bind(this))},_createNewComposer:function(e,n){e.props.contextConfig.composerID=t("ReactComposerIDGenerator").getID(),e.props.prefillConfig={},a.init(e.ComposerModule,e.props,n,e.asyncPreloader)},resetComposer:function(e){var n=a._getCurrentInstance(e);a.unmountInstance(e),n.hidden?n.container.parentNode&&n.container.parentNode.removeChild(n.container):a._createNewComposer(n,n.container),t("Arbiter").inform(t("ReactComposerEvents").COMPOSER_RESET+e,{newComposerID:n.props.contextConfig.composerID})},hideAndReplaceComposer:function(e){var n=a._getCurrentInstance(e),o=n.container.cloneNode(!1);n.container.style.display="none",n.container.removeAttribute("id"),n.container.parentNode&&n.container.parentNode.appendChild(o),n.hidden=!0,a._createNewComposer(n,o),t("Arbiter").inform(t("ReactComposerEvents").COMPOSER_RESET+e,{newComposerID:n.props.contextConfig.composerID})},isInstanceMounted:function(e){return!!a.instances.get(e)},unmountInstance:function(e){a.isInstanceMounted(e)&&!a._isUnmounting&&(a._isUnmounting=!0,a._unmountReact(e),a._isUnmounting=!1,a.instances["delete"](e))},_unmountReact:function(e){var n=a._getCurrentInstance(e);return t("ReactDOM").unmountComponentAtNode(n.container),t("Arbiter").inform(t("ReactComposerEvents").COMPOSER_UNMOUNT+e),n},_getCurrentInstance:function(e){var t=a.instances.get(e);return t||s(0),t}};r.exports=a},null),__d("ReactComposerSproutsDisplayState",["keyMirrorRecursive"],function(e,t,n,o,r,i){r.exports=t("keyMirrorRecursive")({INLINE:null,EXPANDED:null},"ReactComposerSproutsDisplayState")},null),__d("ReactComposerStore",["ReactComposerActionStore","ReactComposerActionTypes","ReactComposerSproutsDisplayState","ReactComposerAttachmentActionType","ReactComposerScrapedAttachmentActionType","ReactComposerInit","Bootloader"],function(e,t,n,o,r,i){function s(){"use strict";var e;c.constructor.call(this,function(){return{isActive:!1,serverErrorResponse:null,posting:!1,postSucceeded:!1,publishing:!1,ref:null,targetType:null,sproutsDisplayState:t("ReactComposerSproutsDisplayState").INLINE,scheduledPublishTime:null}},function(n){switch(n.type){case t("ReactComposerActionTypes").INIT_CONFIG:e&&e.$ReactComposerStore1(n);break;case t("ReactComposerActionTypes").PUBLISH_STARTED:e&&e.$ReactComposerStore2(n);break;case t("ReactComposerAttachmentActionType").SELECT_ATTACHMENT:e&&e.$ReactComposerStore3(n);break;case t("ReactComposerActionTypes").EXPAND_SPROUTS:e&&e.$ReactComposerStore4(n);break;case t("ReactComposerActionTypes").COLLAPSE_SPROUTS:e&&e.$ReactComposerStore5(n);break;case t("ReactComposerAttachmentActionType").UPLOAD_ATTACHMENT:case t("ReactComposerScrapedAttachmentActionType").ATTACHMENT_SCRAPED:e&&e.$ReactComposerStore6(n);break;case t("ReactComposerActionTypes").SCHEDULE:e&&e.$ReactComposerStore7(n)}}),e=this}var a,c;a=babelHelpers.inherits(s,t("ReactComposerActionStore")),c=a&&a.prototype,s.prototype.$ReactComposerStore7=function(e){"use strict";var t=this.getComposerData(e.composerID);t.scheduledPublishTime=e.scheduleDate},s.prototype.getScheduledPublishTime=function(e){"use strict";return this.getComposerData(e).scheduledPublishTime},s.prototype.getServerErrorResponse=function(e){"use strict";return this.getComposerData(e).serverErrorResponse},s.prototype.getRef=function(e){"use strict";return this.getComposerData(e).ref},s.prototype.getTargetType=function(e){"use strict";return this.getComposerData(e).targetType},s.prototype.isPosting=function(e){"use strict";return this.getComposerData(e).posting},s.prototype.hasPostSucceeded=function(e){"use strict";return this.getComposerData(e).postSucceeded},s.prototype.isActive=function(e){"use strict";return this.getComposerData(e).isActive},s.prototype.isPublishing=function(e){"use strict";return this.getComposerData(e).publishing},s.prototype.getSproutsDisplayState=function(e){"use strict";return this.getComposerData(e).sproutsDisplayState},s.prototype.isUploading=function(e){"use strict";return this.getComposerData(e).uploading},s.prototype.__shouldIgnoreAction=function(e){"use strict";return!1},s.prototype.__onPostStarted=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.posting=!0,this.emitChange(t)},s.prototype.__onPostSucceeded=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.serverErrorResponse=null,n.posting=!1,n.postSucceeded=!0,n.publishing=!1,this.emitChange(t)},s.prototype.__onPostError=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.serverErrorResponse=e.response,n.posting=!1,n.postSucceeded=!1,n.publishing=!1,this.emitChange(t)},s.prototype.__onPostFinally=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.posting=!1,n.publishing=!1,this.emitChange(t)},s.prototype.$ReactComposerStore1=function(e){"use strict";var t=this.validateAction(e,["composerID","loggingConfig","activateOnInit"]),n=t[0],o=t[1],r=t[2],i=this.getComposerData(n);i.ref=o.ref,i.composerVersion=o.composerVersion,i.targetType=o.targetType,r&&(this.$ReactComposerStore8(n),this.emitChange(n))},s.prototype.$ReactComposerStore2=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.publishing=!0,this.emitChange(t)},s.prototype.$ReactComposerStore6=function(e){"use strict";var t=this.validateAction(e,"composerID"),n=this.getComposerData(e.composerID);n.uploading=e.uploading,this.emitChange(t)},s.prototype.$ReactComposerStore3=function(e){"use strict";var n=this.validateAction(e,"composerID"),o=this.getComposerData(n);o.sproutsDisplayState=t("ReactComposerSproutsDisplayState").EXPANDED,this.$ReactComposerStore8(n),this.emitChange(n)},s.prototype.$ReactComposerStore4=function(e){"use strict";var n=this.validateAction(e,"composerID"),o=this.getComposerData(n);o.sproutsDisplayState=t("ReactComposerSproutsDisplayState").EXPANDED,this.emitChange(n)},s.prototype.$ReactComposerStore5=function(e){"use strict";var n=this.validateAction(e,"composerID"),o=this.getComposerData(n);o.sproutsDisplayState=t("ReactComposerSproutsDisplayState").INLINE,this.emitChange(n)},s.prototype.$ReactComposerStore8=function(e){"use strict";var n=this.getComposerData(e);n.isActive||(n.isActive=!0,t("Bootloader").loadModules(["curry","Run","ReactComposerHandleUnsavedChanges","URI"],function(t,n,o,r){return n.onBeforeUnload(t(o.handler,e,r.getNextURI()))},"ReactComposerStore"))},s.prototype.__cleanup=function(e){"use strict";setTimeout(t("ReactComposerInit").resetComposer.bind(null,e.composerID),0)},r.exports=new s},null),__d("ReactComposerFocusActions",["ReactComposerFocusActionTypes","ReactComposerDispatcher","ReactComposerStore"],function(e,t,n,o,r,i){"use strict";t("ReactComposerStore");var s={subscribe:function(e,n,o){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerFocusActionTypes").SUBSCRIBE,onFocusAcquiredCallback:n,onFocusLostCallback:o})},unsubscribe:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerFocusActionTypes").UNSUBSCRIBE})},notifyFocusAcquired:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerFocusActionTypes").FOCUS_ACQUIRED})},notifyFocusLost:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerFocusActionTypes").FOCUS_LOST})}};r.exports=s},null),__d("ReactComposerLoggingActions",["ReactComposerActionTypes","ReactComposerDispatcher","ReactComposerFeatureType","ReactComposerLoggingName","ReactComposerMediaUploadActionType"],function(e,t,n,o,r,i){var s={composerEntry:function(e,n){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").COMPOSER_ENTRY,uiElementName:n})},mediaUploadInputClicked:function(e,n){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerMediaUploadActionType").MEDIA_UPLOAD_INPUT_CLICKED,sourceLoggingName:n})},mediaUploadInputDone:function(e,n){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerMediaUploadActionType").MEDIA_UPLOAD_INPUT_DONE,sourceLoggingName:n})},mediaFileDropped:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").FEATURE_INTENT,featureType:t("ReactComposerFeatureType").MEDIA,uiElementName:t("ReactComposerLoggingName").MEDIA_FILE_DROPPED})},mediaFileDropFinished:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").FEATURE_DONE,featureType:t("ReactComposerFeatureType").MEDIA,uiElementName:t("ReactComposerLoggingName").MEDIA_FILE_DROPPED})},mediaFilePasted:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").FEATURE_INTENT,featureType:t("ReactComposerFeatureType").MEDIA,uiElementName:t("ReactComposerLoggingName").MEDIA_FILE_PASTED})},mediaFilePasteFinished:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").FEATURE_DONE,featureType:t("ReactComposerFeatureType").MEDIA,uiElementName:t("ReactComposerLoggingName").MEDIA_FILE_PASTED})},composerCancel:function(e){t("ReactComposerDispatcher").dispatch({composerID:e,type:t("ReactComposerActionTypes").COMPOSER_CANCEL})}};r.exports=s},null),__d("ReactComposerFocusHandleScrollAway",["Event","getActiveElement","throttle"],function(e,t,n,o,r,i){"use strict";var s=-400,a=300,c={handler:function(e,n){var o=t("Event").listen(window,"scroll",t("throttle")(function(){var r=e.getBoundingClientRect().bottom;r<s&&(n(),t("getActiveElement")().blur(),o.remove())},a))}};r.exports=c},null),__d("ReactComposerFocusInit",["invariant","csx","DOM","DOMContainer.react","React","ReactDOM","Parent"],function(e,t,n,o,r,i,s,a){"use strict";var c={handler:function(e,n,o,r,i,a){var c=t("DOM").create("div"),u=e.parentNode;if(a){var p=t("Parent").bySelector(e,"._3u13");null!==p&&(u=p.parentNode.parentNode)}t("ReactDOM").render(t("React").createElement(i,{composerID:n,actorID:o,gks:r,enableFocusBehavior:!0},t("React").createElement(t("DOMContainer.react"),{display:"block"},e)),c),u||s(0),u.firstChild?u.replaceChild(c,u.firstChild):u.appendChild(c)},preload:function(){}};r.exports=c},null),__d("ReactComposerFocusWrapperCore.react",["ix","cssVar","csx","cx","ReactComposerEvents","Arbiter","ComposerStickyEntriesTypedLogger","CurrentUser","DOM","Event","Image.react","Keys","Link.react","ReactComponentWithPureRenderMixin","React","ReactDOM","ReactComposerFocusActions","Run","SubscriptionsHandler","URI","ifRequired","fbglyph"],function(e,t,n,o,r,i,s,a,c,u){var p=t("React").PropTypes,l=parseInt("10px",10),d=t("React").createClass({displayName:"ReactComposerFocusWrapperCore",_composerID:"",_fixedHeight:0,_subscriptions:t("SubscriptionsHandler"),_firstFocus:!0,_onLeaveHandle:null,_stickycomposer:null,mixins:[t("ReactComponentWithPureRenderMixin")],propTypes:{composerID:p.string.isRequired,ariaLabel:p.string,onDismiss:p.func.isRequired,onFocus:p.func.isRequired,focused:p.bool.isRequired,gks:p.object,onFirstFocus:p.func,fixHeight:p.bool},getDefaultProps:function(){return{focused:!1,fixHeight:!1}},componentWillMount:function(){this._composerID=this.props.composerID},componentWillReceiveProps:function(e){if(this.props.fixHeight&&!this.props.focused&&e.focused){var n=t("ReactDOM").findDOMNode(this.refs.container);this._fixedHeight=n.offsetHeight+l}},componentDidMount:function(){this._subscriptions=new(t("SubscriptionsHandler")),this._subscribeComposerEvents(),this._onLeaveHandle=t("Run").onLeave(this._onDismiss),t("ifRequired")("ReactComposerSticky",function(e){this.props.gks&&this.props.gks.hasStickyComposer&&(this._stickycomposer=new e(this.props.gks&&this.props.gks.hasScrollawaySticky,t("ReactDOM").findDOMNode(this.refs.container)))}.bind(this))},componentDidUpdate:function(e){if(!e.focused&&this.props.focused)try{var n=document.createEvent("HTMLEvents");n.initEvent&&(n.initEvent("resize",!0,!1),window.dispatchEvent(new(t("Event"))("resize")))}catch(n){}},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this._onDismiss(),this._onLeaveHandle&&this._onLeaveHandle.remove(),this._stickycomposer&&this._stickycomposer.destroy()},render:function(){var e=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,n=this.props.focused?this._renderDismissButton():null,o=this.props.focused?this._renderBugNub():null;return t("React").createElement("div",{role:"dialog","aria-label":this.props.ariaLabel,className:"_3u13 _3e9r"+(this.props.focused?" _3u14":"")+(this.props.focused?" _1b3n":""),style:e,onKeyDown:this._onKeyDown},t("React").createElement("div",{className:"_3u15",onClick:this._onDismiss,role:"presentation"}),t("React").createElement("div",{className:"_3u16",ref:"container",onFocus:this._onFocus},this.props.children,n),o)},getComposerID:function(){return this._composerID},getComposer:function(){return this.refs.container},_renderDismissButton:function(){return t("React").createElement("div",{className:"_3u17"+(this.props.gks&&this.props.gks.topPostButton?" _nse":"")+(this.props.gks&&this.props.gks.hasHeader?" _356d":"")+(this.props.gks&&this.props.gks.albumTab?" _3_fz":""),onClick:this._onDismiss,role:"button",tabIndex:"0"},t("React").createElement(t("Image.react"),{src:s("images/assets_DO_NOT_HARDCODE/fb_glyphs/cross_20_fig-light-20.png")}))},_renderBugNub:function(){if(!t("CurrentUser").isEmployee())return null;var e=new(t("URI"))("/ajax/bugs/report");return t("React").createElement("div",{className:"_t95"},t("React").createElement(t("Link.react"),{href:"#",ajaxify:e,className:"_t97",rel:"dialog"}))},_subscribeComposerEvents:function(){var e=t("Arbiter").subscribe(t("ReactComposerEvents").OPTIMISTIC_POSTING_STARTED+this._composerID,function(){this.props.onDismiss(!0),this._stickycomposer&&this._stickycomposer.setFocused(!1)}.bind(this)),n=t("Arbiter").subscribe(t("ReactComposerEvents").POST_SUCCEEDED+this._composerID,function(){this.props.onDismiss(!0),this._stickycomposer&&this._stickycomposer.setFocused(!1)}.bind(this)),o=t("Arbiter").subscribe("ReactFeedComposerXBootloader/focuscomposer/"+this._composerID,function(){return this._onFocus()}.bind(this)),r=t("Arbiter").subscribe(t("ReactComposerEvents").COMPOSER_RESET+this._composerID,function(e,n){n&&n.newComposerID&&(this._composerID=n.newComposerID,this._subscriptions.release(),this._subscriptions=new(t("SubscriptionsHandler")),this._subscribeComposerEvents())}.bind(this));this._subscriptions.addSubscriptions(e,n,o,r)},_onFocus:function(){if(!this.props.focused){if(this.props.gks&&this.props.gks.hasStickyComposer){var e=t("DOM").scry(this.refs.container,"._1a1e");e.length>0&&(new(t("ComposerStickyEntriesTypedLogger"))).setEventType("entry").setStickyType(this.props.gks&&this.props.gks.hasScrollawaySticky?"scrollaway":"always").log()}this._firstFocus&&(this.props.onFirstFocus&&this.props.onFirstFocus(),this._firstFocus=!1),this.props.onFocus(),t("ReactComposerFocusActions").notifyFocusAcquired(this.props.composerID),this._stickycomposer&&this._stickycomposer.setFocused(!0)}},_onKeyDown:function(e){e.keyCode!==t("Keys").ESC||e.nativeEvent.isPropagationStopped||this._onDismiss()},_onDismiss:function(){this.props.onDismiss(),t("ReactComposerFocusActions").notifyFocusLost(this.props.composerID),this._stickycomposer&&this._stickycomposer.setFocused(!1)}});r.exports=d},null),__d("ReactComposerFocusInline.react",["ReactComposerFocusHandleScrollAway","ReactComposerFocusWrapperCore.react","React","ReactDOM"],function(e,t,n,o,r,i){function s(){for(var e,n,o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=(e=c.constructor).call.apply(e,[this].concat(r)),this.state={focused:!1},this.$ReactComposerFocusInline2=function(){var e=t("ReactDOM").findDOMNode(this.refs.focus.getComposer());t("ReactComposerFocusHandleScrollAway").handler(e,this.$ReactComposerFocusInline1),this.setState({focused:!0})}.bind(this),this.$ReactComposerFocusInline1=function(){this.setState({focused:!1})}.bind(this),n}var a,c,u=t("React").PropTypes;a=babelHelpers.inherits(s,t("React").PureComponent),c=a&&a.prototype,s.prototype.componentWillUnmount=function(){"use strict";this.$ReactComposerFocusInline1()},s.prototype.render=function(){"use strict";return t("React").createElement(t("ReactComposerFocusWrapperCore.react"),{composerID:this.props.composerID,focused:this.state.focused&&this.props.enableFocusBehavior,onFocus:this.$ReactComposerFocusInline2,onDismiss:this.$ReactComposerFocusInline1,ref:"focus"},this.props.children)},s.propTypes={composerID:u.string.isRequired},r.exports=s},null),__d("UFIReactionIconImpl.react",["cx","Image.react","React","UFIConfig","UFIReactionTypes","joinClasses"],function(e,t,n,o,r,i,s){function a(){"use strict";c.apply(this,arguments)}var c,u,p=t("React").PropTypes;c=babelHelpers.inherits(a,t("React").Component),u=c&&c.prototype,a.prototype.shouldComponentUpdate=function(e,t){"use strict";return e.className!==this.props.className||e.reaction!==this.props.reaction||e.size!==this.props.size||e.grayscale!==this.props.grayscale},a.prototype.renderImage=function(){"use strict";var e=t("UFIReactionTypes").reactions[this.props.reaction].name,n="/images/ufi/reactions/v6/svg/"+e+".svg";return this.props.hasStaticSVGDock?t("React").createElement(t("Image.react"),{style:{position:"absolute"},src:n}):t("React").createElement("i",{className:t("joinClasses")(t("UFIReactionTypes").reactions[this.props.reaction].class_name,"_2p78"+("13"===this.props.size?" _9-y":"")+("16"===this.props.size?" _9--":"")+("48"===this.props.size?" _9-_":"")+("96"===this.props.size?" _9_0":"")+(this.props.grayscale?" _pxi":""))})},a.prototype.render=function(){"use strict";return t("React").createElement("span",{className:t("joinClasses")("_9zc"+("13"===this.props.size?" _2p79":"")+("16"===this.props.size?" _2p7a":"")+("48"===this.props.size?" _2p7b":"")+("96"===this.props.size?" _9-w":""),this.props.className,t("UFIConfig").showCustom?"_4xtk":"")},this.renderImage())},a.propTypes={className:p.string,grayscale:p.bool,isSVGDock:p.bool,reaction:p.number.isRequired,size:p.oneOf(["13","16","48","96"])},a.defaultProps={className:null,grayscale:!1,isSVGDock:!1,size:"16"},r.exports=a},null),__d("CommentPrelude",["BanzaiODS","CSS","ErrorUtils","Parent","clickRefAction","ex","ifRequired"],function(e,t,n,o,r,i){function s(e,n){if("ufi.react"!==e&&"ufi_mentions_input.react"!==e&&"ufi_controller"!==e&&"action_link_bling"!==e&&"action_link_timeline_bling"!==e){var o=new Error(t("ex")("Deprecated CommentPrelude action %s called from ref %s",n||"unknown",e||"unknown"));o.type="warn",t("ErrorUtils").reportError(o),t("BanzaiODS").bumpEntityKey("comment_prelude",e)}}function a(e,n,o){s(o,"click");var r=t("Parent").byTag(e,"form");if(r&&t("CSS").hasClass(r,"collapsible_comments"))return t("clickRefAction")("ufi",e,null,"FORCE"),c(e,n,o)}function c(e,n,o){s(o,"expand");var r=t("Parent").byTag(e,"form");if(r&&t("CSS").hasClass(r,"collapsible_comments")){if(u(r,o),n!==!1){var i=r.add_comment_text_text||r.add_comment_text,a=i.length;a&&(i=t("Parent").byClass(i[a-1],"UFIReplyList")?t("Parent").byClass(i[0],"UFIReplyList")?null:i[0]:i[a-1]),i&&(i.focus(),t("ifRequired")("FbFeedCommentUFIScroller",function(e){return e.reveal(i)}))}return!1}}function u(e,n){if(s(n,"uncollapse"),e&&t("CSS").hasClass(e,"collapsible_comments")){var o=t("CSS").removeClass.bind(null,e,"collapsed_comments");t("ifRequired")("ScrollAwareDOM",function(t){return t.monitor(e,o)},function(){return o()})}}function p(e){var n=e.getAttribute("data-comment-prelude-ref");s(n,"blingbox");var o=t("Parent").byTag(e,"form");o&&t("CSS").hasClass(o,"collapsible_comments")&&t("CSS").toggleClass(o,"collapsed_comments")}var l={click:a,expand:c,uncollapse:u,onBlingboxClick:p,logRef:s};r.exports=l},null),__d("VideoFeedFastPreloadController",["Run","DOMQuery"],function(e,t,n,o,r,i){var s=0,a={preload:function(n){s<2&&(n=t("DOMQuery").scry(n,"video")[0],n instanceof e.HTMLVideoElement&&(s||t("Run").onBeforeUnload(function(){return a.reset()}),n.preload="auto",s+=1))},reset:function(){s=0}};a.reset(),r.exports=a},null),__d("PriorityJobQueue",["Promise","Map"],function(e,t,n,o,r,i){"use strict";function s(e){this.$PriorityJobQueue2=new(t("Map")),this.$PriorityJobQueue3=new(t("Map")),this.$PriorityJobQueue4=!1,this.$PriorityJobQueue5=new(t("Map")),this.$PriorityJobQueue8=function(){var e=this.$PriorityJobQueue3.size,t=Date.now();if(e<this.$PriorityJobQueue1){var n=this.$PriorityJobQueue1-e,o=Array.from(this.$PriorityJobQueue2.values());o.sort(function(e,n){return n.job.getPriority(t-n.timeQueued)-e.job.getPriority(t-e.timeQueued)});for(var r=this.$PriorityJobQueue2.size,i=0;i<Math.min(r,n);i++)this.$PriorityJobQueue9(o[i])}this.$PriorityJobQueue4=!1}.bind(this),this.$PriorityJobQueue1=e||a}var a=1;s.prototype.$PriorityJobQueue6=function(e){this.$PriorityJobQueue3["delete"](e),this.$PriorityJobQueue7()},s.prototype.$PriorityJobQueue7=function(){this.$PriorityJobQueue4||(this.$PriorityJobQueue4=!0,t("Promise").resolve().then(this.$PriorityJobQueue8).done())},s.prototype.$PriorityJobQueue9=function(e){var t=e.job,n=t.getJobID();this.$PriorityJobQueue2["delete"](n),this.$PriorityJobQueue3.set(n,e),t.getPromise().then(function(){return this.$PriorityJobQueue6(n)}.bind(this))["catch"]();var o=this.$PriorityJobQueue5.get(n);o&&o(),this.$PriorityJobQueue5["delete"](n),t.start()},s.prototype.enqueue=function(e,t){var n={job:e,timeQueued:Date.now()},o=e.getJobID();return this.$PriorityJobQueue2.set(o,n),t&&this.$PriorityJobQueue5.set(o,t),this.$PriorityJobQueue7(),this},s.prototype.abort=function(e){this.$PriorityJobQueue2["delete"](e);var t=this.$PriorityJobQueue3.get(e);t&&(t.job.abort(),this.$PriorityJobQueue3["delete"](e),this.$PriorityJobQueue7())},s.get=function(){return s.$PriorityJobQueue10||(s.$PriorityJobQueue10=new s(a)),s.$PriorityJobQueue10},r.exports=s},null),__d("VideoPlayerShakaBandwidthEstimator",["CacheStorage","requireWeak","Run","VideoPlayerShakaExperiments"],function(e,t,n,o,r,i){function s(){"use strict";var e=new(t("CacheStorage"))("localstorage","_video_"),n=e.get("bandwidthEstimate");this.$VideoPlayerShakaBandwidthEstimator1={isMockObject:!0,getBandwidth:function(){return n},getFastMovingBandwidth:function(){return n}},a&&(this.$VideoPlayerShakaBandwidthEstimator1=new a(t("VideoPlayerShakaExperiments").cacheDelay,t("VideoPlayerShakaExperiments").cacheBandwidth,t("VideoPlayerShakaExperiments").useStoredBandwidthEstimate?n:void 0),this.$VideoPlayerShakaBandwidthEstimator1.isMockObject=!1),t("Run").onUnload(function(){e.set("bandwidthEstimate",this.$VideoPlayerShakaBandwidthEstimator1.getBandwidth())}.bind(this))}var a=void 0;t("requireWeak")("Shaka",function(e){a=e.util.EWMACacheBandwidthEstimator});var c=null,u=!1;s.prototype.getEstimator=function(){"use strict";return this.$VideoPlayerShakaBandwidthEstimator1},s.getInstance=function(){"use strict";return(null===c||c.getEstimator().isMockObject&&a)&&(c=new s),c},s.getEstimator=function(){"use strict";return s.getInstance().getEstimator()},s.isAutoplayBandwidthRestrained=function(e){"use strict";var n=s.getEstimator(),o=void 0;o=t("VideoPlayerShakaExperiments").blockAutoplayUseFastMovingAverage&&u?n.getFastMovingBandwidth():n.getBandwidth();var r=e?t("VideoPlayerShakaExperiments").liveBlockAutoplayBandwidthThreshold:t("VideoPlayerShakaExperiments").blockAutoplayBandwidthThreshold;return u=!(null===o||o>r)},r.exports=s},null),__d("VideoDashPrefetchCache",["Promise","regeneratorRuntime","Deferred","Map","PriorityJobQueue","Run","URI","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaExperiments","XHRRequest","getCrossOriginTransport"],function(e,t,n,o,r,i){function s(e,t){var n=new Error(e.errorMsg);return n.name=e.errorType,n.type="preload",n.url=t,n.status=e.errorCode,n}function a(e){var n=new(t("URI"))(e.url),o=n.getDomain();return o.endsWith("fbcdn.net")&&!o.startsWith("interncache")&&!o.endsWith("ak.fbcdn.net")}function c(e,t,n){return{response:e.slice(t.start+0,t.end+1),responseTime:n}}function u(e,n,o){"use strict";this.$UrlRequestJob1=e,this.$UrlRequestJob2=n,this.$UrlRequestJob5=o;var r=new(t("XHRRequest"))(this.$UrlRequestJob2).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(t("getCrossOriginTransport"));this.$UrlRequestJob3=new(t("Promise"))(function(e,t){r.setErrorHandler(function(e){t(s(e,this.$UrlRequestJob2))}.bind(this)),r.setResponseHandler(function(t){r.response=t,e(r)}),r.setAbortHandler(function(){t(this.$UrlRequestJob3,new Error("Request promise aborted"))}.bind(this))}.bind(this)),this.$UrlRequestJob4=r}function p(){"use strict";this.$VideoDashPrefetchCache1=new(t("Map")),this.$VideoDashPrefetchCache2=new(t("Map")),this.$VideoDashPrefetchCache3=[],this.$VideoDashPrefetchCache4=[],this.$VideoDashPrefetchCache5=0,this.$VideoDashPrefetchCache6=t("VideoPlayerShakaExperiments").maxPrefetchVideosNum,this.$VideoDashPrefetchCache7=t("VideoPlayerShakaExperiments").consolidateFragmentedPrefetchRequest}var l=null;u.prototype.getUrl=function(){"use strict";return this.$UrlRequestJob2},u.prototype.getPromise=function(){"use strict";return this.$UrlRequestJob3},u.prototype.start=function(){"use strict";this.$UrlRequestJob4.send()},u.prototype.abort=function(){"use strict";this.$UrlRequestJob4.abort()},u.prototype.getPriority=function(e){"use strict";return 1/Math.min(this.$UrlRequestJob5,1)/Math.min(e,1)},u.prototype.getJobID=function(){"use strict";return this.$UrlRequestJob1},p.prototype.$VideoDashPrefetchCache8=function(e){"use strict";var n=new(t("URI"))(e);if(n.getDomain()){n=n.removeQueryData(["oh"]),n=n.removeQueryData("__gda__");for(var o=Object.keys(n.getQueryData()),r=Array.isArray(o),i=0,o=r?o:o["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var s;if(r){if(i>=o.length)break;s=o[i++]}else{if(i=o.next(),i.done)break;s=i.value}var a=s;a.startsWith("_nc")&&(n=n.removeQueryData(a))}return n.toString()}return e},p.prototype.$VideoDashPrefetchCache9=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=e;Object.keys(n)&&(r=new(t("URI"))(e).addQueryData(n));var i=new(t("XHRRequest"))(r).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(t("getCrossOriginTransport")),a=new(t("Promise"))(function(e,t){i.setErrorHandler(function(e){this.$VideoDashPrefetchCache10(i),t(s(e,r))}.bind(this)),i.setResponseHandler(function(t){i.response=t,this.$VideoDashPrefetchCache10(i),e(i)}.bind(this)),i.setAbortHandler(function(){t(a,new Error("Request promise aborted"))})}.bind(this));return this.$VideoDashPrefetchCache11(e,a,o),this.$VideoDashPrefetchCache12(e,a),this.$VideoDashPrefetchCache3.push(i),i.send(),a},p.prototype.$VideoDashPrefetchCache11=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?36e5:arguments[2];this.$VideoDashPrefetchCache13(e),n>0&&this.$VideoDashPrefetchCache2.set(this.$VideoDashPrefetchCache8(e),setTimeout(function(){return this.$VideoDashPrefetchCache13(e)}.bind(this),n)),this.$VideoDashPrefetchCache12(e,t)},p.prototype.genPrfetchMpdNow=function(e,n,o){var r,i;return t("regeneratorRuntime").async(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.has(n)){s.next=3;break}return s.abrupt("return",null);
case 3:return r=o.getURL(),i=new u(e,r,0),this.$VideoDashPrefetchCache11(n,i.getPromise()),i.start(),s.next=9,t("regeneratorRuntime").awrap(i.getPromise());case 9:return s.abrupt("return",null);case 10:case"end":return s.stop()}},null,this)},p.prototype.queueRequestFromMouseMovement=function(e,n,o,r,i){var s=arguments.length<=5||void 0===arguments[5]?function(){}:arguments[5],a=arguments.length<=6||void 0===arguments[6]?function(){}:arguments[6],c=t("PriorityJobQueue").get(),p=this.$VideoDashPrefetchCache14(n);if(p)return void p.then(a).done();var l=o.getURL(),d=new u(e,l,r);d.getPromise().then(a)["catch"](function(){return this.getAndDelete(n)}.bind(this)),c.enqueue(d,function(){this.$VideoDashPrefetchCache11(n,d.getPromise(),i),s()}.bind(this))},p.prototype.cancelRequestFromMouseMovement=function(e){"use strict";t("PriorityJobQueue").get().abort(e)},p.prototype.$VideoDashPrefetchCache13=function(e,t){"use strict";this.getAndDelete(e,t),this.$VideoDashPrefetchCache2.has(e)&&(clearTimeout(this.$VideoDashPrefetchCache2.get(e)),this.$VideoDashPrefetchCache2["delete"](e))},p.prototype.$VideoDashPrefetchCache15=function(e){"use strict";for(var t=[],n=0;n<e.length;n++){var o=p.createQueryStringURL(e[n]);this.has(o)||t.push(this.$VideoDashPrefetchCache9(o))}return t},p.prototype.$VideoDashPrefetchCache16=function(e){"use strict";var n=p.getConsolidatedURL(e);if(null==n)return this.$VideoDashPrefetchCache15(e);for(var o=new(t("XHRRequest"))(n).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(t("getCrossOriginTransport")),r=Date.now(),i=[],a=0;a<e.length;a++){var u=p.createQueryStringURL(e[a]),l=new(t("Deferred"));this.has(u)||this.$VideoDashPrefetchCache12(u,l.getPromise()),i.push(l)}return o.setErrorHandler(function(e){this.$VideoDashPrefetchCache10(o);for(var t=0;t<i.length;t++)i[t].reject(s(e,n))}.bind(this)),o.setResponseHandler(function(t){for(var n=Date.now()-r,s=0;s<e.length;s++){var a=i[s],u=e[s];a.resolve(c(t,u,n))}this.$VideoDashPrefetchCache10(o)}.bind(this)),o.setAbortHandler(function(){for(var t=0;t<e.length;t++){var n=i[t];n.reject(new Error("Request aborted."))}}),this.$VideoDashPrefetchCache3.push(o),o.send(),i.map(function(e){return e.getPromise()})},p.prototype.$VideoDashPrefetchCache17=function(e){"use strict";this.$VideoDashPrefetchCache5++;var n=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache16(e.video):this.$VideoDashPrefetchCache15(e.video),o=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache16(e.audio):this.$VideoDashPrefetchCache15(e.audio),r=this.$VideoDashPrefetchCache15(e.manifest),i=n.concat(o,r);t("Promise").all(i).then(function(){return this.$VideoDashPrefetchCache18()}.bind(this))["catch"](function(){return this.$VideoDashPrefetchCache18()}.bind(this))},p.prototype.$VideoDashPrefetchCache12=function(e,n){"use strict";e=this.$VideoDashPrefetchCache8(e),this.$VideoDashPrefetchCache1.values().next().done&&t("Run").onLeave(function(){for(var e=0;e<this.$VideoDashPrefetchCache3.length;e++)this.$VideoDashPrefetchCache3[e].abort();this.$VideoDashPrefetchCache3=[],this.$VideoDashPrefetchCache4=[],this.$VideoDashPrefetchCache5=0,this.$VideoDashPrefetchCache1.clear()}.bind(this)),this.$VideoDashPrefetchCache1.set(e,n)},p.prototype.$VideoDashPrefetchCache10=function(e){"use strict";var t=this.$VideoDashPrefetchCache3.indexOf(e);t>-1&&this.$VideoDashPrefetchCache3.splice(t,1)},p.prototype.$VideoDashPrefetchCache18=function(){"use strict";this.$VideoDashPrefetchCache5--;var e=this.$VideoDashPrefetchCache4.shift();e&&this.$VideoDashPrefetchCache17(e)},p.prototype.has=function(e){"use strict";return e=this.$VideoDashPrefetchCache8(e),this.$VideoDashPrefetchCache1.has(e)},p.prototype.getAndDelete=function(e,t){"use strict";e=this.$VideoDashPrefetchCache8(e);var n=this.$VideoDashPrefetchCache1.get(e);return n&&t&&t(),this.$VideoDashPrefetchCache1["delete"](e),n},p.prototype.$VideoDashPrefetchCache14=function(e){"use strict";e=this.$VideoDashPrefetchCache8(e);var t=this.$VideoDashPrefetchCache1.get(e);return t},p.prototype.queueRequestBatch=function(e){"use strict";0===this.$VideoDashPrefetchCache6||this.$VideoDashPrefetchCache5<this.$VideoDashPrefetchCache6?this.$VideoDashPrefetchCache17(e):this.$VideoDashPrefetchCache4.push(e)},p.getInstance=function(){"use strict";return null===l&&(l=new p),l},p.createQueryStringURL=function(e){"use strict";var n=e.url,o=e.start,r=e.end;return null!==o&&void 0!==o&&null!==r&&void 0!==r&&(n=new(t("URI"))(n).addQueryData({bytestart:o,byteend:r})),n.toString()},p.getConsolidatedURL=function(e){"use strict";for(var t="",n=1/0,o=0,r=0;r<e.length;r++){var i=e[r],s=i.url,a=i.start,c=i.end;if(null==s||null==a||null==c)return null;if(""===t)t=s;else if(t!==s)return null;n=Math.min(n,a),o=Math.max(o,c)}return p.createQueryStringURL({url:t,start:n,end:o})},p.loadVideo=function(e){"use strict";if(!t("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained()){var n=p.getInstance();e.manifest||(e.manifest=[]),n.queueRequestBatch({manifest:e.manifest.filter(a),video:e.video.filter(a),audio:e.audio.filter(a)})}},p.getCacheValue=function(e,t){"use strict";return p.getInstance().getAndDelete(e,t)},r.exports=p},null),__d("VideoDisplayTimePlayButton",["CSS","DataStore","Event"],function(e,t,n,o,r,i){var s={},a="_spinner",c={getClicked:function(e){return t("DataStore").get(e,"clicked",!1)},register:function(e,n){var o=e.id;s[o]=t("Event").listen(e,"click",function(){n&&(t("CSS").hide(e),t("CSS").show(n)),t("DataStore").set(e,"clicked",!0)}),n&&(s[o+a]=t("Event").listen(n,"click",function(){t("CSS").hide(n),t("CSS").show(e),t("DataStore").set(e,"clicked",!1)}))},unregister:function(e){var t=e.id;s.hasOwnProperty(t)&&s[t].remove();var n=t+a;s.hasOwnProperty(n)&&s[n].remove()}};r.exports=c},null),__d("VideosRenderingInstrumentation",["DataStore","VideoPlayerHTML5Experiments","performanceAbsoluteNow"],function(e,t,n,o,r,i){var s={storeRenderTime:function(e){var n=t("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?t("performanceAbsoluteNow")():Date.now();return t("DataStore").set(e,"videos_rendering_instrumentation",n),n},retrieveRenderTime:function(e){var n=t("DataStore").get(e,"videos_rendering_instrumentation",NaN);return Number.isNaN(n)&&(n=s.storeRenderTime(e)),n}};r.exports=s},null),__d("distinctArrayBy",["Set"],function(e,t,n,o,r,i){"use strict";function s(e){return e}function a(e){for(var n=arguments.length<=1||void 0===arguments[1]?s:arguments[1],o=[],r=new(t("Set")),i=e,a=Array.isArray(i),c=0,i=a?i:i["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var u;if(a){if(c>=i.length)break;u=i[c++]}else{if(c=i.next(),c.done)break;u=c.value}var p=u,l=n(p);r.has(l)||(r.add(l),o.push(p))}return o}r.exports=a},null),__d("sortReactionTypes",["UFIReactionTypes"],function(e,t,n,o,r,i){function s(e,n){return Object.keys(e).map(function(e){return Number(e)}).sort(function(o,r){return n&&o===t("UFIReactionTypes").LIKE?-1:e[o]["default"]===e[r]["default"]?a[o]-a[r]:e[r]["default"]-e[o]["default"]})}var a={};t("UFIReactionTypes").ordering.forEach(function(e,t){a[e]=t}),r.exports=s},null),__d("XReactComposerLoggingODSController",["XController"],function(e,t,n,o,r,i){r.exports=t("XController").create("/react_composer/logging/ods/",{attachment_type:{type:"String"},composer_type:{type:"Enum",required:!0,enumType:1},event:{type:"String",required:!0}})},null);
//# sourceMappingURL=maps/lrLqMv9vvh_.js.map
